import{r as t,j as n,B as r,f as e,T as a,aE as o,A as i,e as d,b0 as s,P as l,b1 as c,b2 as h,b3 as x,b4 as m,b5 as p,b6 as g,aP as b}from"./mui-CZF-0V7l.js";import{b as u,S as f}from"./index-CM2p59Wv.js";import{u as v}from"./router-C8FM2-5r.js";import"./vendor-HnKmhvXM.js";import"./utils-BLtjaFjY.js";const y=t=>(Number(t)||0).toLocaleString("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}),j=(t,n="print")=>{try{if(!t)return;const r=(t=>{if(!t)return"<html><body><h1>Error: No order data</h1></body></html>";try{const n=t?.customer_details||{},r=n.firstName&&n.lastName?`${n.firstName} ${n.lastName}`.trim():t?.customer_name||n.name||"",e=n.email||t?.customer_email||"",a=n.address||t?.shipping_address||t?.customer_address||"",o=n.phone||t?.customer_phone||"",i=t?.order_summary||{},d=t?.items||[],s=t?.created_at||t?.placed_on?new Date(t.created_at||t.placed_on).toLocaleString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",l=d.map((t,n)=>{const r=t.quantity||1,e=Number(t.price)||0,a=e*r;return`\n        <tr>\n          <td>${n+1}</td>\n          <td>${t.name||t.product_name||"Product"}</td>\n          <td>${y(e)}</td>\n          <td>${r}</td>\n          <td>${y(a)}</td>\n        </tr>\n      `}).join("");return`\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="UTF-8" />\n  <title>Invoice #${t?.order_id||""}</title>\n  <style>\n    :root { --primary:#4b6f44; --accent:#e94560; --border:#e9ecef; --muted:#666; }\n    * { box-sizing: border-box; font-family: 'Inter', Arial, sans-serif; }\n    body { margin: 0; padding: 24px; background: #f8f9fb; color: #1d1d1f; }\n    .invoice { max-width: 900px; margin: 0 auto; background: #fff; padding: 32px; border-radius: 12px; border: 1px solid var(--border); }\n    .header { display: flex; justify-content: space-between; align-items: flex-start; gap: 16px; }\n    .title { font-size: 28px; font-weight: 800; color: var(--primary); margin: 0; }\n    .meta { text-align: right; }\n    .label { color: var(--muted); font-size: 13px; }\n    .value { font-weight: 700; }\n    .section { margin-top: 24px; }\n    .section h3 { margin: 0 0 8px; color: var(--primary); font-size: 16px; }\n    .card { border: 1px solid var(--border); border-radius: 10px; padding: 16px; background: #fafbfc; }\n    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px,1fr)); gap: 12px; }\n    table { width: 100%; border-collapse: collapse; margin-top: 12px; }\n    th, td { padding: 10px; border-bottom: 1px solid var(--border); text-align: left; font-size: 14px; }\n    th { background: #f3f5f7; color: #34495e; }\n    tfoot td { font-weight: 700; }\n    .right { text-align: right; }\n    .totals { width: 320px; margin-left: auto; }\n    .badge { display: inline-block; padding: 6px 12px; background: #eef7f0; color: var(--primary); border-radius: 999px; font-weight: 700; font-size: 12px; }\n    .footer { margin-top: 24px; font-size: 12px; color: var(--muted); text-align: center; }\n  </style>\n</head>\n<body>\n  <div class="invoice">\n    <div class="header">\n      <div>\n        <div class="title">Invoice / Tax Invoice</div>\n        <div class="badge">Order #${t?.order_id||"N/A"}</div>\n      </div>\n      <div class="meta">\n        <div class="label">Date</div>\n        <div class="value">${s}</div>\n        <div class="label" style="margin-top:6px;">Store</div>\n        <div class="value">Souk and Stitch${f?` (ID: ${f})`:""}</div>\n      </div>\n    </div>\n\n    <div class="section grid">\n      <div class="card">\n        <h3>From</h3>\n        <div class="value">Souk and Stitch</div>\n        <div class="label">Premium Handcrafted Products</div>\n      </div>\n      <div class="card">\n        <h3>Bill To</h3>\n        <div class="value">${r||"Customer"}</div>\n        ${a?`<div class="label">${a}</div>`:""}\n        ${o?`<div class="label">Phone: ${o}</div>`:""}\n        ${e?`<div class="label">Email: ${e}</div>`:""}\n      </div>\n    </div>\n\n    <div class="section">\n      <h3>Items</h3>\n      <table>\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Description</th>\n            <th class="right">Price</th>\n            <th class="right">Qty</th>\n            <th class="right">Amount</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${l||'<tr><td colspan="5">No items</td></tr>'}\n        </tbody>\n      </table>\n    </div>\n\n    <div class="section totals">\n      <table>\n        <tbody>\n          <tr><td>Subtotal</td><td class="right">${y(i.subtotal||0)}</td></tr>\n          <tr><td>Shipping</td><td class="right">${y(i.shipping||0)}</td></tr>\n          <tr><td>Tax</td><td class="right">${y(i.tax||0)}</td></tr>\n          <tr><td>Discount</td><td class="right">-${y(i.discount||0)}</td></tr>\n        </tbody>\n        <tfoot>\n          <tr><td>Total</td><td class="right">${y(i.total||t?.total_amount||0)}</td></tr>\n        </tfoot>\n      </table>\n    </div>\n\n    <div class="footer">\n      Thank you for shopping with us. For support, contact soukandstitch@gmail.com\n    </div>\n  </div>\n</body>\n</html>\n`}catch(n){return`<html><body><h1>Error generating invoice: ${n.message}</h1></body></html>`}})(t),e=window.open("","_blank","width=1024,height=1200");if(!e)return;e.document.open(),e.document.write(r),e.document.close(),e.focus(),e.onload=()=>{"print"!==n&&"download"!==n||e.print()}}catch(r){alert("Failed to generate invoice. Please try again.")}},$=()=>{const[f,y]=t.useState([]),[$,F]=t.useState(!0),[_,w]=t.useState(null),S=v();t.useEffect(()=>{k()},[]);const k=async()=>{try{F(!0),w(null);const t=await u.get("/customer/orders");t.data?.success?y(t.data.orders||[]):w("Failed to fetch orders")}catch(t){w("Failed to load orders")}finally{F(!1)}},I=t=>{if(!t)return"Date unavailable";try{return new Date(t).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})}catch(n){return"Date unavailable"}};return $?n.jsxs(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",flexDirection:"column",gap:2},children:[n.jsx(e,{sx:{color:"#E94560"}}),n.jsx(a,{variant:"body1",sx:{color:"#8B8B8B"},children:"Loading your orders..."})]}):_?n.jsxs(o,{maxWidth:"lg",sx:{py:4},children:[n.jsx(i,{severity:"error",sx:{mb:3},children:_}),n.jsx(d,{variant:"contained",onClick:k,sx:{background:"#4b6f44","&:hover":{background:"#3a5a34"}},children:"Try Again"})]}):0===f.length?n.jsx(o,{maxWidth:"lg",sx:{py:4,mt:{xs:"90px",md:"70px"}},children:n.jsxs(r,{sx:{textAlign:"center",py:8,bgcolor:"#FFFFFF",borderRadius:4,boxShadow:"0px 4px 20px rgba(75, 111, 68, 0.08)"},children:[n.jsx(a,{variant:"h5",sx:{color:"#4b6f44",fontWeight:600,mb:2},children:"No Orders Yet"}),n.jsx(a,{variant:"body1",sx:{color:"#8B8B8B",mb:3},children:"You haven't placed any orders yet. Start shopping to see your orders here."}),n.jsx(d,{variant:"contained",onClick:()=>S("/"),sx:{background:"linear-gradient(135deg, #E94560 0%, #FF6B7A 100%)","&:hover":{background:"linear-gradient(135deg, #C73650 0%, #E94560 100%)"}},children:"Start Shopping"})]})}):n.jsxs(o,{maxWidth:"lg",sx:{py:4,mt:{xs:"90px",md:"70px"}},children:[n.jsx(a,{variant:"h4",sx:{fontWeight:700,color:"#4b6f44",mb:4,fontFamily:'"Inter", sans-serif'},children:"My Orders"}),n.jsx(s,{component:l,sx:{boxShadow:"0px 4px 20px rgba(75, 111, 68, 0.08)"},children:n.jsxs(c,{children:[n.jsx(h,{children:n.jsxs(x,{sx:{bgcolor:"#f5f5f5"},children:[n.jsx(m,{sx:{fontWeight:700,color:"#4b6f44"},children:"Order ID"}),n.jsx(m,{sx:{fontWeight:700,color:"#4b6f44"},children:"Items"}),n.jsx(m,{sx:{fontWeight:700,color:"#4b6f44"},children:"Purchase Date"}),n.jsx(m,{sx:{fontWeight:700,color:"#4b6f44"},children:"Total"}),n.jsx(m,{sx:{fontWeight:700,color:"#4b6f44",textAlign:"center"},children:"Invoice"})]})}),n.jsx(p,{children:f.map(t=>{const e=t.order_id||t.orderId||"",o=t.created_at||t.placed_on||t.createdAt||t.placedOn,i=t.order_summary?.total||t.total_amount||t.total||0,s=(t=>(t?.items||[]).map(t=>t.name||t.product_name||"Product").join(", "))(t);return n.jsxs(x,{sx:{"&:hover":{bgcolor:"#fafafa"},"&:last-child td":{borderBottom:0}},children:[n.jsx(m,{children:n.jsx(a,{variant:"body2",sx:{fontWeight:600,color:"#4b6f44"},children:e})}),n.jsx(m,{children:n.jsx(a,{variant:"body2",sx:{color:"#2f3b31"},children:s||"No items"})}),n.jsx(m,{children:n.jsx(a,{variant:"body2",sx:{color:"#8B8B8B"},children:I(o)})}),n.jsx(m,{children:n.jsxs(a,{variant:"body2",sx:{fontWeight:600,color:"#4b6f44"},children:["â‚¹",Number(i).toLocaleString()]})}),n.jsx(m,{sx:{textAlign:"center"},children:n.jsxs(r,{sx:{display:"flex",gap:1,justifyContent:"center",flexWrap:"wrap"},children:[n.jsx(d,{variant:"contained",size:"small",startIcon:n.jsx(g,{}),onClick:()=>j(t,"download"),sx:{background:"linear-gradient(135deg, #E94560 0%, #FF6B7A 100%)",color:"#FFFFFF",fontSize:"0.75rem",px:1.5,py:.5,"&:hover":{background:"linear-gradient(135deg, #C73650 0%, #E94560 100%)"}},children:"Download"}),n.jsx(d,{variant:"outlined",size:"small",startIcon:n.jsx(b,{}),onClick:()=>j(t,"print"),sx:{borderColor:"#4b6f44",color:"#4b6f44",fontSize:"0.75rem",px:1.5,py:.5,"&:hover":{borderColor:"#16213E",bgcolor:"rgba(75, 111, 68, 0.1)"}},children:"Print"})]})})]},e||t.created_at)})})]})})]})};export{$ as default};
