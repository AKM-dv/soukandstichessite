import{a as e,r,j as t,B as s,aH as o,P as a,I as i,aw as n,T as l,g as d,K as c,i as x,ah as p,ax as u,b8 as m,C as h,ab as g,A as f}from"./mui-C7nK-0ZR.js";import{O as j}from"./OptimizedProductCard-BzpRu_BD.js";import{u as b,a as C,P as y,b as v}from"./index-CXpAYYKU.js";import{d as S,u as E}from"./router-DoZmC-hp.js";import"./vendor-HnKmhvXM.js";import"./utils-fGN9A5xN.js";const A=()=>{const[A,B]=S(),w=E();e("(max-width:768px)");const{addToCart:I,isLoggedIn:F,login:O}=b(),[W,k]=r.useState(A.get("q")||""),[R,M]=r.useState([]),[P,T]=r.useState(!1),[q,z]=r.useState(!1),[D,H]=r.useState({open:!1,message:"",severity:"success"}),[_,L]=r.useState(null),[K,N]=r.useState(!1),[U,$]=r.useState("relevance"),[G,J]=r.useState([0,1e4]),[Q,V]=r.useState(!1);r.useEffect(()=>{const e=A.get("q");e&&e.trim()&&(k(e),X(e))},[A]);const X=async e=>{if(!e.trim())return M([]),void N(!1);T(!0),N(!0);try{const r=await C.get(`/search?q=${encodeURIComponent(e)}`);r.data?.success?M(r.data.products||[]):M([])}catch(r){M([])}finally{T(!1)}},Y=[...R].sort((e,r)=>{switch(U){case"price_low":return e.price-r.price;case"price_high":return r.price-e.price;case"name":return e.name.localeCompare(r.name);default:return 0}}).filter(e=>e.price>=G[0]&&e.price<=G[1]);return t.jsxs(s,{sx:{minHeight:"100vh",bgcolor:"#CDC5B4",py:{xs:2,md:4}},children:[t.jsxs(o,{maxWidth:"lg",children:[t.jsxs(a,{sx:{p:3,mb:4,borderRadius:4,boxShadow:"0px 4px 20px rgba(26, 26, 46, 0.08)",border:"1px solid rgba(26, 26, 46, 0.05)"},children:[t.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[t.jsx(i,{onClick:()=>w(-1),sx:{color:"#1A1A2E","&:hover":{bgcolor:"rgba(233, 69, 96, 0.1)",color:"#E94560"}},children:t.jsx(n,{})}),t.jsx(l,{variant:"h5",sx:{fontWeight:600,color:"#1A1A2E"},children:"Search Results"})]}),t.jsx(s,{component:"form",onSubmit:e=>{e.preventDefault(),W.trim()&&(B({q:W.trim()}),X(W.trim()))},sx:{mb:3},children:t.jsx(d,{fullWidth:!0,placeholder:"Search for products...",value:W,onChange:e=>k(e.target.value),InputProps:{startAdornment:t.jsx(c,{position:"start",children:t.jsx(p,{sx:{color:"#8B8B8B"}})}),endAdornment:t.jsx(c,{position:"end",children:t.jsx(x,{type:"submit",variant:"contained",sx:{background:"linear-gradient(135deg, #E94560 0%, #FF6B7A 100%)","&:hover":{background:"linear-gradient(135deg, #C73650 0%, #E94560 100%)"}},children:"Search"})}),sx:{bgcolor:"#FFFFFF",borderRadius:3,"& .MuiOutlinedInput-notchedOutline":{border:"2px solid #E5E5E5"},"&:hover .MuiOutlinedInput-notchedOutline":{border:"2px solid #E94560"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{border:"2px solid #E94560"}}},sx:{"& .MuiInputBase-input":{py:1.5,fontSize:"1rem"}}})}),K&&t.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:[t.jsxs(l,{variant:"h6",sx:{fontWeight:600,color:"#1A1A2E"},children:["Found ",Y.length," product",1!==Y.length?"s":"",' for "',W,'"']}),t.jsxs(s,{sx:{display:"flex",gap:1},children:[t.jsx(x,{variant:"outlined",startIcon:t.jsx(u,{}),onClick:()=>V(!Q),sx:{borderColor:"#E94560",color:"#E94560","&:hover":{borderColor:"#C73650",bgcolor:"rgba(233, 69, 96, 0.1)"}},children:"Filters"}),t.jsx(x,{variant:"outlined",startIcon:t.jsx(m,{}),sx:{borderColor:"#1A1A2E",color:"#1A1A2E","&:hover":{borderColor:"#16213E",bgcolor:"rgba(26, 26, 46, 0.1)"}},children:"Sort"})]})]})]}),P&&t.jsxs(s,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8,flexDirection:"column",gap:2},children:[t.jsx(h,{sx:{color:"#E94560"}}),t.jsx(l,{variant:"body1",sx:{color:"#8B8B8B"},children:"Searching products..."})]}),K&&!P&&0===Y.length&&t.jsxs(a,{sx:{p:6,textAlign:"center",borderRadius:4,boxShadow:"0px 4px 20px rgba(26, 26, 46, 0.08)"},children:[t.jsx(p,{sx:{fontSize:80,color:"#B8B8B8",mb:2}}),t.jsx(l,{variant:"h5",sx:{color:"#1A1A2E",fontWeight:600,mb:2},children:"No products found"}),t.jsx(l,{variant:"body1",sx:{color:"#8B8B8B",mb:3},children:"Try searching with different keywords or browse our categories"}),t.jsx(x,{variant:"contained",onClick:()=>w("/"),sx:{background:"linear-gradient(135deg, #E94560 0%, #FF6B7A 100%)","&:hover":{background:"linear-gradient(135deg, #C73650 0%, #E94560 100%)"}},children:"Browse Categories"})]}),P?t.jsx(s,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(auto-fit, minmax(200px, 1fr))",sm:"repeat(auto-fit, minmax(220px, 1fr))",md:"repeat(auto-fit, minmax(240px, 1fr))",lg:"repeat(auto-fit, minmax(260px, 1fr))"},gap:2,justifyContent:"center",alignItems:"start"},children:Array.from({length:8}).map((e,r)=>t.jsx(s,{sx:{width:"100%",maxWidth:"100%",justifySelf:"center"},children:t.jsx(y,{})},r))}):Y.length>0?t.jsx(s,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(auto-fit, minmax(200px, 1fr))",sm:"repeat(auto-fit, minmax(220px, 1fr))",md:"repeat(auto-fit, minmax(240px, 1fr))",lg:"repeat(auto-fit, minmax(260px, 1fr))"},gap:2,justifyContent:"center",alignItems:"start"},children:Y.map(e=>t.jsx(s,{sx:{width:"100%",maxWidth:"100%",justifySelf:"center"},children:t.jsx(j,{product:e})},e.product_id))}):null]}),t.jsx(v,{open:q,onClose:()=>z(!1),onLoginSuccess:e=>{z(!1),O(e)},message:"Please login to add items to cart"}),t.jsx(g,{open:D.open,autoHideDuration:3e3,onClose:()=>H({...D,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:t.jsx(f,{onClose:()=>H({...D,open:!1}),severity:D.severity,sx:{width:"100%",borderRadius:3,fontWeight:500},children:D.message})})]})};export{A as default};
