import{r as e,j as t,aH as s,B as r,C as a,A as n,T as i,P as c,w as d,V as o,o as l,p as x,at as m,aX as h,aZ as j,a_ as y,a$ as u,b0 as p,b1 as g,b2 as b,t as v,v as f,aR as _,b3 as w,Q as I,aY as C,b4 as B}from"./mui-C7nK-0ZR.js";import{a as P}from"./index-fiSwrUpV.js";import"./vendor-HnKmhvXM.js";import"./utils-fGN9A5xN.js";import"./router-DoZmC-hp.js";const N=()=>{const[N,A]=e.useState([]),[D,S]=e.useState(!0),[L,F]=e.useState(null);e.useEffect(()=>{T()},[]);const T=async()=>{try{S(!0),F(null);const e=await P.get("/customer/payments");e.data.success?A(e.data.payments):F("Failed to fetch payments")}catch(e){F(e.response?.data?.error||"Failed to fetch payments")}finally{S(!1)}},z=e=>{switch(e?.toLowerCase()){case"completed":case"success":return"success";case"pending":return"warning";case"failed":case"cancelled":return"error";default:return"default"}},H=e=>{switch(e?.toLowerCase()){case"completed":case"success":return t.jsx(m,{});case"pending":return t.jsx(h,{});case"failed":return t.jsx(B,{});case"cancelled":return t.jsx(C,{});default:return t.jsx(d,{})}},R=e=>{switch(e?.toLowerCase()){case"razorpay":default:return t.jsx(d,{});case"card":return t.jsx(I,{});case"bank_transfer":return t.jsx(w,{});case"cod":return t.jsx(_,{})}},W=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",O=(e,t="INR")=>e?new Intl.NumberFormat("en-IN",{style:"currency",currency:t||"INR"}).format(e):"₹0.00";return D?t.jsx(s,{maxWidth:"lg",sx:{py:4},children:t.jsx(r,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:t.jsx(a,{})})}):L?t.jsx(s,{maxWidth:"lg",sx:{py:4},children:t.jsx(n,{severity:"error",sx:{mb:3},children:L})}):t.jsxs(s,{maxWidth:"lg",sx:{py:4},children:[t.jsxs(r,{sx:{mb:4},children:[t.jsx(i,{variant:"h4",component:"h1",gutterBottom:!0,children:"Payment History"}),t.jsx(i,{variant:"body1",color:"text.secondary",children:"View all your payment transactions and their status"})]}),0===N.length?t.jsxs(c,{sx:{p:4,textAlign:"center"},children:[t.jsx(d,{sx:{fontSize:64,color:"text.secondary",mb:2}}),t.jsx(i,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Payment History"}),t.jsx(i,{variant:"body2",color:"text.secondary",children:"You haven't made any payments yet. Your payment history will appear here after you place orders."})]}):t.jsxs(o,{container:!0,spacing:3,children:[t.jsx(o,{item:!0,xs:12,md:4,children:t.jsx(l,{children:t.jsxs(x,{children:[t.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(m,{color:"success",sx:{mr:1}}),t.jsx(i,{variant:"h6",children:"Successful"})]}),t.jsx(i,{variant:"h4",color:"success.main",children:N.filter(e=>"completed"===e.payment_status?.toLowerCase()).length}),t.jsx(i,{variant:"body2",color:"text.secondary",children:"Completed payments"})]})})}),t.jsx(o,{item:!0,xs:12,md:4,children:t.jsx(l,{children:t.jsxs(x,{children:[t.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(h,{color:"warning",sx:{mr:1}}),t.jsx(i,{variant:"h6",children:"Pending"})]}),t.jsx(i,{variant:"h4",color:"warning.main",children:N.filter(e=>"pending"===e.payment_status?.toLowerCase()).length}),t.jsx(i,{variant:"body2",color:"text.secondary",children:"Pending payments"})]})})}),t.jsx(o,{item:!0,xs:12,md:4,children:t.jsx(l,{children:t.jsxs(x,{children:[t.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(d,{color:"primary",sx:{mr:1}}),t.jsx(i,{variant:"h6",children:"Total"})]}),t.jsx(i,{variant:"h4",color:"primary.main",children:O(N.reduce((e,t)=>e+(t.amount||0),0))}),t.jsx(i,{variant:"body2",color:"text.secondary",children:"Total amount paid"})]})})}),t.jsx(o,{item:!0,xs:12,children:t.jsx(l,{children:t.jsxs(x,{children:[t.jsx(i,{variant:"h6",gutterBottom:!0,children:"Recent Payments"}),t.jsx(j,{children:t.jsxs(y,{children:[t.jsx(u,{children:t.jsxs(p,{children:[t.jsx(g,{children:"Payment ID"}),t.jsx(g,{children:"Order ID"}),t.jsx(g,{children:"Amount"}),t.jsx(g,{children:"Method"}),t.jsx(g,{children:"Status"}),t.jsx(g,{children:"Date"})]})}),t.jsx(b,{children:N.map(e=>t.jsxs(p,{children:[t.jsx(g,{children:t.jsx(i,{variant:"body2",sx:{fontFamily:"monospace"},children:e.payment_id})}),t.jsx(g,{children:t.jsxs(i,{variant:"body2",color:"primary",children:["#",e.order_id]})}),t.jsx(g,{children:t.jsx(i,{variant:"body2",sx:{fontWeight:600},children:O(e.amount,e.currency)})}),t.jsx(g,{children:t.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[R(e.payment_method),t.jsx(i,{variant:"body2",children:e.payment_method?.toUpperCase()||"N/A"})]})}),t.jsx(g,{children:t.jsx(v,{icon:H(e.payment_status),label:e.payment_status,color:z(e.payment_status),size:"small"})}),t.jsx(g,{children:t.jsx(i,{variant:"body2",children:W(e.created_at)})})]},e.payment_id))})]})})]})})}),t.jsx(o,{item:!0,xs:12,children:t.jsx(i,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Payment Details"})}),N.map(e=>t.jsx(o,{item:!0,xs:12,children:t.jsx(l,{children:t.jsxs(x,{children:[t.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[t.jsxs(r,{children:[t.jsxs(i,{variant:"h6",component:"h2",gutterBottom:!0,children:["Payment #",e.payment_id]}),t.jsxs(i,{variant:"body2",color:"text.secondary",children:["Order #",e.order_id," • ",W(e.created_at)]})]}),t.jsxs(r,{sx:{textAlign:"right"},children:[t.jsx(i,{variant:"h6",color:"primary",gutterBottom:!0,children:O(e.amount,e.currency)}),t.jsx(v,{icon:H(e.payment_status),label:e.payment_status,color:z(e.payment_status),size:"small"})]})]}),t.jsx(f,{sx:{my:2}}),t.jsxs(o,{container:!0,spacing:2,children:[t.jsxs(o,{item:!0,xs:12,md:6,children:[t.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Payment Method"}),t.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[R(e.payment_method),t.jsx(i,{variant:"body2",children:e.payment_method?.toUpperCase()||"N/A"})]}),e.transaction_id&&t.jsxs(t.Fragment,{children:[t.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Transaction ID"}),t.jsx(i,{variant:"body2",sx:{fontFamily:"monospace",mb:2},children:e.transaction_id})]})]}),t.jsxs(o,{item:!0,xs:12,md:6,children:[t.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Customer Details"}),t.jsx(i,{variant:"body2",sx:{mb:1},children:e.customer_name||"N/A"}),t.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Order Total"}),t.jsx(i,{variant:"body2",children:O(e.order_total,e.currency)})]})]}),e.updated_at&&e.updated_at!==e.created_at&&t.jsx(r,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:t.jsxs(i,{variant:"caption",color:"text.secondary",children:["Last updated: ",W(e.updated_at)]})})]})})},e.payment_id))]})]})};export{N as default};
