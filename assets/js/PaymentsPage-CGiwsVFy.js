import{r as e,j as t,aI as s,B as r,h as a,A as n,T as i,P as c,y as d,aK as l,q as o,s as x,aq as m,b2 as h,b4 as j,b5 as y,b6 as u,b7 as p,b8 as b,b9 as g,w as v,i as f,aT as _,ba as w,aN as I,b3 as C,bb as B}from"./mui-BsZk_SdY.js";import{a as N}from"./index-B1MwVgOX.js";import"./vendor-HnKmhvXM.js";import"./utils-D-l9lzRM.js";import"./router-BqjGcK6Z.js";const P=()=>{const[P,A]=e.useState([]),[D,S]=e.useState(!0),[L,T]=e.useState(null);e.useEffect(()=>{F()},[]);const F=async()=>{try{S(!0),T(null);const e=await N.get("/customer/payments");e.data.success?A(e.data.payments):T("Failed to fetch payments")}catch(e){T(e.response?.data?.error||"Failed to fetch payments")}finally{S(!1)}},z=e=>{switch(e?.toLowerCase()){case"completed":case"success":return"success";case"pending":return"warning";case"failed":case"cancelled":return"error";default:return"default"}},W=e=>{switch(e?.toLowerCase()){case"completed":case"success":return t.jsx(m,{});case"pending":return t.jsx(h,{});case"failed":return t.jsx(B,{});case"cancelled":return t.jsx(C,{});default:return t.jsx(d,{})}},H=e=>{switch(e?.toLowerCase()){case"razorpay":default:return t.jsx(d,{});case"card":return t.jsx(I,{});case"bank_transfer":return t.jsx(w,{});case"cod":return t.jsx(_,{})}},O=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",R=(e,t="INR")=>e?new Intl.NumberFormat("en-IN",{style:"currency",currency:t||"INR"}).format(e):"₹0.00";return D?t.jsx(s,{maxWidth:"lg",sx:{py:4},children:t.jsx(r,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:t.jsx(a,{})})}):L?t.jsx(s,{maxWidth:"lg",sx:{py:4},children:t.jsx(n,{severity:"error",sx:{mb:3},children:L})}):t.jsxs(s,{maxWidth:"lg",sx:{py:4},children:[t.jsxs(r,{sx:{mb:4},children:[t.jsx(i,{variant:"h4",component:"h1",gutterBottom:!0,children:"Payment History"}),t.jsx(i,{variant:"body1",color:"text.secondary",children:"View all your payment transactions and their status"})]}),0===P.length?t.jsxs(c,{sx:{p:4,textAlign:"center"},children:[t.jsx(d,{sx:{fontSize:64,color:"text.secondary",mb:2}}),t.jsx(i,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Payment History"}),t.jsx(i,{variant:"body2",color:"text.secondary",children:"You haven't made any payments yet. Your payment history will appear here after you place orders."})]}):t.jsxs(l,{container:!0,spacing:3,children:[t.jsx(l,{item:!0,xs:12,md:4,children:t.jsx(o,{children:t.jsxs(x,{children:[t.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(m,{color:"success",sx:{mr:1}}),t.jsx(i,{variant:"h6",children:"Successful"})]}),t.jsx(i,{variant:"h4",color:"success.main",children:P.filter(e=>"completed"===e.payment_status?.toLowerCase()).length}),t.jsx(i,{variant:"body2",color:"text.secondary",children:"Completed payments"})]})})}),t.jsx(l,{item:!0,xs:12,md:4,children:t.jsx(o,{children:t.jsxs(x,{children:[t.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(h,{color:"warning",sx:{mr:1}}),t.jsx(i,{variant:"h6",children:"Pending"})]}),t.jsx(i,{variant:"h4",color:"warning.main",children:P.filter(e=>"pending"===e.payment_status?.toLowerCase()).length}),t.jsx(i,{variant:"body2",color:"text.secondary",children:"Pending payments"})]})})}),t.jsx(l,{item:!0,xs:12,md:4,children:t.jsx(o,{children:t.jsxs(x,{children:[t.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(d,{color:"primary",sx:{mr:1}}),t.jsx(i,{variant:"h6",children:"Total"})]}),t.jsx(i,{variant:"h4",color:"primary.main",children:R(P.reduce((e,t)=>e+(t.amount||0),0))}),t.jsx(i,{variant:"body2",color:"text.secondary",children:"Total amount paid"})]})})}),t.jsx(l,{item:!0,xs:12,children:t.jsx(o,{children:t.jsxs(x,{children:[t.jsx(i,{variant:"h6",gutterBottom:!0,children:"Recent Payments"}),t.jsx(j,{children:t.jsxs(y,{children:[t.jsx(u,{children:t.jsxs(p,{children:[t.jsx(b,{children:"Payment ID"}),t.jsx(b,{children:"Order ID"}),t.jsx(b,{children:"Amount"}),t.jsx(b,{children:"Method"}),t.jsx(b,{children:"Status"}),t.jsx(b,{children:"Date"})]})}),t.jsx(g,{children:P.map(e=>t.jsxs(p,{children:[t.jsx(b,{children:t.jsx(i,{variant:"body2",sx:{fontFamily:"monospace"},children:e.payment_id})}),t.jsx(b,{children:t.jsxs(i,{variant:"body2",color:"primary",children:["#",e.order_id]})}),t.jsx(b,{children:t.jsx(i,{variant:"body2",sx:{fontWeight:600},children:R(e.amount,e.currency)})}),t.jsx(b,{children:t.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[H(e.payment_method),t.jsx(i,{variant:"body2",children:e.payment_method?.toUpperCase()||"N/A"})]})}),t.jsx(b,{children:t.jsx(v,{icon:W(e.payment_status),label:e.payment_status,color:z(e.payment_status),size:"small"})}),t.jsx(b,{children:t.jsx(i,{variant:"body2",children:O(e.created_at)})})]},e.payment_id))})]})})]})})}),t.jsx(l,{item:!0,xs:12,children:t.jsx(i,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Payment Details"})}),P.map(e=>t.jsx(l,{item:!0,xs:12,children:t.jsx(o,{children:t.jsxs(x,{children:[t.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[t.jsxs(r,{children:[t.jsxs(i,{variant:"h6",component:"h2",gutterBottom:!0,children:["Payment #",e.payment_id]}),t.jsxs(i,{variant:"body2",color:"text.secondary",children:["Order #",e.order_id," • ",O(e.created_at)]})]}),t.jsxs(r,{sx:{textAlign:"right"},children:[t.jsx(i,{variant:"h6",color:"primary",gutterBottom:!0,children:R(e.amount,e.currency)}),t.jsx(v,{icon:W(e.payment_status),label:e.payment_status,color:z(e.payment_status),size:"small"})]})]}),t.jsx(f,{sx:{my:2}}),t.jsxs(l,{container:!0,spacing:2,children:[t.jsxs(l,{item:!0,xs:12,md:6,children:[t.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Payment Method"}),t.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[H(e.payment_method),t.jsx(i,{variant:"body2",children:e.payment_method?.toUpperCase()||"N/A"})]}),e.transaction_id&&t.jsxs(t.Fragment,{children:[t.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Transaction ID"}),t.jsx(i,{variant:"body2",sx:{fontFamily:"monospace",mb:2},children:e.transaction_id})]})]}),t.jsxs(l,{item:!0,xs:12,md:6,children:[t.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Customer Details"}),t.jsx(i,{variant:"body2",sx:{mb:1},children:e.customer_name||"N/A"}),t.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Order Total"}),t.jsx(i,{variant:"body2",children:R(e.order_total,e.currency)})]})]}),e.updated_at&&e.updated_at!==e.created_at&&t.jsx(r,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:t.jsxs(i,{variant:"caption",color:"text.secondary",children:["Last updated: ",O(e.updated_at)]})})]})})},e.payment_id))]})]})};export{P as default};
