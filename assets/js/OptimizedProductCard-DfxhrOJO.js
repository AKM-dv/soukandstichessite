import{a as e,r,j as a,B as t,T as i,I as o,ac as s,W as n,ao as d,q as l,i as c,ab as x,A as p}from"./mui-C7nK-0ZR.js";import{u as g,I as b,S as h,F as f,b as u}from"./index-fiSwrUpV.js";import{u as m}from"./router-DoZmC-hp.js";const w=({product:w})=>{const{addToCart:y,isLoggedIn:j,login:S}=g(),k=m(),z=e("(max-width:768px)"),[v,I]=r.useState(!1),[F,R]=r.useState(!1),[W,C]=r.useState({open:!1,message:"",severity:"success"}),[P,L]=r.useState(!1),[D,E]=r.useState(!1),{originalPrice:_,salePrice:B,discountPercentage:A,imgV1:H,imgV2:O}=r.useMemo(()=>{const e=parseFloat(w.original_price)||0,r=parseFloat(w.price)||0,a=e>0&&r<e?Math.round((e-r)/e*100):0,t=`${b}/uploads/products/${h}/${w.product_id}`;return{originalPrice:e,salePrice:r,discountPercentage:a,imgV1:t+"_v1.png",imgV2:t+"_v2.png"}},[w.original_price,w.price,w.product_id]),T=()=>{k(`/product/${w.product_id}`)};return a.jsxs(a.Fragment,{children:[a.jsxs(t,{sx:{width:"100%",height:480,position:"relative",background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)",borderRadius:"20px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",border:"1px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",display:"flex",flexDirection:"column","&:hover":{transform:"translateY(-8px) scale(1.02)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15)",border:"1px solid rgba(233, 30, 99, 0.3)"}},onClick:T,onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:[a.jsxs(t,{sx:{position:"relative",width:"100%",height:320,overflow:"hidden",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",borderRadius:"20px 20px 0 0"},children:[a.jsx(t,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"\n              radial-gradient(circle at 20% 80%, rgba(233, 30, 99, 0.1) 0%, transparent 50%),\n              radial-gradient(circle at 80% 20%, rgba(30, 136, 229, 0.1) 0%, transparent 50%),\n              radial-gradient(circle at 40% 40%, rgba(76, 175, 80, 0.1) 0%, transparent 50%)\n            ",zIndex:1}}),a.jsx(f,{src:H,alt:w.name,height:"100%",priority:!0,quality:75,optimizedWidth:z?200:260,optimizedHeight:320,sx:{width:"100%",height:"100%",objectFit:"cover",transition:"all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",position:"absolute",top:0,left:0,zIndex:2,transform:D?"scale(1.1) rotate(2deg)":"scale(1) rotate(0deg)"},placeholder:"Loading product..."}),a.jsx(f,{src:O,alt:w.name,height:"100%",quality:75,optimizedWidth:z?200:260,optimizedHeight:320,sx:{width:"100%",height:"100%",objectFit:"cover",position:"absolute",top:0,left:0,opacity:1,transition:"all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:3,transform:D?"scale(1.05) rotate(-1deg)":"scale(1) rotate(0deg)"},placeholder:"Loading product image..."}),a.jsxs(t,{sx:{position:"absolute",top:0,left:0,right:0,height:"50%",background:"linear-gradient(180deg, rgba(0,0,0,0.4) 0%, transparent 100%)",zIndex:4,p:2},children:[A>0&&a.jsxs(t,{sx:{background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%)",color:"white",px:2.5,py:1,borderRadius:"12px",fontSize:"0.75rem",fontWeight:700,fontFamily:'"Inter", sans-serif',textTransform:"uppercase",letterSpacing:.8,boxShadow:"0 4px 12px rgba(255, 107, 107, 0.4)",transform:D?"scale(1.1) rotate(-5deg)":"scale(1) rotate(0deg)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"inline-block",mb:1},children:["-",A,"% OFF"]}),a.jsx(t,{sx:{background:"linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%)",color:"white",px:2,py:.8,borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,fontFamily:'"Inter", sans-serif',textTransform:"uppercase",letterSpacing:.5,boxShadow:"0 4px 12px rgba(78, 205, 196, 0.4)",transform:D?"scale(1.1) rotate(5deg)":"scale(1) rotate(0deg)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"inline-block",ml:A>0?1:0},children:"New"})]}),a.jsx(t,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:4,textAlign:"center",opacity:D?1:0,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"12px",p:2,maxWidth:"80%",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)"},children:a.jsx(i,{sx:{fontSize:{xs:12,sm:14},fontWeight:600,color:"#2c3e50",fontFamily:'"Inter", sans-serif',lineHeight:1.3,textTransform:"uppercase",letterSpacing:.5},children:w.name})}),a.jsxs(t,{sx:{position:"absolute",bottom:0,left:0,right:0,height:"50%",background:"linear-gradient(0deg, rgba(0,0,0,0.6) 0%, transparent 100%)",zIndex:4,p:2,display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"flex-start"},children:[a.jsx(t,{sx:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"8px",p:1.5,mb:1,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)"},children:A>0?a.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[a.jsxs(i,{sx:{fontSize:{xs:10,sm:12},color:"#6c757d",textDecoration:"line-through",fontFamily:'"Inter", sans-serif',fontWeight:500},children:["₹",_.toLocaleString()]}),a.jsxs(i,{sx:{fontSize:{xs:14,sm:16},fontWeight:700,color:"#e74c3c",fontFamily:'"Inter", sans-serif'},children:["₹",B.toLocaleString()]})]}):a.jsxs(i,{sx:{fontSize:{xs:14,sm:16},fontWeight:700,color:"#2c3e50",fontFamily:'"Inter", sans-serif'},children:["₹",B.toLocaleString()]})}),a.jsxs(t,{sx:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",borderRadius:"6px",p:1,mb:1,display:"flex",alignItems:"center",gap:.5,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},children:[a.jsx(t,{sx:{display:"flex",gap:.2},children:[1,2,3,4,5].map(e=>a.jsx(t,{component:"span",sx:{color:e<=4.5?"#ffd700":"#e0e0e0",fontSize:"0.7rem",filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.1))"},children:"★"},e))}),a.jsx(i,{sx:{fontSize:"0.6rem",color:"#6c757d",fontWeight:500,fontFamily:'"Inter", sans-serif'},children:"(0)"})]})]}),a.jsxs(t,{sx:{position:"absolute",bottom:16,right:16,display:"flex",flexDirection:"column",gap:1,zIndex:5,opacity:D?1:0,transform:D?"translateY(0)":"translateY(20px)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)"},children:[a.jsx(o,{onClick:e=>{e.stopPropagation(),T()},sx:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",color:"#333",width:44,height:44,borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",border:"1px solid rgba(255, 255, 255, 0.2)","&:hover":{background:"rgba(255, 255, 255, 1)",transform:"scale(1.1)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.2)"}},children:a.jsx(s,{sx:{fontSize:20}})}),a.jsx(o,{onClick:e=>{e.stopPropagation(),j?(L(!P),C({open:!0,message:P?"Removed from wishlist":"Added to wishlist",severity:"success"})):R(!0)},sx:{background:P?"linear-gradient(135deg, #E91E63 0%, #C2185B 100%)":"rgba(255, 255, 255, 0.95)",color:P?"white":"#333",width:44,height:44,borderRadius:"12px",boxShadow:P?"0 4px 12px rgba(233, 30, 99, 0.4)":"0 4px 12px rgba(0, 0, 0, 0.15)",border:"1px solid rgba(255, 255, 255, 0.2)","&:hover":{background:P?"linear-gradient(135deg, #C2185B 0%, #AD1457 100%)":"rgba(255, 255, 255, 1)",transform:"scale(1.1)",boxShadow:P?"0 6px 20px rgba(233, 30, 99, 0.6)":"0 6px 20px rgba(0, 0, 0, 0.2)"}},children:P?a.jsx(n,{sx:{fontSize:20}}):a.jsx(d,{sx:{fontSize:20}})}),a.jsx(o,{onClick:e=>{e.stopPropagation(),(async()=>{if(j){I(!0);try{await y(w,1),C({open:!0,message:"Added to cart successfully!",severity:"success"})}catch(e){"LOGIN_REQUIRED"===e.message?R(!0):C({open:!0,message:e.message||"Failed to add to cart",severity:"error"})}finally{I(!1)}}else R(!0)})()},disabled:v,sx:{background:"linear-gradient(135deg, #E91E63 0%, #C2185B 100%)",color:"white",width:44,height:44,borderRadius:"12px",boxShadow:"0 4px 12px rgba(233, 30, 99, 0.4)","&:hover":{background:"linear-gradient(135deg, #C2185B 0%, #AD1457 100%)",transform:"scale(1.1)",boxShadow:"0 6px 20px rgba(233, 30, 99, 0.6)"},"&:disabled":{opacity:.7,transform:"none"}},children:v?a.jsx(t,{sx:{width:20,height:20,border:"2px solid white",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}):a.jsx(l,{sx:{fontSize:20}})})]})]}),a.jsxs(t,{sx:{p:2,pt:1,flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:[a.jsx(i,{sx:{fontSize:{xs:12,sm:14},fontWeight:600,color:"#2c3e50",mb:1.5,lineHeight:1.3,fontFamily:'"Inter", sans-serif',overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",wordBreak:"break-word",textAlign:"center",minHeight:"2.6em",maxHeight:"2.6em"},children:w.name}),a.jsx(c,{variant:"contained",size:"medium",fullWidth:!0,disabled:v,onClick:e=>{e.stopPropagation(),(async()=>{if(j){I(!0);try{await y(w,1),k("/checkout")}catch(e){"LOGIN_REQUIRED"===e.message?R(!0):C({open:!0,message:e.message||"Failed to add to cart",severity:"error"})}finally{I(!1)}}else R(!0)})()},sx:{py:1,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:600,textTransform:"none",fontSize:"0.8rem",borderRadius:"10px",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)",border:"1px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden",mt:1,"&:before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)",transition:"left 0.5s"},"&:hover":{background:"linear-gradient(135deg, #764ba2 0%, #667eea 100%)",boxShadow:"0 6px 25px rgba(102, 126, 234, 0.6)",transform:"translateY(-1px)","&:before":{left:"100%"}},"&:disabled":{background:"linear-gradient(135deg, #e0e0e0 0%, #bdbdbd 100%)",color:"#666",boxShadow:"none",transform:"none"}},children:v?"Processing...":"Buy Now"})]})]}),a.jsx(u,{open:F,onClose:()=>R(!1),onLoginSuccess:e=>{R(!1),S(e)},message:"Please login to add items to cart"}),a.jsx(x,{open:W.open,autoHideDuration:3e3,onClose:()=>C({...W,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:a.jsx(p,{onClose:()=>C({...W,open:!1}),severity:W.severity,sx:{width:"100%",borderRadius:3,fontWeight:500},children:W.message})})]})};export{w as O};
