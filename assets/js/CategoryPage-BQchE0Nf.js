import{a as e,r,j as a,B as t,i as s,aw as n,I as o,ax as i,ay as d,T as l,J as x,ab as c,A as u,az as p,aA as g,aB as h,aC as f,g as b,K as m,ah as j,aD as y,aE as C,aF as S,N as v,aG as w}from"./mui-C7nK-0ZR.js";import{u as E,a as k,b as I,P as F}from"./index-DFhyYAZK.js";import{O as R}from"./OptimizedProductCard-ChcvH2Mm.js";import{c as W,u as M}from"./router-DoZmC-hp.js";import"./vendor-HnKmhvXM.js";import"./utils-fGN9A5xN.js";const O=()=>{const{categoryId:O}=W(),P=M(),A=e("(max-width:768px)"),B=e("(max-width:1024px)"),{addToCart:z,isLoggedIn:L,login:H}=E(),[_,T]=r.useState(null),[D,N]=r.useState([]),[Y,$]=r.useState([]),[q,G]=r.useState([]),[J,K]=r.useState(!0),[U,V]=r.useState(!1),[Z,Q]=r.useState({open:!1,message:"",severity:"success"}),[X,ee]=r.useState(null),[re,ae]=r.useState(!1),[te,se]=r.useState(""),[ne,oe]=r.useState([0,1e5]),[ie,de]=r.useState("newest"),[le,xe]=r.useState("");r.useEffect(()=>{O&&ce()},[O]),r.useEffect(()=>{ue()},[Y,te,ne,ie,le]);const ce=async()=>{try{K(!0);const e=await k.get("/categories"),r=e.data?.categories||[];N(r);const a=r.find(e=>e.category_id===O);T(a),se(O);const t=await k.get(`/products?category_id=${O}`);$(t.data?.products||[])}catch(e){}finally{K(!1)}},ue=async()=>{let e=[...Y];if(le.trim())try{const r=await k.get(`/search?q=${encodeURIComponent(le.trim())}`);r.data?.success&&(e=r.data.products||[])}catch(r){const a=le.toLowerCase().trim();e=e.filter(e=>e.name.toLowerCase().includes(a))}if(te&&te!==O){return void P(`/category/${te}`)}e=e.filter(e=>{const r=parseFloat(e.price)||0;return r>=ne[0]&&r<=ne[1]}),e.sort((e,r)=>{switch(ie){case"price-low":return(parseFloat(e.price)||0)-(parseFloat(r.price)||0);case"price-high":return(parseFloat(r.price)||0)-(parseFloat(e.price)||0);case"name":return e.name.localeCompare(r.name);default:return new Date(r.created_at||0)-new Date(e.created_at||0)}}),G(e)},pe=e=>{const r=e.target.value;r!==O&&P(`/category/${r}`)},ge=(e,r)=>{oe(r)},he=e=>{de(e.target.value)},fe=e=>{xe(e.target.value)},be=()=>{se(O),oe([0,1e5]),de("newest"),xe("")},me=()=>a.jsxs(t,{sx:{p:4,height:"fit-content"},children:[a.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,pb:3,borderBottom:"2px solid rgba(233, 30, 99, 0.1)"},children:[a.jsx(l,{variant:"h5",sx:{fontFamily:'"Inter", sans-serif',fontWeight:700,color:"#2c3e50"},children:"Filters"}),a.jsx(s,{onClick:be,sx:{textTransform:"none",color:"#E91E63",fontSize:"0.9rem",fontWeight:600,px:3,py:1,borderRadius:2,background:"rgba(233, 30, 99, 0.1)","&:hover":{background:"rgba(233, 30, 99, 0.2)",transform:"translateY(-1px)"}},children:"Clear All"})]}),a.jsxs(p,{defaultExpanded:!0,sx:{mb:3,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.05)",border:"1px solid rgba(233, 30, 99, 0.1)",borderRadius:3,"&:before":{display:"none"},"&.Mui-expanded":{margin:"0 0 24px 0"}},children:[a.jsx(g,{expandIcon:a.jsx(h,{sx:{color:"#E91E63"}}),sx:{background:"linear-gradient(135deg, rgba(233, 30, 99, 0.05) 0%, rgba(233, 30, 99, 0.02) 100%)",borderRadius:"12px 12px 0 0","&.Mui-expanded":{minHeight:"auto"}},children:a.jsx(l,{sx:{fontFamily:'"Inter", sans-serif',fontWeight:600,color:"#2c3e50"},children:"Search Products"})}),a.jsx(f,{children:a.jsx(b,{fullWidth:!0,placeholder:"Search by product name...",value:le,onChange:fe,InputProps:{startAdornment:a.jsx(m,{position:"start",children:a.jsx(j,{sx:{color:"#999"}})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2,"& fieldset":{borderColor:"#e0e0e0"},"&:hover fieldset":{borderColor:"#E91E63"},"&.Mui-focused fieldset":{borderColor:"#E91E63"}}}})})]}),a.jsxs(p,{defaultExpanded:!0,sx:{mb:3,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.05)",border:"1px solid rgba(233, 30, 99, 0.1)",borderRadius:3,"&:before":{display:"none"},"&.Mui-expanded":{margin:"0 0 24px 0"}},children:[a.jsx(g,{expandIcon:a.jsx(h,{sx:{color:"#E91E63"}}),sx:{background:"linear-gradient(135deg, rgba(233, 30, 99, 0.05) 0%, rgba(233, 30, 99, 0.02) 100%)",borderRadius:"12px 12px 0 0","&.Mui-expanded":{minHeight:"auto"}},children:a.jsx(l,{sx:{fontFamily:'"Inter", sans-serif',fontWeight:600,color:"#2c3e50"},children:"Category"})}),a.jsx(f,{children:a.jsxs(y,{fullWidth:!0,children:[a.jsx(C,{children:"Select Category"}),a.jsx(S,{value:te,onChange:pe,label:"Select Category",sx:{borderRadius:2,"& .MuiOutlinedInput-notchedOutline":{borderColor:"#e0e0e0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#E91E63"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#E91E63"}},children:D.map(e=>a.jsx(v,{value:e.category_id,children:e.category_name},e.category_id))})]})})]}),a.jsxs(p,{defaultExpanded:!0,sx:{mb:3,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.05)",border:"1px solid rgba(233, 30, 99, 0.1)",borderRadius:3,"&:before":{display:"none"},"&.Mui-expanded":{margin:"0 0 24px 0"}},children:[a.jsx(g,{expandIcon:a.jsx(h,{sx:{color:"#E91E63"}}),sx:{background:"linear-gradient(135deg, rgba(233, 30, 99, 0.05) 0%, rgba(233, 30, 99, 0.02) 100%)",borderRadius:"12px 12px 0 0","&.Mui-expanded":{minHeight:"auto"}},children:a.jsx(l,{sx:{fontFamily:'"Inter", sans-serif',fontWeight:600,color:"#2c3e50"},children:"Price Range"})}),a.jsx(f,{children:a.jsxs(t,{sx:{px:2},children:[a.jsx(w,{value:ne,onChange:ge,valueLabelDisplay:"auto",min:0,max:1e5,step:1e3,sx:{color:"#E91E63","& .MuiSlider-thumb":{"&:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 8px rgba(233, 30, 99, 0.16)"}}}}),a.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[a.jsxs(l,{variant:"body2",sx:{fontFamily:'"Nunito Sans", sans-serif'},children:["₹",ne[0].toLocaleString()]}),a.jsxs(l,{variant:"body2",sx:{fontFamily:'"Nunito Sans", sans-serif'},children:["₹",ne[1].toLocaleString()]})]})]})})]}),a.jsxs(p,{defaultExpanded:!0,sx:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.05)",border:"1px solid rgba(233, 30, 99, 0.1)",borderRadius:3,"&:before":{display:"none"},"&.Mui-expanded":{margin:"0"}},children:[a.jsx(g,{expandIcon:a.jsx(h,{sx:{color:"#E91E63"}}),sx:{background:"linear-gradient(135deg, rgba(233, 30, 99, 0.05) 0%, rgba(233, 30, 99, 0.02) 100%)",borderRadius:"12px 12px 0 0","&.Mui-expanded":{minHeight:"auto"}},children:a.jsx(l,{sx:{fontFamily:'"Inter", sans-serif',fontWeight:600,color:"#2c3e50"},children:"Sort By"})}),a.jsx(f,{children:a.jsxs(y,{fullWidth:!0,children:[a.jsx(C,{children:"Sort By"}),a.jsxs(S,{value:ie,onChange:he,label:"Sort By",sx:{borderRadius:2,"& .MuiOutlinedInput-notchedOutline":{borderColor:"#e0e0e0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#E91E63"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#E91E63"}},children:[a.jsx(v,{value:"newest",children:"Newest First"}),a.jsx(v,{value:"price-low",children:"Price: Low to High"}),a.jsx(v,{value:"price-high",children:"Price: High to Low"}),a.jsx(v,{value:"name",children:"Name: A to Z"})]})]})})]})]});return a.jsxs(t,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",py:{xs:2,md:4}},children:[a.jsxs(t,{sx:{maxWidth:1400,mx:"auto",px:{xs:2,md:4}},children:[a.jsxs(t,{sx:{mb:6,background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)",borderRadius:4,p:4,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",border:"1px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},children:[a.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[a.jsx(s,{startIcon:a.jsx(n,{}),onClick:()=>P("/"),sx:{color:"#333",textTransform:"none",fontWeight:500,px:3,py:1.5,borderRadius:3,background:"rgba(233, 30, 99, 0.1)","&:hover":{background:"rgba(233, 30, 99, 0.2)",transform:"translateY(-1px)"}},children:"Back to Home"}),A&&a.jsxs(t,{sx:{display:"flex",gap:1},children:[a.jsx(o,{onClick:()=>ae(!0),sx:{color:"#333",background:"rgba(233, 30, 99, 0.1)","&:hover":{background:"rgba(233, 30, 99, 0.2)",transform:"scale(1.1)"}},children:a.jsx(i,{})}),a.jsx(o,{sx:{color:"#333",background:"rgba(233, 30, 99, 0.1)","&:hover":{background:"rgba(233, 30, 99, 0.2)",transform:"scale(1.1)"}},children:a.jsx(d,{})})]})]}),a.jsx(l,{variant:"h4",sx:{fontWeight:700,color:"#2c3e50",fontFamily:'"Inter", sans-serif',fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},mb:2,textAlign:"center"},children:_?.category_name||"Category Products"}),a.jsxs(t,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,flexWrap:"wrap"},children:[a.jsxs(l,{variant:"h6",sx:{color:"#6c757d",fontFamily:'"Inter", sans-serif',fontWeight:500},children:[q.length," product",1!==q.length?"s":""," found"]}),a.jsxs(t,{sx:{display:"flex",gap:3,alignItems:"center"},children:[a.jsx(t,{sx:{background:"linear-gradient(135deg, #E91E63 0%, #C2185B 100%)",color:"white",px:2,py:1,borderRadius:2,fontSize:"0.8rem",fontWeight:600},children:"Best Prices"}),a.jsx(t,{sx:{background:"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)",color:"white",px:2,py:1,borderRadius:2,fontSize:"0.8rem",fontWeight:600},children:"Free Shipping"})]})]})]}),a.jsxs(t,{sx:{display:"flex",gap:{xs:0,md:4},alignItems:"flex-start"},children:[!A&&a.jsx(t,{sx:{width:{md:320,lg:360},position:"sticky",top:20,flexShrink:0},children:a.jsx(t,{sx:{background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)",borderRadius:4,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",border:"1px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)",overflow:"hidden"},children:me()})}),a.jsx(t,{sx:{flex:1,minWidth:0,background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)",borderRadius:4,p:4,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",border:"1px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},children:J?a.jsx(t,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(auto-fit, minmax(200px, 1fr))",sm:"repeat(auto-fit, minmax(220px, 1fr))",md:"repeat(auto-fit, minmax(240px, 1fr))",lg:"repeat(auto-fit, minmax(260px, 1fr))"},gap:2,justifyContent:"center",alignItems:"start"},children:Array.from({length:8}).map((e,r)=>a.jsx(t,{sx:{width:"100%",maxWidth:"100%",justifySelf:"center"},children:a.jsx(F,{})},r))}):q.length>0?a.jsxs(a.Fragment,{children:[a.jsx(t,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(auto-fit, minmax(200px, 1fr))",sm:"repeat(auto-fit, minmax(220px, 1fr))",md:"repeat(auto-fit, minmax(240px, 1fr))",lg:"repeat(auto-fit, minmax(260px, 1fr))"},gap:2,justifyContent:"center",alignItems:"start"},children:q.map(e=>a.jsx(t,{sx:{width:"100%",maxWidth:"100%",justifySelf:"center"},children:a.jsx(R,{product:e})},e.product_id))}),q.length>=12&&a.jsx(t,{sx:{textAlign:"center",mt:6,pt:4,borderTop:"1px solid rgba(0, 0, 0, 0.1)"},children:a.jsx(s,{variant:"outlined",size:"large",sx:{px:6,py:2,borderRadius:3,borderColor:"#E91E63",color:"#E91E63",fontWeight:600,fontSize:"1rem","&:hover":{borderColor:"#C2185B",backgroundColor:"rgba(233, 30, 99, 0.04)",transform:"translateY(-2px)"}},children:"Load More Products"})})]}):a.jsxs(t,{sx:{textAlign:"center",py:12,color:"text.secondary"},children:[a.jsx(t,{sx:{width:120,height:120,mx:"auto",mb:4,background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"3rem",color:"#6c757d"},children:"🔍"}),a.jsx(l,{variant:"h5",sx:{mb:2,fontFamily:'"Inter", sans-serif',fontWeight:600,color:"#2c3e50"},children:"No products found"}),a.jsx(l,{variant:"body1",sx:{fontFamily:'"Inter", sans-serif',color:"#6c757d",mb:4},children:"Try adjusting your filters or check back later!"}),a.jsx(s,{variant:"contained",onClick:be,sx:{background:"linear-gradient(135deg, #E91E63 0%, #C2185B 100%)",px:4,py:2,borderRadius:3,fontWeight:600,"&:hover":{background:"linear-gradient(135deg, #C2185B 0%, #AD1457 100%)",transform:"translateY(-2px)"}},children:"Clear All Filters"})]})})]})]}),a.jsx(x,{anchor:"left",open:re,onClose:()=>ae(!1),PaperProps:{sx:{width:B?320:380}},children:me()}),a.jsx(I,{open:U,onClose:()=>V(!1),onLoginSuccess:e=>{V(!1),H(e)},message:"Please login to add items to cart"}),a.jsx(c,{open:Z.open,autoHideDuration:3e3,onClose:()=>Q({...Z,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:a.jsx(u,{onClose:()=>Q({...Z,open:!1}),severity:Z.severity,sx:{width:"100%",borderRadius:3,fontWeight:500},children:Z.message})})]})};export{O as default};
