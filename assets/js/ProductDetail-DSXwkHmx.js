import{a as e,j as i,B as r,h as t,r as n,T as a,I as s,ai as o,aj as l,e as c,u as d,ak as x,L as f,aa as h,al as g,am as m,t as u,l as p,an as b,ao as j,ap as y,aq as v,ar as S,as as k,at as w,au as F,D as z,k as I,C as _,n as C,b as W,v as A,a8 as R,A as P,av as M}from"./mui-B4o7H9uu.js";import{u as B,a as L,b as E,I as H,L as $,c as D,g as T,d as O}from"./index-BaT9TOBX.js";import{C as N,P as Y}from"./CarouselItem-C9wPJppA.js";import{c as V,a as q,u as U}from"./router-BDKlY_bR.js";import"./vendor-HnKmhvXM.js";import"./utils-yHh8wlql.js";const X=()=>{const n=e("(max-width:768px)");return i.jsx(r,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",py:{xs:2,md:4}},children:i.jsxs(r,{sx:{maxWidth:1400,mx:"auto",px:{xs:2,md:4}},children:[i.jsx(r,{sx:{mb:4},children:i.jsx(t,{variant:"text",width:"40%",height:24})}),i.jsxs(r,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:4,alignItems:"flex-start"},children:[i.jsx(r,{sx:{flex:{xs:"1",md:"0 0 45%"},maxWidth:{xs:"100%",md:"45%"}},children:i.jsxs(r,{sx:{borderRadius:4,overflow:"hidden",background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)",boxShadow:"0 20px 60px rgba(0,0,0,0.1)"},children:[i.jsx(t,{variant:"rectangular",width:"100%",height:n?350:500,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(r,{sx:{display:"flex",gap:2,p:3,overflowX:"auto",background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)"},children:Array.from({length:4}).map((e,r)=>i.jsx(t,{variant:"rectangular",width:90,height:90,sx:{borderRadius:3,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}},r))})]})}),i.jsx(r,{sx:{flex:{xs:"1",md:"0 0 55%"},maxWidth:{xs:"100%",md:"55%"}},children:i.jsxs(r,{sx:{bgcolor:"#FFFFFF",borderRadius:4,p:5,boxShadow:"0 20px 60px rgba(0,0,0,0.1)",background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)"},children:[i.jsx(t,{variant:"text",width:"90%",height:60,sx:{mb:3,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[i.jsx(t,{variant:"rectangular",width:100,height:20,sx:{borderRadius:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(t,{variant:"text",width:80,height:20,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),i.jsxs(r,{sx:{mb:4},children:[i.jsx(t,{variant:"text",width:"40%",height:50,sx:{mb:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(t,{variant:"rectangular",width:120,height:30,sx:{borderRadius:2,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:3},children:[i.jsx(t,{variant:"circular",width:8,height:8,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(t,{variant:"text",width:100,height:20,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),i.jsxs(r,{sx:{mb:3},children:[i.jsx(t,{variant:"text",width:80,height:24,sx:{mb:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[i.jsx(t,{variant:"circular",width:40,height:40,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(t,{variant:"text",width:40,height:24,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(t,{variant:"circular",width:40,height:40,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]})]}),i.jsxs(r,{sx:{display:"flex",gap:2,mb:3},children:[i.jsx(t,{variant:"rectangular",width:"70%",height:56,sx:{borderRadius:2,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(t,{variant:"circular",width:56,height:56,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(t,{variant:"circular",width:56,height:56,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),i.jsx(r,{sx:{mb:3},children:Array.from({length:3}).map((e,n)=>i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[i.jsx(t,{variant:"circular",width:20,height:20,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(t,{variant:"text",width:"60%",height:20,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]},n))})]})})]}),i.jsx(r,{sx:{mt:4},children:i.jsxs(r,{sx:{borderRadius:4,boxShadow:"0px 8px 32px rgba(75, 111, 68, 0.08)",border:"1px solid rgba(75, 111, 68, 0.05)",p:4,bgcolor:"#ffffff"},children:[i.jsx(t,{variant:"text",width:"40%",height:40,sx:{mb:3,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),Array.from({length:4}).map((e,r)=>i.jsx(t,{variant:"text",width:3===r?"60%":"100%",height:20,sx:{mb:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}},r))]})}),i.jsx(r,{sx:{mt:4},children:i.jsxs(r,{sx:{borderRadius:4,boxShadow:"0 20px 60px rgba(0,0,0,0.1)",background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)",p:4},children:[i.jsx(t,{variant:"text",width:"30%",height:40,sx:{mb:3,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:4,mb:4,p:3,background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",borderRadius:3},children:[i.jsxs(r,{sx:{textAlign:"center"},children:[i.jsx(t,{variant:"text",width:60,height:60,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(t,{variant:"rectangular",width:100,height:20,sx:{mt:1,borderRadius:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),i.jsx(r,{sx:{flex:1},children:Array.from({length:5}).map((e,n)=>i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[i.jsx(t,{variant:"text",width:20,height:20,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(t,{variant:"rectangular",width:"100%",height:8,sx:{borderRadius:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]},n))})]}),Array.from({length:3}).map((e,n)=>i.jsxs(r,{sx:{p:3,border:"1px solid #e9ecef",borderRadius:3,background:"#ffffff",mb:2},children:[i.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[i.jsxs(r,{children:[i.jsx(t,{variant:"text",width:120,height:20,sx:{mb:.5,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(t,{variant:"rectangular",width:80,height:16,sx:{borderRadius:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),i.jsx(t,{variant:"text",width:80,height:16,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),i.jsx(t,{variant:"text",width:"100%",height:20,sx:{mb:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(t,{variant:"text",width:"80%",height:20,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]},n))]})})]})})},K=({title:t,subtitle:d,products:x=[],viewAllLink:f,loading:h=!1,maxWidth:g=1350})=>{const[m,u]=n.useState({canScrollLeft:!1,canScrollRight:!1}),p=n.useRef(null),b=e("(max-width:768px)"),j=e("(max-width:1024px)"),y=e=>{const i=p.current;if(!i)return;const r=.8*i.clientWidth,t="left"===e?i.scrollLeft-r:i.scrollLeft+r;i.scrollTo({left:t,behavior:"smooth"})},v=()=>b?"240px":j?"280px":"300px";return i.jsxs(r,{sx:{width:"100%",maxWidth:g,mx:"auto",mt:6,px:{xs:2,md:4},position:"relative"},children:[i.jsxs(r,{sx:{textAlign:"center",mb:4},children:[i.jsx(a,{variant:"h4",sx:{fontWeight:600,color:"#b88a44",fontFamily:'"Poppins", sans-serif',fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},mb:1},children:t}),d&&i.jsx(a,{variant:"h6",sx:{fontWeight:400,color:"#333",fontFamily:'"Poppins", sans-serif',fontSize:{xs:"1rem",sm:"1.2rem"},fontStyle:"italic"},children:d})]}),i.jsxs(r,{sx:{position:"relative"},children:[m.canScrollLeft&&i.jsx(s,{onClick:()=>y("left"),sx:{position:"absolute",left:-20,top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(255, 255, 255, 0.9)",color:"#333",width:40,height:40,zIndex:10,boxShadow:"0 2px 8px rgba(0,0,0,0.1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)",transform:"translateY(-50%) scale(1.1)"}},children:i.jsx(o,{sx:{fontSize:20}})}),m.canScrollRight&&i.jsx(s,{onClick:()=>y("right"),sx:{position:"absolute",right:-20,top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(255, 255, 255, 0.9)",color:"#333",width:40,height:40,zIndex:10,boxShadow:"0 2px 8px rgba(0,0,0,0.1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)",transform:"translateY(-50%) scale(1.1)"}},children:i.jsx(l,{sx:{fontSize:20}})}),i.jsx(r,{ref:p,onScroll:()=>{const e=p.current;if(!e)return;const{scrollLeft:i,scrollWidth:r,clientWidth:t}=e;u({canScrollLeft:i>0,canScrollRight:i<r-t-1})},sx:{display:"flex",gap:{xs:1.5,sm:2},overflowX:"auto",pb:2,scrollbarWidth:"none",msOverflowStyle:"none","&::-webkit-scrollbar":{display:"none"},scrollBehavior:"smooth"},children:h?(()=>{const e=b?2:j?3:4;return Array.from({length:e}).map((e,t)=>i.jsx(r,{sx:{width:v(),maxWidth:v(),flexShrink:0},children:i.jsx(Y,{})},t))})():x.map(e=>i.jsx(r,{sx:{width:v(),maxWidth:v(),flexShrink:0},children:i.jsx(N,{product:e})},e.product_id||e.id))})]}),f&&i.jsx(r,{sx:{textAlign:"center",mt:4},children:i.jsx(c,{variant:"contained",href:f,sx:{"&.MuiButton-contained":{backgroundColor:"rgb(75, 111, 68)",color:"#ffffff"},fontFamily:'"Poppins", sans-serif',fontWeight:500,fontSize:"14px",textTransform:"uppercase",px:4,py:1.5,borderRadius:"4px","&:hover":{backgroundColor:"rgb(179, 131, 39)"}},children:"VIEW ALL"})})]})},Q=e=>null==e?"":String(e).trim(),J=e=>{if(!e)return"";const i=e.trim();return i?i.split("?")[0]:""},Z=e=>{if(!e)return null;const i=e.trim();return i?i.startsWith("http")?i:i.startsWith("/")?`${H}${i}`:`${H}/${i}`:null},G=(e={})=>Object.keys(e).sort().map(i=>`${Q(i)}:${Q(e[i])}`).join("|"),ee=(e,i)=>Array.isArray(e)?e.map((e,r)=>{const t=e?.options&&"object"==typeof e.options?e.options:{},n=Object.entries(t).reduce((e,[i,r])=>{const t=Q(i),n=Q(r);return t&&n&&(e[t]=n),e},{});if(0===Object.keys(n).length)return null;const a=e=>{if(null==e||""===e)return null;const i=Number(e);return Number.isFinite(i)?i:null},s=e=>{const i=a(e);return null===i?null:Math.trunc(i)},o=a(e?.price),l=a(e?.sale_price??e?.salePrice),c=s(e?.stock),d=s(e?.image_version??e?.imageVersion);let x=null;const f=Q(e?.image_path??e?.imagePath??e?.image);return f&&(x=Z(f)),!x&&null!==d&&i&&(x=O(i,`v${d}`)),{id:e?.id||e?.variant_item_id||`${G(n)}_${r}`,options:n,price:o,sale_price:l,stock:c,sku:Q(e?.sku),image_url:x,image_version:d}}).filter(Boolean):[],ie=(e,i)=>{if(!e)return{options:[],items:[]};let r=e;if("string"==typeof e)try{r=JSON.parse(e)}catch(l){r=null}if(!r)return{options:[],items:[]};let t=[],n=[];Array.isArray(r)?t=r:"object"==typeof r&&(Array.isArray(r.options)&&(t=r.options),Array.isArray(r.items)?n=r.items:Array.isArray(r.variantItems)?n=r.variantItems:Array.isArray(r.variant_items)&&(n=r.variant_items));const a=(s=t,Array.isArray(s)?s.map(e=>{const i=Q(e?.name);if(!i)return null;const r=Array.isArray(e?.values)?e.values:e?.values?[e.values]:[],t=[];r.forEach(e=>{if("string"==typeof e&&e.includes(","))e.split(",").forEach(e=>{const i=Q(e);i&&t.push(i)});else{const i=Q(e);i&&t.push(i)}});const n=Array.from(new Set(t));return 0===n.length?null:{name:i,values:n}}).filter(Boolean):[]);var s;let o=ee(n,i);if(0===o.length&&Array.isArray(r)&&r.length>0){const e=r.map(e=>e?.items||e?.variant_items||e?.variantItems).filter(Array.isArray).flat();o=ee(e,i)}return{options:a,items:o}},re=()=>{const{productId:t}=V(),O=q();U();const N=B(),Y=d();e(Y.breakpoints.down("md"));const{addToCart:G,isLoggedIn:ee,login:re}=L(),[te,ne]=n.useState(null),[ae,se]=n.useState(!0),[oe,le]=n.useState(null),[ce,de]=n.useState(0),[xe,fe]=n.useState({}),[he,ge]=n.useState(1),[me,ue]=n.useState(!1),[pe,be]=n.useState(!1),[je,ye]=n.useState({open:!1,message:"",severity:"success"}),[ve,Se]=n.useState(!1),[ke,we]=n.useState(!1),[Fe,ze]=n.useState([]),[Ie,_e]=n.useState(null),[Ce,We]=n.useState(!1),[Ae,Re]=n.useState(!1),[Pe,Me]=n.useState({customer_name:"",customer_email:"",rating:5,review_text:""}),[Be,Le]=n.useState([]),[Ee,He]=n.useState(!1),[$e,De]=n.useState(11),[Te,Oe]=n.useState(!1),[Ne,Ye]=n.useState(!1),[Ve,qe]=n.useState(!1),[Ue,Xe]=n.useState(!1),[Ke,Qe]=n.useState(null),Je=n.useMemo(()=>Array.isArray(te?.variantItems)&&te.variantItems.length>0,[te?.variantItems]),Ze=n.useMemo(()=>((e=[],i={})=>{if(!Array.isArray(e)||0===e.length)return null;const r=Object.entries(i).filter(([e,i])=>Q(i));return 0===r.length?null:e.find(e=>!!e?.options&&r.every(([i,r])=>{const t=e.options?.[i];return Q(t).toLowerCase()===Q(r).toLowerCase()}))||null})(te?.variantItems,xe),[te?.variantItems,xe]),{displayPrice:Ge,displayOriginalPrice:ei,displayStock:ii,isVariantInStock:ri,displaySku:ti,combinationAvailable:ni}=n.useMemo(()=>{const e=e=>{if(null==e||""===e)return null;const i=Number(e);return Number.isFinite(i)?i:null},i=e(te?.base_price??te?.original_price),r=e(te?.price??i),t=e(Ze?.price),n=e(Ze?.sale_price??Ze?.salePrice),a=e(Ze?.stock),s=Number.isFinite(a)?Math.trunc(a):null,o=e(te?.stock),l=Number.isFinite(o)?Math.trunc(o):null,c=!Je||Boolean(Ze),d=n??(null!==t?t:r??i??0);return{displayPrice:d??0,displayOriginalPrice:(t??i??r??0)||d||0,displayStock:c?null!==s?s:l:null,isVariantInStock:!!c&&(null!==s?s>0:Boolean(te?.in_stock)),displaySku:Q(Ze?.sku)||Q(te?.sku),combinationAvailable:c}},[te,Ze,Je]),ai=n.useMemo(()=>Z(te?.measurement_image),[te?.measurement_image]),si=n.useMemo(()=>{if(Ke?.id)return Ke.id;if(te?.category_id)return te.category_id;if(te?.categoryId)return te.categoryId;const e=Array.isArray(te?.categories)?te.categories:[];if(e.length>0){const i=e.find(e=>e?.category_id||e?.id)||e[0];return i?.category_id||i?.id||null}return null},[Ke?.id,te?.category_id,te?.categoryId,te?.categories]),oi=n.useMemo(()=>ni?"number"==typeof ii&&ii>0?ii:"number"==typeof te?.stock&&te.stock>0?te.stock:10:0,[ni,ii,te?.stock]);n.useEffect(()=>{if(ne(null),le(null),se(!0),de(0),fe({}),ge(1),ze([]),_e(null),Le([]),Qe(null),t){const e=setTimeout(()=>{li().catch(e=>{le("Failed to load product. Please try again."),se(!1)})},0);return setTimeout(()=>{ci().catch(e=>{})},500),()=>{clearTimeout(e)}}le("Invalid product ID"),se(!1)},[t,O.pathname,O.key]),n.useEffect(()=>{let e=!0;return(async()=>{if(te?.product_id){e&&Qe(null);try{const r=await E.get("/categories"),t=Array.isArray(r.data?.categories)?r.data.categories:[];if(0===t.length)return void(e&&Qe(null));const n=String(te.product_id),a=[...t.filter(e=>e?.category_name&&e.category_name.toLowerCase().includes("collection")),...t.filter(e=>!e?.category_name||!e.category_name.toLowerCase().includes("collection"))];for(const s of a){if(!s?.category_id)continue;const r=100;let t=1;for(;;)try{const i=(await E.get("/products",{params:{category_id:s.category_id,page:t,limit:r}})).data||{},a=Array.isArray(i.products)?i.products:[];if(a.some(e=>String(e.product_id)===n))return void(e&&Qe({id:s.category_id,name:s.category_name}));const o=Number(i.total_pages)||0;if(!o||t>=o||0===a.length)break;t+=1}catch(i){break}}e&&Qe(null)}catch(r){e&&Qe(null)}}else e&&Qe(null)})(),()=>{e=!1}},[te?.product_id]),n.useEffect(()=>{let e=!0;return(async()=>{if(te?.product_id&&si){e&&(He(!0),Le([]));try{const i=await E.get("/products",{params:{category_id:si,limit:12}}),r=Array.isArray(i.data?.products)?i.data.products:[],t=String(te.product_id),n=r.filter(e=>e&&String(e.product_id)!==t);e&&Le(n)}catch(i){e&&Le([])}finally{e&&He(!1)}}else e&&(Le([]),He(!1))})(),()=>{e=!1}},[te?.product_id,si]),n.useEffect(()=>{const e=[2,5,8,11,15,20],i=Math.floor(Math.random()*e.length);De(e[i]);const r=setInterval(()=>{const i=Math.floor(Math.random()*e.length);De(e[i])},7e3);return()=>clearInterval(r)},[]),n.useEffect(()=>{if(!te?.images||0===te.images.length)return;if(!Ze?.image_url)return;const e=te.images.map(e=>J(e)),i=J(Ze.image_url);if(!i)return;const r=e.findIndex(e=>e===i);-1!==r&&r!==ce&&de(r)},[te?.images,Ze?.image_url,ce]),n.useEffect(()=>{ge(ni?e=>{const i=Math.max(1,e||1);return oi&&i>oi?Math.max(1,oi):i}:1)},[ni,oi,Ze]);const li=async()=>{try{if(se(!0),le(null),!t)return le("Product ID is required"),void se(!1);const e=await E.get(`/product/${t}`);if(e.data?.success&&e.data?.product){const i=e.data.product,{options:r,items:t}=ie(i.variants,i.product_id),n=Array.isArray(i.images)?i.images:[];let a=null,s=null;if(n.length>0){let e=n[0];if(e&&e.includes("/uploads/")){const i=e.substring(e.indexOf("/uploads/"));e=`${H}${i}`}const i=e.match(/_v(\d+)\.png$/);i&&(a=parseInt(i[1],10),s=e)}const o=await(async e=>await T(e))(i.product_id);let l=[];if(s){l.push(s);const e=s.split("/").pop();o.forEach(i=>{i.split("/").pop()!==e&&l.push(i)})}else l=[...o];0===l.length&&i.image&&(l=[Z(i.image)]);const c=t.map(e=>e.image_url).filter(Boolean);l=((e=[],i=[])=>{const r=new Set,t=[];return[...e,...i].forEach(e=>{if(!e)return;const i=J(e);i&&(r.has(i)||(r.add(i),t.push(e)))}),t})(l,c);const d={...i,images:l,mainImage:l[0]||Z(i.image),original_price:i.base_price??i.original_price??i.price??0,variants:r,variantOptions:r,variantItems:t};if(ne(d),t.length>0)fe({...t[0].options});else if(r.length>0){const e={};r.forEach(i=>{Array.isArray(i.values)&&i.values.length>0&&(e[i.name]=i.values[0])}),fe(e)}else fe({})}else le("Product not found")}catch(e){le(e.response?.data?.error||e.message||"Failed to load product")}finally{se(!1)}},ci=async()=>{try{We(!0);const[e,i]=await Promise.all([E.get(`/product/${t}/reviews`),E.get(`/product/${t}/reviews/summary`)]);e.data?.success&&ze(e.data.reviews||[]),i.data?.success&&_e(i.data.summary)}catch(e){}finally{We(!1)}},di=n.useMemo(()=>{if(ei&&Ge&&ei>Ge){const e=(ei-Ge)/ei*100;return Math.round(e)}return 0},[ei,Ge]),xi=ni&&ri?"#00C851":"#b38327",fi=ni?ri?"number"==typeof ii?`${ii} in stock`:"In stock":"Out of stock":"Variant combination unavailable",hi=ni&&ri,gi=ni&&ri;return ae?i.jsx(X,{}):oe||!te?i.jsxs(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",flexDirection:"column",gap:2},children:[i.jsx(a,{variant:"h5",sx:{color:"#4b6f44",fontWeight:600},children:oe||"Product not found"}),i.jsx(c,{variant:"contained",onClick:()=>N("/",{},{reloadOn:["/"]}),sx:{background:"#4b6f44","&:hover":{background:"linear-gradient(135deg, #16213E 0%, #0F0F1E 100%)"}},children:"Back to Home"})]}):i.jsxs(r,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",py:{xs:2,md:4}},children:[i.jsxs(r,{sx:{maxWidth:1400,mx:"auto",px:{xs:2,md:4}},children:[i.jsx(r,{sx:{mb:4},children:i.jsxs(x,{separator:"›",sx:{"& .MuiBreadcrumbs-separator":{color:"#6c757d",fontSize:"1.2rem",fontWeight:600}},children:[i.jsx(f,{underline:"hover",color:"#6c757d",href:"/",onClick:e=>{e.preventDefault(),N("/",{},{reloadOn:["/"]})},sx:{cursor:"pointer",fontSize:"0.95rem",fontWeight:500,transition:"color 0.3s ease","&:hover":{color:"#e74c3c"}},children:"Home"}),Ke&&i.jsx(f,{underline:"hover",color:"#6c757d",href:`/category/${Ke.id}`,onClick:e=>{e.preventDefault(),N(`/category/${Ke.id}`,{},{reloadOn:[/^\/category\//]})},sx:{cursor:"pointer",fontSize:"0.95rem",fontWeight:500,transition:"color 0.3s ease",textTransform:"capitalize","&:hover":{color:"#e74c3c"}},children:Ke.name}),i.jsx(a,{color:"#2c3e50",sx:{fontWeight:600,fontSize:"0.95rem"},children:te.name})]})}),i.jsxs(r,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:4,alignItems:"flex-start"},children:[i.jsx(r,{sx:{flex:{xs:"1",md:"0 0 60%"},maxWidth:{xs:"100%",md:"60%"}},children:i.jsxs(r,{sx:{position:"relative",overflow:"hidden"},children:[i.jsxs(r,{sx:{position:"relative"},children:[di>0&&i.jsxs(r,{sx:{position:"absolute",top:20,left:20,background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)",color:"white",px:2,py:1,borderRadius:3,fontSize:"0.9rem",fontWeight:700,fontFamily:"Inter, sans-serif",zIndex:2,boxShadow:"0 4px 15px rgba(238, 90, 36, 0.3)"},children:["SALE ",di,"%"]}),i.jsx(r,{sx:{position:"relative",overflow:"hidden"},children:i.jsx($,{src:te.images[ce]||te.mainImage,alt:te.name,height:900,placeholder:"Loading product image...",sx:{width:"100%",height:{xs:400,md:900},objectFit:"cover",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}}})}),te.images.length>1&&i.jsxs(i.Fragment,{children:[i.jsx(s,{onClick:()=>de(e=>0===e?te.images.length-1:e-1),sx:{position:"absolute",left:20,top:"50%",transform:"translateY(-50%)",bgcolor:"rgba(255, 255, 255, 0.95)",color:"#2c3e50",width:48,height:48,backdropFilter:"blur(10px)",boxShadow:"0 4px 20px rgba(0,0,0,0.1)","&:hover":{bgcolor:"#ffffff",transform:"translateY(-50%) scale(1.1)",boxShadow:"0 6px 25px rgba(0,0,0,0.15)"}},children:i.jsx(o,{sx:{fontSize:20}})}),i.jsx(s,{onClick:()=>de(e=>e===te.images.length-1?0:e+1),sx:{position:"absolute",right:20,top:"50%",transform:"translateY(-50%)",bgcolor:"rgba(255, 255, 255, 0.95)",color:"#2c3e50",width:48,height:48,backdropFilter:"blur(10px)",boxShadow:"0 4px 20px rgba(0,0,0,0.1)","&:hover":{bgcolor:"#ffffff",transform:"translateY(-50%) scale(1.1)",boxShadow:"0 6px 25px rgba(0,0,0,0.15)"}},children:i.jsx(l,{sx:{fontSize:20}})})]})]}),te.images.length>1&&i.jsx(r,{sx:{display:"flex",gap:2,p:3,overflowX:"auto",background:"transparent","&::-webkit-scrollbar":{height:6},"&::-webkit-scrollbar-thumb":{bgcolor:"#dee2e6",borderRadius:3,"&:hover":{bgcolor:"#adb5bd"}}},children:te.images.map((e,t)=>i.jsx(r,{onClick:()=>de(t),sx:{width:100,minWidth:30,height:100,flexShrink:0,overflow:"hidden",cursor:"pointer",border:ce===t?"3px solid #e74c3c":"3px solid #e9ecef",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:ce===t?"0 8px 25px rgba(231, 76, 60, 0.3)":"0 2px 10px rgba(0,0,0,0.1)","&:hover":{borderColor:"#e74c3c",transform:"scale(1.05)",boxShadow:"0 8px 25px rgba(231, 76, 60, 0.3)"}},children:i.jsx($,{src:e,alt:`${te.name} ${t+1}`,height:70,sx:{width:"100%",height:"100%",objectFit:"cover"},placeholder:"Loading..."})},t))})]})}),i.jsx(r,{sx:{flex:{xs:"1",md:"0 0 40%"},maxWidth:{xs:"100%",md:"40%"}},children:i.jsxs(r,{sx:{p:1,height:"fit-content"},children:[i.jsx(a,{variant:"h3",sx:{fontWeight:700,color:"#2c3e50",mb:1,fontFamily:"Inter, sans-serif",lineHeight:1.3,fontSize:{xs:"1.5rem",md:"1.8rem"}},children:te.name}),i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,mb:1.5},children:[i.jsx(r,{sx:{display:"flex",gap:.5},children:[...Array(5)].map((e,r)=>i.jsx(h,{sx:{fontSize:20,color:r<4?"#ffc107":"#e0e0e0"}},r))}),i.jsx(a,{sx:{color:"#6c757d",fontSize:"0.95rem",fontWeight:500},children:"(0 reviews)"}),i.jsx(c,{variant:"outlined",size:"small",onClick:()=>Re(!0),sx:{borderColor:"#e74c3c",color:"#e74c3c",fontSize:"0.8rem",px:2,py:.5,"&:hover":{borderColor:"#c0392b",backgroundColor:"rgba(231, 76, 60, 0.04)"}},children:"Write a review"})]}),i.jsxs(r,{sx:{mb:2},children:[i.jsxs(r,{sx:{display:"flex",alignItems:"baseline",gap:2,mb:.5},children:[i.jsxs(a,{variant:"h3",sx:{color:"#000000",fontWeight:700,fontFamily:"Inter, sans-serif",fontSize:{xs:"1.5rem",md:"1.8rem"}},children:["₹",Number(Ge||0).toLocaleString()]}),ei&&ei>Ge&&i.jsxs(a,{variant:"h5",sx:{color:"#6c757d",textDecoration:"line-through",fontWeight:500,fontSize:{xs:"1.2rem",md:"1.4rem"}},children:["₹",Number(ei).toLocaleString()]})]}),di>0&&i.jsx(r,{sx:{display:"inline-flex",alignItems:"center",gap:1,background:"linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)",color:"white",px:2,py:1,borderRadius:2,fontSize:"0.9rem",fontWeight:600,fontFamily:"Inter, sans-serif"},children:i.jsxs(a,{sx:{fontSize:"0.9rem",fontWeight:600},children:["Save ",di,"% (₹",Number(ei-Ge||0).toLocaleString(),")"]})})]}),ai&&i.jsx(c,{onClick:()=>Xe(!0),startIcon:i.jsx(g,{sx:{fontSize:20}}),disableRipple:!0,sx:{alignSelf:"flex-start",px:0,minWidth:0,mb:1,gap:1,textTransform:"none",fontWeight:600,color:"#2c3e50",textDecoration:"underline",textDecorationThickness:"2px",textUnderlineOffset:"4px",transition:"none","& .MuiButton-startIcon":{marginLeft:0,marginRight:.75,color:"#2c3e50",transition:"none"},"&:hover":{backgroundColor:"transparent",color:"#2c3e50"}},children:"Size Chart"}),i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[i.jsx(r,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:xi}}),i.jsx(a,{variant:"body1",sx:{color:xi,fontWeight:600},children:fi})]}),ti&&i.jsxs(a,{variant:"body2",sx:{color:"#6c757d",mb:1},children:["SKU: ",ti]}),i.jsxs(r,{sx:{display:"flex",gap:2,mb:2,alignItems:"center"},children:[i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:.5},children:[i.jsx(m,{sx:{color:"#00C851",fontSize:16}}),i.jsx(a,{variant:"body2",sx:{color:"#4b6f44",fontWeight:500,fontSize:"0.85rem"},children:"Free Shipping"})]}),i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:.5},children:[i.jsx(m,{sx:{color:"#00C851",fontSize:16}}),i.jsx(a,{variant:"body2",sx:{color:"#4b6f44",fontWeight:500,fontSize:"0.85rem"},children:"Taxes Included"})]})]}),te.variants&&te.variants.length>0&&i.jsxs(r,{sx:{mb:2},children:[te.variants.map((e,t)=>{const n=[];return e.values.forEach(e=>{if("string"==typeof e&&e.includes(",")){const i=e.split(",").map(e=>e.trim()).filter(e=>e);n.push(...i)}else n.push(e)}),i.jsxs(r,{sx:{mb:1.5},children:[i.jsxs(a,{variant:"subtitle1",sx:{fontWeight:600,color:"#4b6f44",mb:.5,textTransform:"capitalize",fontSize:"0.9rem"},children:[e.name,":"]}),i.jsx(r,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:n.map((r,t)=>i.jsx(u,{label:r,onClick:()=>fe(i=>({...i,[e.name]:r})),variant:xe[e.name]===r?"filled":"outlined",sx:{bgcolor:xe[e.name]===r?"#E94560":"transparent",color:xe[e.name]===r?"#FFFFFF":"#4b6f44",borderColor:"#E94560",fontWeight:500,"&:hover":{bgcolor:xe[e.name]===r?"#C73650":"rgba(233, 69, 96, 0.1)"}}},`${r}-${t}`))})]},t)}),Je&&!ni&&i.jsx(a,{variant:"body2",sx:{color:"#e74c3c",mt:1},children:"This variant combination is currently unavailable."})]}),i.jsxs(r,{sx:{mb:2},children:[i.jsx(a,{variant:"body1",sx:{fontWeight:500,color:"rgb(75, 111, 68)",mb:1.5,fontSize:"0.95rem",fontFamily:'"Poppins", sans-serif'},children:"Need Customisation? / Made-to-Order"}),i.jsx(c,{variant:"contained",onClick:()=>{const e=`Hi! I'm interested in customising/ordering: ${te.name}`,i=`https://wa.me/8302129352?text=${encodeURIComponent(e)}`;window.open(i,"_blank")},sx:{py:1,px:2,bgcolor:"rgb(75, 111, 68)",color:"#FFFFFF",fontWeight:600,fontSize:"0.85rem",fontFamily:'"Poppins", sans-serif',textTransform:"none",boxShadow:"0 4px 12px rgba(75, 111, 68, 0.3)","&:hover":{bgcolor:"rgb(60, 89, 54)",boxShadow:"0 6px 16px rgba(75, 111, 68, 0.4)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},startIcon:i.jsx(r,{component:"svg",sx:{width:24,height:24},viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),children:"Contact on WhatsApp"})]}),i.jsxs(r,{sx:{mb:2},children:[i.jsx(a,{variant:"subtitle1",sx:{fontWeight:600,color:"#4b6f44",mb:.5,fontSize:"0.9rem"},children:"Quantity:"}),i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[i.jsx(s,{onClick:()=>ge(e=>Math.max(1,e-1)),disabled:!hi||he<=1,sx:{bgcolor:"#F5F5F5",color:"#4b6f44","&:hover":{bgcolor:"#E94560",color:"#FFFFFF"},"&:disabled":{bgcolor:"#F5F5F5",color:"#B8B8B8"}},children:"-"}),i.jsx(a,{variant:"h6",sx:{minWidth:40,textAlign:"center",fontWeight:600,color:"#4b6f44"},children:he}),i.jsx(s,{onClick:()=>ge(e=>{const i=e+1;return oi?Math.min(oi,i):i}),disabled:!hi||!!oi&&he>=oi,sx:{bgcolor:"#F5F5F5",color:"#4b6f44","&:hover":{bgcolor:"#E94560",color:"#FFFFFF"},"&:disabled":{bgcolor:"#F5F5F5",color:"#B8B8B8"}},children:"+"})]})]}),i.jsxs(r,{sx:{display:"flex",gap:2,mb:2},children:[i.jsx(c,{variant:"contained",size:"large",onClick:async()=>{if(!me&&gi&&te){ue(!0);try{const e=te.images?.[ce]||te.mainImage,i={...te,price:Ge,original_price:ei,base_price:ei,stock:"number"==typeof ii?ii:te?.stock,in_stock:ri,mainImage:e,image_url:e,selectedVariantItem:Ze};await G(i,he,xe),ye({open:!0,message:"Added to cart successfully!",severity:"success"})}catch(e){ye({open:!0,message:e.message||"Failed to add to cart",severity:"error"})}finally{ue(!1)}}},disabled:me||!gi,startIcon:i.jsx(p,{}),sx:{flex:1,py:2,background:gi?"rgb(179, 131, 39)":"#8B8B8B","&:hover":{background:gi?"rgb(159, 116, 35)":"#8B8B8B",boxShadow:"0px 8px 24px rgba(179, 131, 39, 0.25)",transform:"translateY(-2px)"},"&:disabled":{background:"#8B8B8B",color:"#FFFFFF"}},children:me?"Adding...":ni?ri?"Add to Cart":"Out of Stock":"Unavailable"}),i.jsx(s,{onClick:()=>{ee?(Se(!ve),ye({open:!0,message:ve?"Removed from wishlist":"Added to wishlist",severity:"success"})):be(!0)},sx:{bgcolor:ve?"#E94560":"#F5F5F5",color:ve?"#FFFFFF":"#4b6f44",width:56,height:56,"&:hover":{bgcolor:ve?"#C73650":"#E94560",color:"#FFFFFF",transform:"scale(1.1)"}},children:ve?i.jsx(b,{}):i.jsx(j,{})}),i.jsx(s,{onClick:()=>{we(!0)},sx:{bgcolor:"#F5F5F5",color:"#4b6f44",width:56,height:56,"&:hover":{bgcolor:"#E94560",color:"#FFFFFF",transform:"scale(1.1)"}},children:i.jsx(y,{})})]}),i.jsxs(r,{sx:{mb:2,textAlign:"left",display:"flex",alignItems:"center",gap:1},children:[i.jsx(v,{sx:{fontSize:18,color:"#6c757d"}}),i.jsxs(a,{variant:"body2",sx:{color:"#6c757d",fontSize:"0.9rem",fontFamily:'"Poppins", sans-serif',fontWeight:500,display:"flex",alignItems:"center",gap:.5},children:[i.jsx(r,{component:"span",sx:{fontWeight:700,fontSize:"1.1rem"},children:$e}),i.jsx(r,{component:"span",children:"People looking for this product"})]})]}),te.description&&i.jsx(r,{sx:{mb:0},children:i.jsxs(S,{expanded:Te,onChange:()=>Oe(!Te),sx:{boxShadow:"none",border:"1px solid #e0e0e0",borderBottom:"none",borderRadius:"0 !important","&:before":{display:"none"},"&.Mui-expanded":{margin:0},"& .MuiAccordion-root":{borderRadius:"0 !important"}},children:[i.jsx(k,{expandIcon:i.jsx(w,{}),sx:{px:2,py:1,minHeight:"auto",borderRadius:"0 !important","&.Mui-expanded":{minHeight:"auto"},"& .MuiAccordionSummary-content":{margin:"8px 0","&.Mui-expanded":{margin:"8px 0"}}},children:i.jsx(a,{variant:"subtitle1",sx:{fontWeight:600,color:"#000000",fontSize:"0.95rem",fontFamily:'"Poppins", sans-serif'},children:"Product Description"})}),i.jsx(F,{sx:{px:2,pb:2,borderRadius:"0 !important"},children:i.jsx(r,{sx:{color:"#000000",lineHeight:1.6,fontSize:"0.9rem","& p":{mb:2,color:"#000000"},"& ul":{pl:3,color:"#000000"},"& li":{mb:1,color:"#000000"},"& h1, & h2, & h3, & h4, & h5, & h6":{color:"#000000"},"& *":{color:"#000000"}},dangerouslySetInnerHTML:{__html:te.description}})})]})}),te.care_instructions&&i.jsx(r,{sx:{mb:0},children:i.jsxs(S,{expanded:Ne,onChange:()=>Ye(!Ne),sx:{boxShadow:"none",border:"1px solid #e0e0e0",borderTop:"none",borderBottom:"none",borderRadius:"0 !important","&:before":{display:"none"},"&.Mui-expanded":{margin:0},"& .MuiAccordion-root":{borderRadius:"0 !important"}},children:[i.jsx(k,{expandIcon:i.jsx(w,{}),sx:{px:2,py:1,minHeight:"auto",borderRadius:"0 !important","&.Mui-expanded":{minHeight:"auto"},"& .MuiAccordionSummary-content":{margin:"8px 0","&.Mui-expanded":{margin:"8px 0"}}},children:i.jsx(a,{variant:"subtitle1",sx:{fontWeight:600,color:"#000000",fontSize:"0.95rem",fontFamily:'"Poppins", sans-serif'},children:"Care Instructions"})}),i.jsx(F,{sx:{px:2,pb:2,borderRadius:"0 !important"},children:i.jsx(r,{sx:{color:"#000000",fontSize:"0.9rem",lineHeight:1.6,"& p":{mb:2,color:"#000000"},"& ul":{pl:3,color:"#000000"},"& li":{mb:1,color:"#000000"},"& h1, & h2, & h3, & h4, & h5, & h6":{color:"#000000"},"& *":{color:"#000000"}},dangerouslySetInnerHTML:{__html:te.care_instructions}})})]})}),te.shipping_info&&i.jsx(r,{sx:{mb:2},children:i.jsxs(S,{expanded:Ve,onChange:()=>qe(!Ve),sx:{boxShadow:"none",border:"1px solid #e0e0e0",borderTop:"none",borderRadius:"0 !important","&:before":{display:"none"},"&.Mui-expanded":{margin:0},"& .MuiAccordion-root":{borderRadius:"0 !important"}},children:[i.jsx(k,{expandIcon:i.jsx(w,{}),sx:{px:2,py:1,minHeight:"auto",borderRadius:"0 !important","&.Mui-expanded":{minHeight:"auto"},"& .MuiAccordionSummary-content":{margin:"8px 0","&.Mui-expanded":{margin:"8px 0"}}},children:i.jsx(a,{variant:"subtitle1",sx:{fontWeight:600,color:"#000000",fontSize:"0.95rem",fontFamily:'"Poppins", sans-serif'},children:"Shipping & Order Processing"})}),i.jsx(F,{sx:{px:2,pb:2,borderRadius:"0 !important"},children:i.jsx(r,{sx:{color:"#000000",fontSize:"0.9rem",lineHeight:1.6,"& p":{mb:2,color:"#000000"},"& ul":{pl:3,color:"#000000"},"& li":{mb:1,color:"#000000"},"& h1, & h2, & h3, & h4, & h5, & h6":{color:"#000000"},"& *":{color:"#000000"}},dangerouslySetInnerHTML:{__html:te.shipping_info}})})]})})]})})]}),i.jsx(r,{sx:{width:"100%",py:4,px:{xs:2,md:4},backgroundColor:"#ffffff"},children:i.jsxs(r,{sx:{maxWidth:1400,mx:"auto",display:"flex",flexDirection:{xs:"column",sm:"row"},gap:{xs:3,md:4},justifyContent:"space-around",alignItems:"flex-start"},children:[i.jsxs(r,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",px:2},children:[i.jsx(r,{component:"img",src:"/assets/png/premium-quality-fabrics-DqHM-I7K.png",alt:"Premium quality fabrics icon",sx:{mb:1.5,width:64,height:64,objectFit:"contain"}}),i.jsx(a,{variant:"h6",sx:{fontWeight:700,color:"#b88a44",mb:1,fontSize:{xs:"1rem",md:"1.1rem"},fontFamily:'"Poppins", sans-serif'},children:"Premium Quality Fabrics"}),i.jsx(a,{variant:"body2",sx:{color:"#000000",fontSize:"0.9rem",fontFamily:'"Poppins", sans-serif',lineHeight:1.5},children:"100% natural, breathable fabrics for superior comfort."})]}),i.jsxs(r,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",px:2},children:[i.jsx(r,{component:"img",src:"/assets/png/handcrafted-elegance-BblXTZPq.png",alt:"Handcrafted elegance icon",sx:{mb:1.5,width:64,height:64,objectFit:"contain"}}),i.jsx(a,{variant:"h6",sx:{fontWeight:700,color:"#b88a44",mb:1,fontSize:{xs:"1rem",md:"1.1rem"},fontFamily:'"Poppins", sans-serif'},children:"Handcrafted Elegance"}),i.jsx(a,{variant:"body2",sx:{color:"#000000",fontSize:"0.9rem",fontFamily:'"Poppins", sans-serif',lineHeight:1.5},children:"Each piece is carefully crafted by skilled artisans."})]}),i.jsxs(r,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",px:2},children:[i.jsx(r,{component:"img",src:"/assets/png/worldwide-delivery-BpMIIgV4.png",alt:"Worldwide delivery icon",sx:{mb:1.5,width:64,height:64,objectFit:"contain"}}),i.jsx(a,{variant:"h6",sx:{fontWeight:700,color:"#b88a44",mb:1,fontSize:{xs:"1rem",md:"1.1rem"},fontFamily:'"Poppins", sans-serif'},children:"Worldwide Delivery"}),i.jsx(a,{variant:"body2",sx:{color:"#000000",fontSize:"0.9rem",fontFamily:'"Poppins", sans-serif',lineHeight:1.5},children:"FREE in India & Worldwide Shipping Available"})]}),i.jsxs(r,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",px:2},children:[i.jsx(r,{component:"img",src:"/assets/png/secure-payments-C3IaCrIe.png",alt:"Secure payments icon",sx:{mb:1.5,width:64,height:64,objectFit:"contain"}}),i.jsx(a,{variant:"h6",sx:{fontWeight:700,color:"#b88a44",mb:1,fontSize:{xs:"1rem",md:"1.1rem"},fontFamily:'"Poppins", sans-serif'},children:"Secure Payments"}),i.jsx(a,{variant:"body2",sx:{color:"#000000",fontSize:"0.9rem",fontFamily:'"Poppins", sans-serif',lineHeight:1.5},children:"Transactions are fully protected with standard encryption."})]})]})}),i.jsx(r,{sx:{mt:4},children:i.jsxs(r,{sx:{p:4},children:[i.jsx(a,{variant:"h4",sx:{fontWeight:700,color:"#2c3e50",mb:3,fontFamily:"Inter, sans-serif"},children:"Customer Reviews"}),Ie&&i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:4,mb:4,p:3,background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",borderRadius:3},children:[i.jsxs(r,{sx:{textAlign:"center"},children:[i.jsx(a,{variant:"h2",sx:{fontWeight:700,color:"#e74c3c",fontFamily:"Inter, sans-serif"},children:Ie.average_rating?.toFixed(1)||"0.0"}),i.jsx(r,{sx:{display:"flex",gap:.5,justifyContent:"center",mb:1},children:[...Array(5)].map((e,r)=>i.jsx(h,{sx:{fontSize:20,color:r<Math.floor(Ie.average_rating||0)?"#ffc107":"#e0e0e0"}},r))}),i.jsxs(a,{sx:{color:"#6c757d",fontSize:"0.9rem"},children:["Based on ",Ie.total_reviews," reviews"]})]}),i.jsx(r,{sx:{flex:1},children:[5,4,3,2,1].map(e=>i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[i.jsx(a,{sx:{minWidth:20,fontSize:"0.9rem"},children:e}),i.jsx(h,{sx:{fontSize:16,color:"#ffc107"}}),i.jsx(r,{sx:{flex:1,height:8,bgcolor:"#e9ecef",borderRadius:1,overflow:"hidden"},children:i.jsx(r,{sx:{height:"100%",width:`${Ie.rating_percentages?.[e]||0}%`,bgcolor:"#e74c3c",transition:"width 0.3s ease"}})}),i.jsx(a,{sx:{minWidth:30,fontSize:"0.8rem",color:"#6c757d"},children:Ie.rating_distribution?.[e]||0})]},e))})]}),Ce?i.jsx(r,{sx:{display:"flex",justifyContent:"center",py:4},children:i.jsx(r,{sx:{width:40,height:40,border:"3px solid #e74c3c",borderTop:"3px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):Fe.length>0?i.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:3},children:[Fe.slice(0,5).map(e=>i.jsxs(r,{sx:{p:3,border:"1px solid #e9ecef",borderRadius:3,background:"#ffffff"},children:[i.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[i.jsxs(r,{children:[i.jsx(a,{sx:{fontWeight:600,color:"#2c3e50",mb:.5},children:e.customer_name}),i.jsx(r,{sx:{display:"flex",gap:.5},children:[...Array(5)].map((r,t)=>i.jsx(h,{sx:{fontSize:16,color:t<e.rating?"#ffc107":"#e0e0e0"}},t))})]}),i.jsx(a,{sx:{color:"#6c757d",fontSize:"0.8rem"},children:new Date(e.created_at).toLocaleDateString()})]}),i.jsx(a,{sx:{color:"#2c3e50",lineHeight:1.6,mb:2},children:e.review_text}),e.is_verified_purchase&&i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:.5,mb:2},children:[i.jsx(m,{sx:{fontSize:16,color:"#28a745"}}),i.jsx(a,{sx:{fontSize:"0.8rem",color:"#28a745",fontWeight:500},children:"Verified Purchase"})]}),e.admin_reply&&i.jsxs(r,{sx:{mt:2,p:2,background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",borderRadius:2,borderLeft:"4px solid #e74c3c"},children:[i.jsx(a,{sx:{fontSize:"0.9rem",fontWeight:600,color:"#e74c3c",mb:1},children:"Admin Reply:"}),i.jsx(a,{sx:{color:"#2c3e50",fontSize:"0.9rem"},children:e.admin_reply}),e.admin_reply_date&&i.jsx(a,{sx:{fontSize:"0.8rem",color:"#6c757d",mt:1},children:new Date(e.admin_reply_date).toLocaleDateString()})]})]},e.review_id)),Fe.length>5&&i.jsxs(c,{variant:"outlined",sx:{alignSelf:"center",borderColor:"#e74c3c",color:"#e74c3c","&:hover":{borderColor:"#c0392b",backgroundColor:"rgba(231, 76, 60, 0.04)"}},children:["View All Reviews (",Fe.length,")"]})]}):i.jsxs(r,{sx:{textAlign:"center",py:4},children:[i.jsx(a,{sx:{color:"#6c757d",mb:2},children:"No reviews yet. Be the first to review this product!"}),i.jsx(c,{variant:"contained",onClick:()=>Re(!0),sx:{background:"linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)","&:hover":{background:"linear-gradient(135deg, #c0392b 0%, #a93226 100%)"}},children:"Write a Review"})]})]})})]}),(Ee||Be.length>0)&&i.jsx(K,{title:Ke?.name||"Similar Products",subtitle:"Featured Collection",products:Be,viewAllLink:si?`/category/${si}`:void 0,loading:Ee,maxWidth:1200}),ai&&i.jsxs(z,{open:Ue,onClose:()=>Xe(!1),maxWidth:"md",fullWidth:!0,TransitionProps:{timeout:0},PaperProps:{sx:{borderRadius:0}},children:[i.jsxs(I,{sx:{fontWeight:700,color:"#2c3e50",fontFamily:"Inter, sans-serif",display:"flex",alignItems:"center",justifyContent:"space-between"},children:["Size Chart",i.jsx(s,{"aria-label":"Close",onClick:()=>Xe(!1),size:"small",sx:{color:"#2c3e50"},children:i.jsx(_,{fontSize:"small"})})]}),i.jsx(C,{sx:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f9fafb"},children:i.jsx(r,{component:"img",src:ai,alt:"Size Chart",sx:{width:"100%",maxHeight:"70vh",objectFit:"contain"}})})]}),i.jsxs(z,{open:ke,onClose:()=>we(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:4,boxShadow:"0px 20px 60px rgba(75, 111, 68, 0.2)"}},children:[i.jsx(I,{sx:{fontWeight:600,color:"#4b6f44",fontFamily:'"Inter", sans-serif'},children:"Share Product"}),i.jsx(C,{children:i.jsx(W,{fullWidth:!0,value:window.location.href,InputProps:{readOnly:!0},sx:{mt:2}})}),i.jsxs(A,{sx:{p:3},children:[i.jsx(c,{onClick:()=>we(!1),sx:{color:"#8B8B8B"},children:"Close"}),i.jsx(c,{onClick:()=>{navigator.clipboard.writeText(window.location.href),ye({open:!0,message:"Link copied to clipboard!",severity:"success"}),we(!1)},variant:"contained",sx:{background:"#4b6f44","&:hover":{background:"linear-gradient(135deg, #16213E 0%, #0F0F1E 100%)"}},children:"Copy Link"})]})]}),i.jsx(D,{open:pe,onClose:()=>be(!1),onLoginSuccess:e=>{be(!1),re(e)},message:"Please login to access this feature"}),i.jsx(R,{open:je.open,autoHideDuration:3e3,onClose:()=>ye({...je,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:i.jsx(P,{onClose:()=>ye({...je,open:!1}),severity:je.severity,sx:{width:"100%",borderRadius:3,fontWeight:500},children:je.message})}),i.jsxs(z,{open:Ae,onClose:()=>Re(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:4,boxShadow:"0 20px 60px rgba(0,0,0,0.2)",background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)"}},children:[i.jsx(I,{sx:{fontWeight:700,color:"#2c3e50",fontFamily:"Inter, sans-serif",textAlign:"center",pb:1},children:"Write a Review"}),i.jsx(C,{sx:{pt:2},children:i.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:3},children:[i.jsxs(r,{children:[i.jsx(a,{sx:{mb:1,fontWeight:600,color:"#2c3e50"},children:"Rating *"}),i.jsx(M,{value:Pe.rating,onChange:(e,i)=>{Me({...Pe,rating:i||5})},size:"large",sx:{"& .MuiRating-iconFilled":{color:"#ffc107"}}})]}),i.jsx(W,{label:"Your Name *",value:Pe.customer_name,onChange:e=>Me({...Pe,customer_name:e.target.value}),fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),i.jsx(W,{label:"Your Email *",type:"email",value:Pe.customer_email,onChange:e=>Me({...Pe,customer_email:e.target.value}),fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),i.jsx(W,{label:"Your Review *",value:Pe.review_text,onChange:e=>Me({...Pe,review_text:e.target.value}),fullWidth:!0,multiline:!0,rows:4,variant:"outlined",placeholder:"Share your experience with this product...",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]})}),i.jsxs(A,{sx:{p:3,gap:2},children:[i.jsx(c,{onClick:()=>Re(!1),variant:"outlined",sx:{borderColor:"#6c757d",color:"#6c757d","&:hover":{borderColor:"#495057",backgroundColor:"rgba(108, 117, 125, 0.04)"}},children:"Cancel"}),i.jsx(c,{onClick:async()=>{try{const e=await E.post(`/product/${t}/review`,Pe);e.data?.success?(ye({open:!0,message:"Review submitted successfully!",severity:"success"}),Re(!1),Me({customer_name:"",customer_email:"",rating:5,review_text:""}),ci()):ye({open:!0,message:e.data?.error||"Failed to submit review",severity:"error"})}catch(e){ye({open:!0,message:"Failed to submit review. Please try again.",severity:"error"})}},variant:"contained",disabled:!Pe.customer_name||!Pe.customer_email||!Pe.review_text,sx:{background:"linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)","&:hover":{background:"linear-gradient(135deg, #c0392b 0%, #a93226 100%)"},"&:disabled":{background:"#e9ecef",color:"#6c757d"}},children:"Submit Review"})]})]})]})};export{re as default};
