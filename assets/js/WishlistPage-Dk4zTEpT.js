import{r as e,j as t,az as s,B as r,C as i,A as a,T as o,P as l,al as n,k as c,Q as d,p as x,b1 as h,q as m,I as p,t as u,v as j,b2 as y,a3 as f,m as g}from"./mui-ozL9oKY4.js";import{a as v,s as b}from"./index-DdN_eTnl.js";import{u as w}from"./router-Ce8BsbaV.js";import"./vendor-HnKmhvXM.js";import"./utils-iaplX_JR.js";const _=()=>{const[_,k]=e.useState([]),[W,C]=e.useState(!0),[F,I]=e.useState(null),S=w();e.useEffect(()=>{z()},[]);const z=async()=>{try{C(!0),I(null);const e=await v.get("/customer/wishlist");e.data.success?k(e.data.wishlist):I("Failed to fetch wishlist")}catch(e){I(e.response?.data?.error||"Failed to fetch wishlist")}finally{C(!1)}},A=e=>e?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e):"â‚¹0.00";return W?t.jsx(s,{maxWidth:"lg",sx:{py:4},children:t.jsx(r,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:t.jsx(i,{})})}):F?t.jsx(s,{maxWidth:"lg",sx:{py:4},children:t.jsx(a,{severity:"error",sx:{mb:3},children:F})}):t.jsxs(s,{maxWidth:"lg",sx:{py:4},children:[t.jsxs(r,{sx:{mb:4},children:[t.jsx(o,{variant:"h4",component:"h1",gutterBottom:!0,children:"My Wishlist"}),t.jsx(o,{variant:"body1",color:"text.secondary",children:"Your saved items and favorites"})]}),0===_.length?t.jsxs(l,{sx:{p:4,textAlign:"center"},children:[t.jsx(n,{sx:{fontSize:64,color:"text.secondary",mb:2}}),t.jsx(o,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Your Wishlist is Empty"}),t.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Start adding items to your wishlist to save them for later."}),t.jsx(c,{variant:"contained",onClick:()=>S(`/store/${b}/products`),children:"Browse Products"})]}):t.jsx(d,{container:!0,spacing:3,children:_.map(e=>{return t.jsx(d,{item:!0,xs:12,sm:6,md:4,lg:3,children:t.jsxs(x,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[t.jsx(h,{component:"img",height:"200",image:e.images?.[0]||"/placeholder-product.jpg",alt:e.product_name,sx:{objectFit:"cover"},onError:e=>{e.target.src="/placeholder-product.jpg"}}),t.jsxs(m,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[t.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[t.jsx(o,{variant:"h6",component:"h3",sx:{fontSize:"1rem",fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.product_name}),t.jsx(p,{size:"small",color:"error",onClick:()=>(async e=>{try{(await v.delete(`/customer/wishlist/${e}`)).data.success?k(_.filter(t=>t.wishlist_id!==e)):I("Failed to remove item from wishlist")}catch(t){I(t.response?.data?.error||"Failed to remove item from wishlist")}})(e.wishlist_id),sx:{ml:1},children:t.jsx(u,{})})]}),t.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.description}),t.jsx(r,{sx:{mb:2},children:e.sale_price&&e.sale_price<e.base_price?t.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(o,{variant:"h6",color:"primary",sx:{fontWeight:600},children:A(e.sale_price)}),t.jsx(o,{variant:"body2",color:"text.secondary",sx:{textDecoration:"line-through"},children:A(e.base_price)}),t.jsx(j,{icon:t.jsx(y,{}),label:`${i=e.base_price,a=e.sale_price,!i||!a||a>=i?0:Math.round((i-a)/i*100)}% OFF`,color:"error",size:"small"})]}):t.jsx(o,{variant:"h6",color:"primary",sx:{fontWeight:600},children:A(e.base_price)})}),t.jsxs(r,{sx:{mb:2},children:[t.jsx(j,{label:e.in_stock?"In Stock":"Out of Stock",color:e.in_stock?"success":"error",size:"small",sx:{mr:1}}),t.jsx(j,{label:e.status,color:"active"===e.status?"primary":"default",size:"small"})]}),e.variants&&e.variants.length>0&&t.jsx(r,{sx:{mb:2},children:t.jsxs(o,{variant:"caption",color:"text.secondary",children:["Variants: ",e.variants.length]})}),t.jsxs(r,{sx:{mt:"auto",display:"flex",gap:1},children:[t.jsx(c,{variant:"outlined",size:"small",startIcon:t.jsx(f,{}),onClick:()=>{return t=e.product_id,void S(`/store/${b}/product/${t}`);var t},fullWidth:!0,children:"View"}),t.jsx(c,{variant:"contained",size:"small",startIcon:t.jsx(g,{}),onClick:()=>(async e=>{try{(await v.post("/cart/add",{product_id:e,quantity:1})).data.success||I("Failed to add item to cart")}catch(t){I(t.response?.data?.error||"Failed to add item to cart")}})(e.product_id),disabled:!e.in_stock,fullWidth:!0,children:"Add to Cart"})]}),t.jsxs(o,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Added ",(s=e.created_at,s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A")]})]})]})},e.wishlist_id);var s,i,a})}),_.length>0&&t.jsx(r,{sx:{mt:4,textAlign:"center"},children:t.jsxs(o,{variant:"body2",color:"text.secondary",children:[_.length," item",1!==_.length?"s":""," in your wishlist"]})})]})};export{_ as default};
