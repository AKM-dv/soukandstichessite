import{r as s,j as e,B as t,f as r,A as o,e as a,aP as n,aF as i,P as l,aQ as c,am as d,T as x,Z as f,t as u,aR as m,w as b,g as h}from"./mui-BZa9U3BX.js";import{a as j,b as p,A as g,S as y}from"./index-7nkCZTjO.js";import{I as v}from"./InvoiceDisplay--Hzqp3R7.js";import{c as w,u as S}from"./router-DABrdN31.js";import"./vendor-HnKmhvXM.js";import"./utils-CXOnpNeq.js";const k=s=>null==s?"—":`₹${Number(s).toLocaleString()}`,C=({label:s,value:r,bold:o=!1})=>e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",color:"#2f3b31"},children:[e.jsx(x,{sx:{fontWeight:o?700:500},children:s}),e.jsx(x,{sx:{fontWeight:o?800:600},children:k(r)})]}),W=()=>{const{orderId:W}=w(),$=S(),{clearCart:I,clearCartFromServer:_}=j(),[P,F]=s.useState(null),[T,D]=s.useState(!0),[R,q]=s.useState(null);s.useEffect(()=>{W&&A()},[W]);const A=async()=>{try{D(!0),q(null);const s=await p.get(`/orders/${W}`);s.data.success?(F(s.data.order),I(),_()):q("Order not found")}catch(s){q(s.response?.data?.message||"Failed to load order details")}finally{D(!1)}};if(T)return e.jsx(t,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh"},children:e.jsx(r,{sx:{color:"#4b6f44"}})});if(R)return e.jsxs(t,{sx:{width:"100%",maxWidth:720,mx:"auto",mt:6,px:{xs:2,sm:3},py:4},children:[e.jsx(o,{severity:"error",sx:{mb:2,borderRadius:2},children:R}),e.jsx(a,{variant:"contained",onClick:()=>$("/"),startIcon:e.jsx(n,{}),children:"Back to Home"})]});if(!P)return null;const O=((s,e)=>s?s.startsWith("http")?s:`${g}${s}`:e?`${g}/store/${y}/orders/${e}/invoice`:null)(P.invoice_url,P.order_id),z=P.order_summary||{};return e.jsx(t,{sx:{minHeight:"100vh",backgroundColor:"#f7f6f3",py:{xs:4,md:6}},children:e.jsxs(i,{maxWidth:"md",sx:{px:{xs:2,sm:3}},children:[e.jsxs(l,{sx:{p:{xs:3,md:4},mb:3,borderRadius:3,boxShadow:"0 10px 30px rgba(0,0,0,0.06)",background:"#fff",textAlign:"center"},children:[e.jsx(c,{sx:{width:72,height:72,bgcolor:"rgba(75,111,68,0.1)",border:"3px solid rgba(75,111,68,0.2)",mx:"auto",mb:2},children:e.jsx(d,{sx:{fontSize:40,color:"#4b6f44"}})}),e.jsx(x,{variant:"h4",sx:{fontWeight:800,color:"#2f3b31",mb:1},children:"Order Confirmed"}),e.jsxs(x,{variant:"body1",sx:{color:"#5b625c",mb:3},children:["Thanks for your purchase! A confirmation was sent to ",P.customer_details?.email||"your email","."]}),e.jsxs(f,{direction:{xs:"column",sm:"row"},spacing:1,justifyContent:"center",alignItems:"center",sx:{mb:3},children:[e.jsx(u,{label:`Order #${P.order_id}`,sx:{fontWeight:700,bgcolor:"#f1f5f3"}}),e.jsx(u,{label:`Total ${z.total?k(z.total):"—"}`,sx:{fontWeight:700,bgcolor:"#f1f5f3"}}),e.jsx(u,{label:`Payment: ${P.payment_method||"—"}`,sx:{fontWeight:700,bgcolor:"#f1f5f3",textTransform:"capitalize"}})]}),e.jsxs(f,{direction:{xs:"column",sm:"row"},spacing:1.5,justifyContent:"center",children:[O&&e.jsxs(e.Fragment,{children:[e.jsx(a,{variant:"contained",startIcon:e.jsx(m,{}),sx:{background:"#e94560","&:hover":{background:"#d53c54"}},onClick:()=>{const s=document.querySelector("[data-invoice-download]");s?s.parentElement?.click():window.open(O,"_blank")},children:"Download PDF"}),e.jsx(a,{variant:"outlined",startIcon:e.jsx(b,{}),sx:{borderColor:"#4b6f44",color:"#4b6f44"},onClick:()=>{const s=document.querySelector("[data-invoice-print]");s?s.parentElement?.click():window.open(O,"_blank")},children:"Print / Save PDF"})]}),e.jsx(a,{variant:"text",startIcon:e.jsx(n,{}),onClick:()=>$("/"),sx:{color:"#4b6f44",fontWeight:700},children:"Continue Shopping"})]})]}),e.jsx(l,{sx:{p:{xs:3,md:4},borderRadius:3,boxShadow:"0 10px 30px rgba(0,0,0,0.05)",background:"#fff",mb:3},children:e.jsxs(f,{spacing:2,children:[e.jsx(x,{variant:"h6",sx:{fontWeight:700,color:"#2f3b31"},children:"Order Summary"}),P.items?.map((s,r)=>e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:1,borderBottom:"1px solid #f1f1f1"},children:[e.jsxs(t,{children:[e.jsx(x,{sx:{fontWeight:600,color:"#2f3b31"},children:s.name||s.product_name||"Product"}),e.jsxs(x,{sx:{color:"#6b6b6b",fontSize:14},children:["Qty: ",s.quantity]})]}),e.jsx(x,{sx:{fontWeight:700,color:"#2f3b31"},children:k(s.price*s.quantity)})]},`${s.product_id}-${r}`)),e.jsx(h,{}),e.jsxs(f,{spacing:1,children:[e.jsx(C,{label:"Subtotal",value:z.subtotal}),e.jsx(C,{label:"Shipping",value:z.shipping}),e.jsx(C,{label:"Tax",value:z.tax}),e.jsx(C,{label:"Discount",value:z.discount?-z.discount:0}),e.jsx(h,{}),e.jsx(C,{label:"Total Paid",value:z.total,bold:!0})]})]})}),P&&e.jsx(l,{sx:{p:{xs:3,md:4},borderRadius:3,boxShadow:"0 10px 30px rgba(0,0,0,0.05)",background:"#fff"},children:e.jsx(v,{order:P})})]})})};export{W as default};
