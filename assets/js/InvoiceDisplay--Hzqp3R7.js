import{j as t,P as r,B as e,aR as n,T as i,Z as s,e as o,ab as a,b5 as d,g as l,aH as c,t as x}from"./mui-BZa9U3BX.js";import{S as h}from"./index-7nkCZTjO.js";const b=t=>(Number(t)||0).toLocaleString("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}),g=(t,r="print")=>{const e=(t=>{const r=t?.customer_details||{},e=t?.order_summary||{},n=t?.items||[],i=t?.created_at?new Date(t.created_at).toLocaleString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",s=n.map((t,r)=>{const e=t.quantity||1,n=Number(t.price)||0,i=n*e;return`\n      <tr>\n        <td>${r+1}</td>\n        <td>${t.name||t.product_name||"Product"}</td>\n        <td>${b(n)}</td>\n        <td>${e}</td>\n        <td>${b(i)}</td>\n      </tr>\n    `}).join("");return`\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="UTF-8" />\n  <title>Invoice #${t?.order_id||""}</title>\n  <style>\n    :root { --primary:#4b6f44; --accent:#e94560; --border:#e9ecef; --muted:#666; }\n    * { box-sizing: border-box; font-family: 'Inter', Arial, sans-serif; }\n    body { margin: 0; padding: 24px; background: #f8f9fb; color: #1d1d1f; }\n    .invoice { max-width: 900px; margin: 0 auto; background: #fff; padding: 32px; border-radius: 12px; border: 1px solid var(--border); }\n    .header { display: flex; justify-content: space-between; align-items: flex-start; gap: 16px; }\n    .title { font-size: 28px; font-weight: 800; color: var(--primary); margin: 0; }\n    .meta { text-align: right; }\n    .label { color: var(--muted); font-size: 13px; }\n    .value { font-weight: 700; }\n    .section { margin-top: 24px; }\n    .section h3 { margin: 0 0 8px; color: var(--primary); font-size: 16px; }\n    .card { border: 1px solid var(--border); border-radius: 10px; padding: 16px; background: #fafbfc; }\n    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px,1fr)); gap: 12px; }\n    table { width: 100%; border-collapse: collapse; margin-top: 12px; }\n    th, td { padding: 10px; border-bottom: 1px solid var(--border); text-align: left; font-size: 14px; }\n    th { background: #f3f5f7; color: #34495e; }\n    tfoot td { font-weight: 700; }\n    .right { text-align: right; }\n    .totals { width: 320px; margin-left: auto; }\n    .badge { display: inline-block; padding: 6px 12px; background: #eef7f0; color: var(--primary); border-radius: 999px; font-weight: 700; font-size: 12px; }\n    .footer { margin-top: 24px; font-size: 12px; color: var(--muted); text-align: center; }\n  </style>\n</head>\n<body>\n  <div class="invoice">\n    <div class="header">\n      <div>\n        <div class="title">Invoice / Tax Invoice</div>\n        <div class="badge">Order #${t?.order_id||"N/A"}</div>\n      </div>\n      <div class="meta">\n        <div class="label">Date</div>\n        <div class="value">${i}</div>\n        <div class="label" style="margin-top:6px;">Store</div>\n        <div class="value">Souk and Stitch (ID: ${h})</div>\n      </div>\n    </div>\n\n    <div class="section grid">\n      <div class="card">\n        <h3>From</h3>\n        <div class="value">Souk and Stitch</div>\n        <div class="label">Premium Handcrafted Products</div>\n      </div>\n      <div class="card">\n        <h3>Bill To</h3>\n        <div class="value">${r.firstName||""} ${r.lastName||""}</div>\n        <div class="label">${r.address||""}</div>\n        ${r.phone?`<div class="label">Phone: ${r.phone}</div>`:""}\n        ${r.email?`<div class="label">Email: ${r.email}</div>`:""}\n      </div>\n    </div>\n\n    <div class="section">\n      <h3>Items</h3>\n      <table>\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Description</th>\n            <th class="right">Price</th>\n            <th class="right">Qty</th>\n            <th class="right">Amount</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${s||'<tr><td colspan="5">No items</td></tr>'}\n        </tbody>\n      </table>\n    </div>\n\n    <div class="section totals">\n      <table>\n        <tbody>\n          <tr><td>Subtotal</td><td class="right">${b(e.subtotal)}</td></tr>\n          <tr><td>Shipping</td><td class="right">${b(e.shipping)}</td></tr>\n          <tr><td>Tax</td><td class="right">${b(e.tax)}</td></tr>\n          <tr><td>Discount</td><td class="right">-${b(e.discount)}</td></tr>\n        </tbody>\n        <tfoot>\n          <tr><td>Total</td><td class="right">${b(e.total)}</td></tr>\n        </tfoot>\n      </table>\n    </div>\n\n    <div class="footer">\n      Thank you for shopping with us. For support, contact support@soukandstitch.in\n    </div>\n  </div>\n</body>\n</html>\n`})(t),n=window.open("","_blank","width=1024,height=1200");n&&(n.document.open(),n.document.write(e),n.document.close(),n.focus(),n.onload=()=>{"print"!==r&&"download"!==r||n.print()})},m=({order:h,onDownload:b,onPrint:m})=>{if(!h)return null;const p=h.created_at?new Date(h.created_at).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",f=h.customer_details||{},u=h.order_summary||{},v=h.items||[];return t.jsxs(r,{sx:{p:{xs:3,md:5},borderRadius:3,backgroundColor:"#FFFFFF",boxShadow:"0px 4px 20px rgba(75, 111, 68, 0.08)",border:"1px solid rgba(75, 111, 68, 0.05)"},children:[t.jsx(e,{sx:{mb:4},children:t.jsxs(e,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,flexWrap:"wrap",gap:2},children:[t.jsxs(e,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.jsx(n,{sx:{fontSize:40,color:"#4b6f44"}}),t.jsxs(e,{children:[t.jsx(i,{variant:"h4",sx:{fontWeight:700,color:"#4b6f44",fontFamily:'"Inter", sans-serif',fontSize:{xs:"1.5rem",md:"2rem"}},children:"Invoice / Bill"}),t.jsxs(i,{variant:"body2",sx:{color:"#8B8B8B",mt:.5},children:["Order #",h.order_id]})]})]}),t.jsxs(s,{direction:"row",spacing:2,flexWrap:"wrap",children:[t.jsxs(o,{variant:"contained",startIcon:t.jsx(a,{}),onClick:()=>{b?b(h):g(h,"download")},sx:{background:"linear-gradient(135deg, #E94560 0%, #FF6B7A 100%)",color:"#FFFFFF",px:3,py:1.5,fontWeight:600,borderRadius:2,"&:hover":{background:"linear-gradient(135deg, #C73650 0%, #E94560 100%)"}},children:["Download PDF",t.jsx("span",{"data-invoice-download":!0,hidden:!0})]}),t.jsxs(o,{variant:"outlined",startIcon:t.jsx(d,{}),onClick:()=>{m?m(h):g(h,"print")},sx:{borderColor:"#4b6f44",color:"#4b6f44",px:3,py:1.5,fontWeight:600,borderRadius:2,"&:hover":{borderColor:"#16213E",bgcolor:"rgba(75, 111, 68, 0.1)"}},children:["Print",t.jsx("span",{"data-invoice-print":!0,hidden:!0})]})]})]})}),t.jsx(l,{sx:{mb:4}}),t.jsxs(c,{container:!0,spacing:4,sx:{mb:4},children:[t.jsx(c,{item:!0,xs:12,md:6,children:t.jsxs(e,{sx:{p:3,borderRadius:2,bgcolor:"rgba(75, 111, 68, 0.05)",border:"1px solid rgba(75, 111, 68, 0.1)"},children:[t.jsx(i,{variant:"h6",sx:{fontWeight:700,color:"#4b6f44",mb:2,fontFamily:'"Inter", sans-serif'},children:"From"}),t.jsx(i,{variant:"body1",sx:{fontWeight:600,color:"#4b6f44",mb:1},children:"Souk and Stitch"}),t.jsx(i,{variant:"body2",sx:{color:"#6B6B6B",lineHeight:1.7},children:"Premium Handcrafted Products"})]})}),t.jsx(c,{item:!0,xs:12,md:6,children:t.jsxs(e,{sx:{p:3,borderRadius:2,bgcolor:"rgba(75, 111, 68, 0.05)",border:"1px solid rgba(75, 111, 68, 0.1)"},children:[t.jsx(i,{variant:"h6",sx:{fontWeight:700,color:"#4b6f44",mb:2,fontFamily:'"Inter", sans-serif'},children:"Bill To"}),t.jsxs(i,{variant:"body1",sx:{fontWeight:600,color:"#4b6f44",mb:1},children:[f.firstName," ",f.lastName]}),t.jsx(i,{variant:"body2",sx:{color:"#6B6B6B",lineHeight:1.7,mb:1},children:f.address}),f.phone&&t.jsxs(i,{variant:"body2",sx:{color:"#6B6B6B"},children:["Phone: ",f.phone]}),f.email&&t.jsxs(i,{variant:"body2",sx:{color:"#6B6B6B"},children:["Email: ",f.email]})]})})]}),t.jsx(e,{sx:{mb:4},children:t.jsxs(c,{container:!0,spacing:2,sx:{mb:3},children:[t.jsx(c,{item:!0,xs:12,sm:6,md:3,children:t.jsxs(e,{sx:{p:2,borderRadius:2,bgcolor:"rgba(75, 111, 68, 0.05)",border:"1px solid rgba(75, 111, 68, 0.1)"},children:[t.jsx(i,{variant:"body2",sx:{color:"#8B8B8B",mb:.5,fontWeight:600},children:"Invoice Number"}),t.jsxs(i,{variant:"h6",sx:{fontWeight:700,color:"#4b6f44"},children:["#",h.order_id]})]})}),t.jsx(c,{item:!0,xs:12,sm:6,md:3,children:t.jsxs(e,{sx:{p:2,borderRadius:2,bgcolor:"rgba(75, 111, 68, 0.05)",border:"1px solid rgba(75, 111, 68, 0.1)"},children:[t.jsx(i,{variant:"body2",sx:{color:"#8B8B8B",mb:.5,fontWeight:600},children:"Invoice Date"}),t.jsx(i,{variant:"h6",sx:{fontWeight:700,color:"#4b6f44"},children:p})]})}),t.jsx(c,{item:!0,xs:12,sm:6,md:3,children:t.jsxs(e,{sx:{p:2,borderRadius:2,bgcolor:"rgba(75, 111, 68, 0.05)",border:"1px solid rgba(75, 111, 68, 0.1)"},children:[t.jsx(i,{variant:"body2",sx:{color:"#8B8B8B",mb:.5,fontWeight:600},children:"Payment Method"}),t.jsx(i,{variant:"h6",sx:{fontWeight:700,color:"#4b6f44",textTransform:"capitalize"},children:h.payment_method||"N/A"})]})}),t.jsx(c,{item:!0,xs:12,sm:6,md:3,children:t.jsxs(e,{sx:{p:2,borderRadius:2,bgcolor:"rgba(75, 111, 68, 0.05)",border:"1px solid rgba(75, 111, 68, 0.1)"},children:[t.jsx(i,{variant:"body2",sx:{color:"#8B8B8B",mb:.5,fontWeight:600},children:"Status"}),t.jsx(x,{label:h.payment_status||"Paid",sx:{bgcolor:"paid"===h.payment_status?"rgba(0, 200, 81, 0.1)":"rgba(255, 136, 0, 0.1)",color:"paid"===h.payment_status?"#00C851":"#FF8800",fontWeight:600,textTransform:"capitalize"}})]})})]})}),t.jsxs(e,{sx:{mb:4},children:[t.jsx(i,{variant:"h6",sx:{fontWeight:700,color:"#4b6f44",mb:2,fontFamily:'"Inter", sans-serif'},children:"Items"}),t.jsxs(e,{sx:{border:"1px solid rgba(75, 111, 68, 0.1)",borderRadius:2,overflow:"hidden"},children:[t.jsxs(e,{sx:{bgcolor:"rgba(75, 111, 68, 0.05)",p:2,borderBottom:"1px solid rgba(75, 111, 68, 0.1)",display:{xs:"none",md:"flex"},gap:2},children:[t.jsx(e,{sx:{flex:2},children:t.jsx(i,{variant:"body2",sx:{fontWeight:600,color:"#4b6f44"},children:"Item"})}),t.jsx(e,{sx:{flex:1,textAlign:"center"},children:t.jsx(i,{variant:"body2",sx:{fontWeight:600,color:"#4b6f44"},children:"Quantity"})}),t.jsx(e,{sx:{flex:1,textAlign:"right"},children:t.jsx(i,{variant:"body2",sx:{fontWeight:600,color:"#4b6f44"},children:"Price"})}),t.jsx(e,{sx:{flex:1,textAlign:"right"},children:t.jsx(i,{variant:"body2",sx:{fontWeight:600,color:"#4b6f44"},children:"Total"})})]}),v.map((r,n)=>t.jsx(e,{sx:{p:2,borderBottom:n<v.length-1?"1px solid rgba(75, 111, 68, 0.1)":"none","&:hover":{bgcolor:"rgba(75, 111, 68, 0.02)"}},children:t.jsxs(c,{container:!0,spacing:2,alignItems:"center",children:[t.jsxs(c,{item:!0,xs:12,md:6,children:[t.jsx(i,{variant:"body1",sx:{fontWeight:600,color:"#4b6f44",mb:.5},children:r.name}),r.selected_variants&&Object.keys(r.selected_variants).length>0&&t.jsx(e,{sx:{display:"flex",gap:.5,flexWrap:"wrap",mt:.5},children:Object.entries(r.selected_variants).map(([r,e])=>t.jsx(x,{label:`${r}: ${e}`,size:"small",sx:{fontSize:"0.7rem",height:20,bgcolor:"#F5F5F5",color:"#6B6B6B"}},r))})]}),t.jsx(c,{item:!0,xs:4,md:2,children:t.jsxs(i,{variant:"body2",sx:{color:"#6B6B6B",textAlign:{xs:"left",md:"center"}},children:["Qty: ",r.quantity]})}),t.jsx(c,{item:!0,xs:4,md:2,children:t.jsxs(i,{variant:"body2",sx:{color:"#6B6B6B",textAlign:{xs:"left",md:"right"}},children:["₹",Number(r.price||0).toLocaleString()]})}),t.jsx(c,{item:!0,xs:4,md:2,children:t.jsxs(i,{variant:"body1",sx:{fontWeight:600,color:"#4b6f44",textAlign:{xs:"left",md:"right"}},children:["₹",Number(r.total_price||r.price*r.quantity||0).toLocaleString()]})})]})},n))]})]}),t.jsx(e,{sx:{p:4,borderRadius:2,bgcolor:"rgba(75, 111, 68, 0.05)",border:"1px solid rgba(75, 111, 68, 0.1)"},children:t.jsxs(s,{spacing:2,children:[t.jsxs(e,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(i,{variant:"h6",sx:{color:"#6B6B6B",fontWeight:600},children:"Subtotal:"}),t.jsxs(i,{variant:"h6",sx:{fontWeight:700,color:"#4b6f44"},children:["₹",Number(u.subtotal||0).toLocaleString()]})]}),u.discount>0&&t.jsxs(e,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(i,{variant:"h6",sx:{color:"#6B6B6B",fontWeight:600},children:"Discount:"}),t.jsxs(i,{variant:"h6",sx:{fontWeight:700,color:"#E94560"},children:["-₹",Number(u.discount||0).toLocaleString()]})]}),t.jsxs(e,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(i,{variant:"h6",sx:{color:"#6B6B6B",fontWeight:600},children:"Shipping:"}),t.jsx(i,{variant:"h6",sx:{fontWeight:700,color:0===u.shipping?"#00C851":"#4b6f44"},children:0===u.shipping?"Free":`₹${Number(u.shipping||0).toLocaleString()}`})]}),t.jsx(l,{sx:{my:1,borderColor:"rgba(75, 111, 68, 0.2)"}}),t.jsxs(e,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2.5,borderRadius:2,bgcolor:"rgba(233, 69, 96, 0.1)",border:"2px solid rgba(233, 69, 96, 0.2)"},children:[t.jsx(i,{variant:"h5",sx:{fontWeight:700,color:"#4b6f44"},children:"Total:"}),t.jsxs(i,{variant:"h5",sx:{fontWeight:700,color:"#E94560"},children:["₹",Number(u.total||h.total_amount||0).toLocaleString()]})]})]})}),t.jsx(e,{sx:{mt:4,textAlign:"center"},children:t.jsx(i,{variant:"body2",sx:{color:"#8B8B8B",fontStyle:"italic"},children:"Thank you for your purchase! This is a computer-generated invoice and does not require a signature."})})]})};export{m as I};
