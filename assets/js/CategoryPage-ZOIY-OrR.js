import{a as e,r,j as t,B as o,k as n,ao as s,I as a,ap as i,aq as l,T as d,h as c,J as x,a7 as g,ar as u,a1 as p,A as h,as as b,at as f,au as m,av as j,aw as y}from"./mui-BFxyK2dR.js";import{u as C,a as k,I as v,S as w,b as S}from"./index-CfRD-3Fw.js";import{C as I,P as W}from"./ProductCardSkeleton-C1ieJs8V.js";import{c as z,u as M}from"./router-Di7NXMu_.js";import"./vendor-HnKmhvXM.js";import"./utils-C0SGC0PE.js";import"./imageUtils-BamaHTof.js";const R=()=>{const{categoryId:R}=z(),B=M(),E=e("(max-width:768px)"),L=e("(max-width:1024px)"),{addToCart:_,isLoggedIn:A,login:F}=C(),[P,O]=r.useState(null),[$,H]=r.useState([]),[T,D]=r.useState([]),[q,N]=r.useState([]),[Y,U]=r.useState(!0),[J,V]=r.useState(!1),[X,Z]=r.useState({open:!1,message:"",severity:"success"}),[G,K]=r.useState(null),[Q,ee]=r.useState(!1),[re,te]=r.useState(""),[oe,ne]=r.useState([0,1e5]),[se,ae]=r.useState("newest"),[ie,le]=r.useState(""),[de,ce]=r.useState([]),[xe,ge]=r.useState(!1);r.useEffect(()=>{R&&(O(null),D([]),N([]),U(!0),le(""),ce([]),ge(!1),ue())},[R]),r.useEffect(()=>{pe()},[T,re,oe,se,ie]);const ue=async()=>{try{U(!0),O(null),D([]),N([]);const e=await k.get("/categories"),r=e.data?.categories||[];H(r);const t=parseInt(R),o=r.find(e=>e.category_id===t);O(o),te(R);const n=await k.get(`/products?category_id=${R}`),s=n.data?.products||[];D(s)}catch(e){}finally{U(!1)}},pe=async()=>{let e=[...T];if(ie.trim())try{const r=await k.get(`/search?q=${encodeURIComponent(ie.trim())}`);r.data?.success&&(e=r.data.products||[])}catch(r){const t=ie.toLowerCase().trim();e=e.filter(e=>e.name.toLowerCase().includes(t))}if(re&&re!==R){return void B(`/category/${re}`)}e=e.filter(e=>{const r=parseFloat(e.price)||0;return r>=oe[0]&&r<=oe[1]}),e.sort((e,r)=>{switch(se){case"price-low":return(parseFloat(e.price)||0)-(parseFloat(r.price)||0);case"price-high":return(parseFloat(r.price)||0)-(parseFloat(e.price)||0);case"name":return e.name.localeCompare(r.name);default:return new Date(r.created_at||0)-new Date(e.created_at||0)}}),N(e)},he=e=>{const r=e.target.value;r!==R&&B(`/category/${r}`)},be=(e,r)=>{ne(r)},fe=e=>{ae(e.target.value)},me=async e=>{const r=e.target.value;if(le(r),r.trim().length>0){const e=$.filter(e=>e.category_name.toLowerCase().includes(r.toLowerCase()));ce(e),ge(!0)}else ce([]),ge(!1)},je=e=>{le(""),ge(!1),B(`/category/${e}`)},ye=()=>t.jsxs(o,{sx:{p:2,height:"fit-content",bgcolor:"#fafafa",borderRight:"1px solid #e0e0e0"},children:[t.jsxs(d,{variant:"body2",sx:{color:"#666",mb:2,fontSize:"12px"},children:["Home > ",P?.category_name||"Category"]}),t.jsx(o,{sx:{mb:3},children:t.jsx("button",{onClick:()=>B("/"),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:500,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:"Home"})}),t.jsxs(o,{sx:{mb:3},children:[t.jsx(d,{variant:"h6",sx:{mb:1.5,fontWeight:600,color:"#8B4513",fontSize:"16px"},children:"Categories"}),t.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:.25},children:[t.jsxs("button",{onClick:()=>B("/category/womenswear"),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:400,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:[t.jsx("span",{children:"Women's Wear"}),t.jsx("span",{style:{color:"#666",fontSize:"12px"},children:"+"})]}),t.jsxs("button",{onClick:()=>B("/category/collection"),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:400,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:[t.jsx("span",{children:"Collection"}),t.jsx("span",{style:{color:"#666",fontSize:"12px"},children:"+"})]}),t.jsxs("button",{onClick:()=>B("/category/furnishings"),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:400,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:[t.jsx("span",{children:"Home Furnishings"}),t.jsx("span",{style:{color:"#666",fontSize:"12px"},children:"+"})]}),t.jsx("button",{onClick:()=>B("/special-prices"),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:400,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:"Special Prices"})]})]}),t.jsxs(o,{sx:{mb:3},children:[t.jsx(d,{variant:"h6",sx:{mb:1.5,fontWeight:600,color:"#8B4513",fontSize:"16px"},children:"Price Range"}),t.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:.25},children:[t.jsx("button",{onClick:()=>ne([0,7500]),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:400,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:"Rs. 0 - 7,500"}),t.jsx("button",{onClick:()=>ne([7501,15e3]),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:400,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:"Rs. 7,501 - 15,000"}),t.jsx("button",{onClick:()=>ne([15e3,1e5]),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:400,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:"Rs. 15,000+"})]})]}),t.jsxs(o,{children:[t.jsx(d,{variant:"h6",sx:{mb:2,fontWeight:600,color:"#8B4513",fontSize:"16px"},children:"Filters"}),t.jsxs(o,{sx:{mb:2,position:"relative"},children:[t.jsx(c,{fullWidth:!0,size:"small",placeholder:"Search categories...",value:ie,onChange:me,onFocus:()=>ie&&ge(!0),onBlur:()=>setTimeout(()=>ge(!1),200),sx:{"& .MuiOutlinedInput-root":{borderRadius:1,"& fieldset":{borderColor:"#e0e0e0"},"&:hover fieldset":{borderColor:"#8B4513"},"&.Mui-focused fieldset":{borderColor:"#8B4513"}}},InputProps:{startAdornment:t.jsx(x,{position:"start",children:t.jsx(g,{sx:{color:"#666",fontSize:"18px"}})})}}),xe&&de.length>0&&t.jsx(o,{sx:{position:"absolute",top:"100%",left:0,right:0,zIndex:1e3,bgcolor:"white",border:"1px solid #e0e0e0",borderRadius:1,boxShadow:"0 4px 12px rgba(0,0,0,0.1)",maxHeight:200,overflow:"auto"},children:de.map(e=>t.jsx(o,{onClick:()=>je(e.category_id),sx:{p:2,cursor:"pointer",borderBottom:"1px solid #f0f0f0","&:hover":{bgcolor:"#f5f5f5"},"&:last-child":{borderBottom:"none"}},children:t.jsx(d,{variant:"body2",sx:{fontWeight:500},children:e.category_name})},e.category_id))})]}),t.jsx(o,{sx:{mb:2},children:t.jsxs(b,{fullWidth:!0,size:"small",children:[t.jsx(f,{sx:{color:"#666"},children:"Category"}),t.jsx(m,{value:re,onChange:he,label:"Category",sx:{borderRadius:1,"& .MuiOutlinedInput-notchedOutline":{borderColor:"#e0e0e0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#8B4513"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#8B4513"}},children:$.map(e=>t.jsx(j,{value:e.category_id,children:e.category_name},e.category_id))})]})}),t.jsxs(o,{sx:{mb:2},children:[t.jsxs(d,{variant:"body2",sx:{mb:1,color:"#666"},children:["Price Range: â‚¹",oe[0].toLocaleString()," - â‚¹",oe[1].toLocaleString()]}),t.jsx(y,{value:oe,onChange:be,valueLabelDisplay:"auto",min:0,max:1e5,step:1e3,sx:{color:"#8B4513","& .MuiSlider-thumb":{"&:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 8px rgba(139, 69, 19, 0.16)"}}}})]}),t.jsx(o,{children:t.jsxs(b,{fullWidth:!0,size:"small",children:[t.jsx(f,{sx:{color:"#666"},children:"Sort By"}),t.jsxs(m,{value:se,onChange:fe,label:"Sort By",sx:{borderRadius:1,"& .MuiOutlinedInput-notchedOutline":{borderColor:"#e0e0e0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#8B4513"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#8B4513"}},children:[t.jsx(j,{value:"newest",children:"Newest First"}),t.jsx(j,{value:"price-low",children:"Price: Low to High"}),t.jsx(j,{value:"price-high",children:"Price: High to Low"}),t.jsx(j,{value:"name",children:"Name: A to Z"})]})]})})]})]});return t.jsxs(o,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",py:{xs:2,md:4}},children:[t.jsxs(o,{sx:{maxWidth:1400,mx:"auto"},children:[t.jsxs(o,{sx:{mb:6,p:0,position:"relative",overflow:"hidden",minHeight:"300px",background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:P?.image_url?`url('${P.image_url.startsWith("http")?P.image_url:`${v}${P.image_url}`}')`:`url('${v}/uploads/categories/${w}/${R}.png')`,backgroundSize:"cover",backgroundPosition:"center",opacity:.15,zIndex:0},"&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(248, 249, 250, 0.8) 0%, rgba(233, 236, 239, 0.8) 100%)",zIndex:0},"& > *":{position:"relative",zIndex:1}},children:[t.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,px:4,pt:4},children:[t.jsx(n,{startIcon:t.jsx(s,{}),onClick:()=>B("/"),sx:{color:"#333",textTransform:"none",fontWeight:500,px:3,py:1.5,borderRadius:3,background:"rgba(233, 30, 99, 0.1)","&:hover":{background:"rgba(233, 30, 99, 0.2)",transform:"translateY(-1px)"}},children:"Back to Home"}),E&&t.jsxs(o,{sx:{display:"flex",gap:1},children:[t.jsx(a,{onClick:()=>ee(!0),sx:{color:"#333",background:"rgba(233, 30, 99, 0.1)","&:hover":{background:"rgba(233, 30, 99, 0.2)",transform:"scale(1.1)"}},children:t.jsx(i,{})}),t.jsx(a,{sx:{color:"#333",background:"rgba(233, 30, 99, 0.1)","&:hover":{background:"rgba(233, 30, 99, 0.2)",transform:"scale(1.1)"}},children:t.jsx(l,{})})]})]}),t.jsx(d,{variant:"h4",sx:{fontWeight:700,color:"#2c3e50",fontFamily:'"Inter", sans-serif',fontSize:{xs:"1.8rem",sm:"2.2rem",md:"2.8rem"},mb:2,textAlign:"center",px:4,textShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:Y?"Loading...":P?.category_name||`Category ${R}`||"Category Products"}),t.jsxs(o,{sx:{px:4,mb:3,position:"relative"},children:[t.jsx(c,{fullWidth:!0,placeholder:"Search categories...",value:ie,onChange:me,onFocus:()=>ie&&ge(!0),onBlur:()=>setTimeout(()=>ge(!1),200),sx:{maxWidth:400,mx:"auto","& .MuiOutlinedInput-root":{borderRadius:2,bgcolor:"rgba(255, 255, 255, 0.9)","& fieldset":{borderColor:"#e0e0e0"},"&:hover fieldset":{borderColor:"#E91E63"},"&.Mui-focused fieldset":{borderColor:"#E91E63"}}},InputProps:{startAdornment:t.jsx(x,{position:"start",children:t.jsx(g,{sx:{color:"#666"}})})}}),xe&&de.length>0&&t.jsx(o,{sx:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",zIndex:1e3,bgcolor:"white",border:"1px solid #e0e0e0",borderRadius:1,boxShadow:"0 4px 12px rgba(0,0,0,0.1)",maxHeight:200,overflow:"auto",width:"100%",maxWidth:400},children:de.map(e=>t.jsx(o,{onClick:()=>je(e.category_id),sx:{p:2,cursor:"pointer",borderBottom:"1px solid #f0f0f0","&:hover":{bgcolor:"#f5f5f5"},"&:last-child":{borderBottom:"none"}},children:t.jsx(d,{variant:"body2",sx:{fontWeight:500},children:e.category_name})},e.category_id))})]}),t.jsxs(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,flexWrap:"wrap",px:4,pb:4},children:[t.jsxs(d,{variant:"h6",sx:{color:"#6c757d",fontFamily:'"Inter", sans-serif',fontWeight:500},children:[q.length," product",1!==q.length?"s":""," found"]}),t.jsxs(o,{sx:{display:"flex",gap:3,alignItems:"center"},children:[t.jsx(o,{sx:{background:"linear-gradient(135deg, #E91E63 0%, #C2185B 100%)",color:"white",px:2,py:1,borderRadius:2,fontSize:"0.8rem",fontWeight:600},children:"Best Prices"}),t.jsx(o,{sx:{background:"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)",color:"white",px:2,py:1,borderRadius:2,fontSize:"0.8rem",fontWeight:600},children:"Free Shipping"})]})]})]}),t.jsxs(o,{sx:{display:"flex",gap:{xs:0,md:4},alignItems:"flex-start"},children:[!E&&t.jsx(o,{sx:{width:{md:320,lg:360},position:"sticky",top:20,flexShrink:0},children:t.jsx(o,{sx:{overflow:"hidden"},children:ye()})}),t.jsx(o,{sx:{flex:1,minWidth:0,py:4,px:0},children:Y?t.jsx(o,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(3, 1fr)"},gap:2,justifyContent:"center",alignItems:"start"},children:Array.from({length:9}).map((e,r)=>t.jsx(o,{sx:{width:"100%",maxWidth:"100%",justifySelf:"center"},children:t.jsx(W,{})},r))}):q.length>0?t.jsxs(t.Fragment,{children:[t.jsx(o,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(3, 1fr)"},gap:3,justifyContent:"center",alignItems:"start"},children:(()=>{const e=3*Math.ceil(q.length/3),r=[];for(let n=0;n<e;n++)n<q.length?r.push(t.jsx(o,{sx:{width:"100%",maxWidth:"100%",justifySelf:"center"},children:t.jsx(I,{product:q[n]})},q[n].product_id)):r.push(t.jsx(o,{sx:{width:"100%",maxWidth:"100%",height:"400px",visibility:"hidden"}},`empty-${n}`));return r})()}),q.length>=12&&t.jsx(o,{sx:{textAlign:"center",mt:6,pt:4,borderTop:"1px solid rgba(0, 0, 0, 0.1)"},children:t.jsx(n,{variant:"outlined",size:"large",sx:{px:6,py:2,borderRadius:3,borderColor:"#E91E63",color:"#E91E63",fontWeight:600,fontSize:"1rem","&:hover":{borderColor:"#C2185B",backgroundColor:"rgba(233, 30, 99, 0.04)",transform:"translateY(-2px)"}},children:"Load More Products"})})]}):t.jsxs(o,{sx:{textAlign:"center",py:12,color:"text.secondary"},children:[t.jsx(o,{sx:{width:120,height:120,mx:"auto",mb:4,background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"3rem",color:"#6c757d"},children:"ðŸ”"}),t.jsx(d,{variant:"h5",sx:{mb:2,fontFamily:'"Inter", sans-serif',fontWeight:600,color:"#2c3e50"},children:"No products found"}),t.jsx(d,{variant:"body1",sx:{fontFamily:'"Inter", sans-serif',color:"#6c757d",mb:4},children:"Try adjusting your filters or check back later!"}),t.jsx(n,{variant:"contained",onClick:()=>{te(R),ne([0,1e5]),ae("newest"),le("")},sx:{background:"linear-gradient(135deg, #E91E63 0%, #C2185B 100%)",px:4,py:2,borderRadius:3,fontWeight:600,"&:hover":{background:"linear-gradient(135deg, #C2185B 0%, #AD1457 100%)",transform:"translateY(-2px)"}},children:"Clear All Filters"})]})})]})]}),t.jsx(u,{anchor:"left",open:Q,onClose:()=>ee(!1),PaperProps:{sx:{width:L?320:380}},children:ye()}),t.jsx(S,{open:J,onClose:()=>V(!1),onLoginSuccess:e=>{V(!1),F(e)},message:"Please login to add items to cart"}),t.jsx(p,{open:X.open,autoHideDuration:3e3,onClose:()=>Z({...X,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:t.jsx(h,{onClose:()=>Z({...X,open:!1}),severity:X.severity,sx:{width:"100%",borderRadius:3,fontWeight:500},children:X.message})})]},R)};export{R as default};
