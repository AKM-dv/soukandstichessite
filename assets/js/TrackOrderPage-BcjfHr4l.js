import{r as e,j as r,B as o,aF as t,T as s,P as a,b as n,e as i,f as d,az as l,A as c,i as x,aQ as u,aS as p,t as h,aU as b,am as g,aV as m,aP as f,aW as j,aX as F,aY as v,g as S,aH as y,o as _,p as w}from"./mui-B4o7H9uu.js";import{u as C,b as k}from"./index-DEWzifVT.js";import{d as E,u as W}from"./router-BDKlY_bR.js";import"./vendor-HnKmhvXM.js";import"./utils-yHh8wlql.js";const B=()=>{const[B,$]=e.useState(""),[I,O]=e.useState(null),[P,z]=e.useState(!1),[D,R]=e.useState(null),[M]=E(),A=W(),L=C();e.useEffect(()=>{const e=M.get("orderId");e&&($(e),setTimeout(()=>{Y(e)},100))},[M]);const T=e=>{switch(e?.toLowerCase()){case"delivered":return"#00C851";case"shipped":return"#2196F3";case"packed":return"#FF9800";case"processing":case"confirmed":return"#9C27B0";case"requested":default:return"#4b6f44";case"cancelled":return"#E94560"}},q=(e,r)=>e<r?"completed":e===r?"active":"pending",Y=async(e=null)=>{const r=e||B;if(r.trim()){z(!0),R(null),O(null);try{const e=await k.get(`/orders/${r}/track`);if(e.data&&e.data.success){const r=e.data.order||e.data.tracking||e.data;r&&r.order_id?O(r):R("Order not found. Please check your order ID.")}else R(e.data?.error||"Order not found. Please check your order ID.")}catch(o){404===o.response?.status?R(o.response?.data?.error||"Order not found. Please check your order ID and try again."):500===o.response?.status?R("Server error. Please try again later or contact support."):R(o.response?.data?.error||o.message||"Failed to track order. Please try again later.")}finally{z(!1)}}else R("Please enter an order ID")},U=e=>e?new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return r.jsx(o,{sx:{minHeight:"100vh",backgroundColor:"rgba(205, 197, 181, 0.35)",py:{xs:4,md:6}},children:r.jsxs(t,{maxWidth:"lg",sx:{px:{xs:2,sm:3}},children:[r.jsxs(o,{sx:{textAlign:"center",mb:6},children:[r.jsx(s,{variant:"h2",sx:{fontWeight:700,color:"#4b6f44",fontFamily:'"Inter", sans-serif',fontSize:{xs:"2rem",md:"3rem"},mb:2},children:"Track Your Order"}),r.jsx(s,{variant:"h6",sx:{color:"#6B6B6B",fontWeight:400,maxWidth:600,mx:"auto"},children:"Enter your order ID to track the status of your order"})]}),r.jsx(a,{sx:{p:{xs:3,md:4},mb:6,borderRadius:3,backgroundColor:"#FFFFFF",boxShadow:"0px 4px 20px rgba(75, 111, 68, 0.08)",border:"1px solid rgba(75, 111, 68, 0.05)"},children:r.jsxs(o,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"}},children:[r.jsx(n,{fullWidth:!0,label:"Order ID",placeholder:"e.g., ORD_1234567890",value:B,onChange:e=>$(e.target.value),onKeyPress:e=>{"Enter"===e.key&&Y()},disabled:P,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),r.jsx(i,{variant:"contained",onClick:()=>Y(),disabled:P||!B.trim(),startIcon:P?r.jsx(d,{size:20,color:"inherit"}):r.jsx(l,{}),sx:{minWidth:{xs:"100%",sm:200},py:1.5,borderRadius:2,background:"#4b6f44","&:hover":{background:"linear-gradient(135deg, #16213E 0%, #0F0F1E 100%)"},fontSize:"1rem",fontWeight:600},children:P?"Tracking...":"Track Order"})]})}),D&&r.jsx(c,{severity:"error",sx:{mb:4,borderRadius:2,"& .MuiAlert-message":{fontSize:"1rem"}},onClose:()=>R(null),children:D}),I&&r.jsx(x,{in:!!I,timeout:500,children:r.jsxs(o,{children:[r.jsxs(a,{sx:{p:{xs:3,md:5},mb:4,borderRadius:3,backgroundColor:"#FFFFFF",boxShadow:"0px 4px 20px rgba(75, 111, 68, 0.08)",border:"1px solid rgba(75, 111, 68, 0.05)"},children:[r.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:4,gap:2,p:3,borderRadius:2,bgcolor:`${T(I.order_status)}15`,border:`2px solid ${T(I.order_status)}`,boxShadow:`0 0 20px ${T(I.order_status)}30`},children:[r.jsx(u,{sx:{bgcolor:T(I.order_status),width:64,height:64,boxShadow:`0 4px 12px ${T(I.order_status)}50`,animation:"pulse 2s infinite","@keyframes pulse":{"0%":{boxShadow:`0 4px 12px ${T(I.order_status)}50`},"50%":{boxShadow:`0 4px 20px ${T(I.order_status)}70`},"100%":{boxShadow:`0 4px 12px ${T(I.order_status)}50`}}},children:r.jsx(p,{sx:{fontSize:36,color:"#FFFFFF"}})}),r.jsxs(o,{sx:{flex:1},children:[r.jsxs(s,{variant:"h5",sx:{fontWeight:700,color:T(I.order_status),mb:1},children:["Order #",I.order_id]}),r.jsx(h,{label:(e=>{switch(e?.toLowerCase()){case"requested":return"Order Placed";case"confirmed":return"Confirmed";case"processing":return"Processing";case"packed":return"Packed";case"shipped":return"Shipped";case"delivered":return"Delivered";case"cancelled":return"Cancelled";default:return e||"Unknown"}})(I.order_status),sx:{bgcolor:T(I.order_status),color:"#FFFFFF",fontWeight:700,fontSize:"1rem",height:36,px:1,boxShadow:`0 2px 8px ${T(I.order_status)}40`,animation:"glow 2s infinite","@keyframes glow":{"0%, 100%":{boxShadow:`0 2px 8px ${T(I.order_status)}40`},"50%":{boxShadow:`0 2px 12px ${T(I.order_status)}60`}}}}),r.jsx(s,{variant:"body2",sx:{color:"#6B6B6B",mt:1},children:"Current Status"})]})]}),r.jsx(o,{sx:{mb:4,position:"relative"},children:(()=>{const e=(e=>{switch(e?.toLowerCase()){case"requested":default:return 0;case"confirmed":case"processing":return 1;case"packed":return 2;case"shipped":return 3;case"delivered":return 4}})(I.order_status),t=[{label:"Order Placed",icon:b,description:U(I.created_at)||"Order placed",date:I.created_at},{label:"Confirmed",icon:g,description:"Your order has been confirmed",date:null},{label:"Packed",icon:m,description:"Your order is being prepared for shipment",date:null},{label:"Shipped",icon:p,description:I.shipped_at?U(I.shipped_at):"In transit",date:I.shipped_at,extra:I.awb_code?`AWB: ${I.awb_code}`:null},{label:"Delivered",icon:f,description:I.delivered_at?U(I.delivered_at):"Expected delivery soon",date:I.delivered_at}];return r.jsx(j,{activeStep:e,orientation:"vertical",sx:{"& .MuiStep-root":{"& .MuiStepLabel-root":{"& .MuiStepLabel-label":{"&.Mui-active":{color:T(I.order_status)+" !important",fontWeight:"700 !important"},"&.Mui-completed":{color:"#00C851 !important",fontWeight:"600 !important"}}}},"& .MuiStepConnector-root":{"& .MuiStepConnector-line":{borderLeftWidth:3,borderColor:(r,o)=>o<e?"#00C851":o===e?T(I.order_status):"#E0E0E0"}}},children:t.map((t,a)=>{const n=t.icon,i=q(a,e),d=((e,r)=>{switch(q(e,r)){case"completed":return"#00C851";case"active":return T(I?.order_status||"requested");default:return"#E0E0E0"}})(a,e),l=((e,r)=>{switch(q(e,r)){case"completed":return"#00C851";case"active":return T(I?.order_status||"requested");default:return"#9E9E9E"}})(a,e),c="active"===i,x="completed"===i;return r.jsx(F,{completed:x,active:c,children:r.jsx(v,{StepIconComponent:()=>r.jsxs(o,{sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[x&&r.jsx(g,{sx:{position:"absolute",color:"#FFFFFF",fontSize:20,zIndex:2}}),r.jsx(u,{sx:{bgcolor:d,width:48,height:48,border:c?`3px solid ${d}`:"none",boxShadow:c?`0 0 0 4px ${d}30, 0 4px 12px ${d}50`:x?`0 2px 8px ${d}40`:"none",animation:c?"pulseStep 2s infinite":"none","@keyframes pulseStep":{"0%, 100%":{boxShadow:`0 0 0 4px ${d}30, 0 4px 12px ${d}50`},"50%":{boxShadow:`0 0 0 6px ${d}40, 0 4px 16px ${d}60`}}},children:!x&&r.jsx(n,{sx:{fontSize:24,color:c||x?"#FFFFFF":"#9E9E9E"}})})]}),children:r.jsxs(o,{sx:{p:c?2:1,borderRadius:2,bgcolor:c?`${d}10`:"transparent",border:c?`2px solid ${d}40`:"none",transition:"all 0.3s ease"},children:[r.jsxs(s,{variant:"h6",sx:{fontWeight:c?700:x?600:500,color:l,mb:.5},children:[t.label,c&&r.jsx(h,{label:"Current",size:"small",sx:{ml:1,bgcolor:d,color:"#FFFFFF",fontSize:"0.7rem",height:20,fontWeight:600}}),x&&r.jsx(g,{sx:{ml:1,fontSize:18,color:"#00C851",verticalAlign:"middle"}})]}),r.jsx(s,{variant:"body2",sx:{color:c?"#4B4B4B":x?"#6B6B6B":"#9E9E9E",fontWeight:c?500:400},children:t.description}),t.extra&&r.jsx(s,{variant:"body2",sx:{color:"#4b6f44",fontWeight:600,mt:.5},children:t.extra})]})})},a)})})})()}),r.jsx(S,{sx:{my:4}}),r.jsxs(y,{container:!0,spacing:3,children:[I.tracking_url&&r.jsx(y,{item:!0,xs:12,md:6,children:r.jsx(_,{sx:{bgcolor:"rgba(75, 111, 68, 0.05)",border:"1px solid rgba(75, 111, 68, 0.1)",borderRadius:2},children:r.jsxs(w,{children:[r.jsx(s,{variant:"body2",sx:{color:"#6B6B6B",mb:1},children:"Tracking URL"}),r.jsx(i,{variant:"outlined",href:I.tracking_url,target:"_blank",rel:"noopener noreferrer",fullWidth:!0,sx:{borderColor:"#4b6f44",color:"#4b6f44","&:hover":{borderColor:"#16213E",bgcolor:"rgba(75, 111, 68, 0.1)"}},children:"View Tracking Details"})]})})}),I.awb_code&&r.jsx(y,{item:!0,xs:12,md:6,children:r.jsx(_,{sx:{bgcolor:"rgba(75, 111, 68, 0.05)",border:"1px solid rgba(75, 111, 68, 0.1)",borderRadius:2},children:r.jsxs(w,{children:[r.jsx(s,{variant:"body2",sx:{color:"#6B6B6B",mb:1},children:"AWB Code"}),r.jsx(s,{variant:"h6",sx:{color:"#4b6f44",fontWeight:700,fontFamily:"monospace"},children:I.awb_code})]})})})]})]}),r.jsxs(o,{sx:{display:"flex",gap:2,flexWrap:"wrap",justifyContent:"center"},children:[r.jsx(i,{variant:"contained",onClick:()=>A("/"),sx:{background:"#4b6f44",color:"#ffffff",fontWeight:600,px:4,py:1.5,borderRadius:2,"&:hover":{background:"linear-gradient(135deg, #16213E 0%, #0F0F1E 100%)"}},children:"Continue Shopping"}),r.jsx(i,{variant:"outlined",onClick:()=>L("/account/orders",{},{reloadOn:["/account/orders"]}),sx:{borderColor:"#E94560",color:"#E94560",fontWeight:600,px:4,py:1.5,borderRadius:2,"&:hover":{borderColor:"#C73650",bgcolor:"rgba(233, 69, 96, 0.1)"}},children:"View All Orders"})]})]})})]})})};export{B as default};
