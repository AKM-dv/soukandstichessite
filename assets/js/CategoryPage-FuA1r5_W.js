import{a as e,r as t,j as r,B as o,k as n,aq as s,I as a,ar as i,as as l,T as d,h as c,N as x,aa as u,at as p,a4 as g,A as h,H as f,au as b,J as m,L as j,av as y}from"./mui-BkdcBr42.js";import{u as C,a as k,C as v,b as w,P as S}from"./index-Bs_fyJkj.js";import{c as W,u as I}from"./router-DBmo-Xlv.js";import"./vendor-HnKmhvXM.js";import"./utils-BX9QvN9B.js";const z=()=>{const{categoryId:z}=W(),M=I(),R=e("(max-width:768px)"),B=e("(max-width:1024px)"),{addToCart:E,isLoggedIn:L,login:A}=C(),[F,_]=t.useState(null),[O,P]=t.useState([]),[H,T]=t.useState([]),[D,$]=t.useState([]),[N,Y]=t.useState(!0),[q,J]=t.useState(!1),[U,V]=t.useState({open:!1,message:"",severity:"success"}),[X,Z]=t.useState(null),[G,K]=t.useState(!1),[Q,ee]=t.useState(""),[te,re]=t.useState([0,1e5]),[oe,ne]=t.useState("newest"),[se,ae]=t.useState(""),[ie,le]=t.useState([]),[de,ce]=t.useState(!1);t.useEffect(()=>{z&&xe()},[z]),t.useEffect(()=>{ue()},[H,Q,te,oe,se]);const xe=async()=>{try{Y(!0);const e=await k.get("/categories"),t=e.data?.categories||[];P(t);const r=t.find(e=>e.category_id===z);_(r),ee(z);const o=await k.get(`/products?category_id=${z}`),n=o.data?.products||[];T(n)}catch(e){}finally{Y(!1)}},ue=async()=>{let e=[...H];if(se.trim())try{const t=await k.get(`/search?q=${encodeURIComponent(se.trim())}`);t.data?.success&&(e=t.data.products||[])}catch(t){const r=se.toLowerCase().trim();e=e.filter(e=>e.name.toLowerCase().includes(r))}if(Q&&Q!==z){return void M(`/category/${Q}`)}e=e.filter(e=>{const t=parseFloat(e.price)||0;return t>=te[0]&&t<=te[1]}),e.sort((e,t)=>{switch(oe){case"price-low":return(parseFloat(e.price)||0)-(parseFloat(t.price)||0);case"price-high":return(parseFloat(t.price)||0)-(parseFloat(e.price)||0);case"name":return e.name.localeCompare(t.name);default:return new Date(t.created_at||0)-new Date(e.created_at||0)}}),$(e)},pe=e=>{const t=e.target.value;t!==z&&M(`/category/${t}`)},ge=(e,t)=>{re(t)},he=e=>{ne(e.target.value)},fe=async e=>{const t=e.target.value;if(ae(t),t.trim().length>0){const e=O.filter(e=>e.category_name.toLowerCase().includes(t.toLowerCase()));le(e),ce(!0)}else le([]),ce(!1)},be=e=>{ae(""),ce(!1),M(`/category/${e}`)},me=()=>r.jsxs(o,{sx:{p:2,height:"fit-content",bgcolor:"#fafafa",borderRight:"1px solid #e0e0e0"},children:[r.jsxs(d,{variant:"body2",sx:{color:"#666",mb:2,fontSize:"12px"},children:["Home > ",F?.category_name||"Category"]}),r.jsx(o,{sx:{mb:3},children:r.jsx("button",{onClick:()=>M("/"),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:500,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:"Home"})}),r.jsxs(o,{sx:{mb:3},children:[r.jsx(d,{variant:"h6",sx:{mb:1.5,fontWeight:600,color:"#8B4513",fontSize:"16px"},children:"Categories"}),r.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:.25},children:[r.jsxs("button",{onClick:()=>M("/category/womenswear"),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:400,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:[r.jsx("span",{children:"Women's Wear"}),r.jsx("span",{style:{color:"#666",fontSize:"12px"},children:"+"})]}),r.jsxs("button",{onClick:()=>M("/category/collection"),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:400,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:[r.jsx("span",{children:"Collection"}),r.jsx("span",{style:{color:"#666",fontSize:"12px"},children:"+"})]}),r.jsxs("button",{onClick:()=>M("/category/furnishings"),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:400,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:[r.jsx("span",{children:"Home Furnishings"}),r.jsx("span",{style:{color:"#666",fontSize:"12px"},children:"+"})]}),r.jsx("button",{onClick:()=>M("/special-prices"),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:400,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:"Special Prices"})]})]}),r.jsxs(o,{sx:{mb:3},children:[r.jsx(d,{variant:"h6",sx:{mb:1.5,fontWeight:600,color:"#8B4513",fontSize:"16px"},children:"Price Range"}),r.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:.25},children:[r.jsx("button",{onClick:()=>re([0,7500]),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:400,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:"Rs. 0 - 7,500"}),r.jsx("button",{onClick:()=>re([7501,15e3]),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:400,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:"Rs. 7,501 - 15,000"}),r.jsx("button",{onClick:()=>re([15e3,1e5]),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:400,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:"Rs. 15,000+"})]})]}),r.jsxs(o,{children:[r.jsx(d,{variant:"h6",sx:{mb:2,fontWeight:600,color:"#8B4513",fontSize:"16px"},children:"Filters"}),r.jsxs(o,{sx:{mb:2,position:"relative"},children:[r.jsx(c,{fullWidth:!0,size:"small",placeholder:"Search categories...",value:se,onChange:fe,onFocus:()=>se&&ce(!0),onBlur:()=>setTimeout(()=>ce(!1),200),sx:{"& .MuiOutlinedInput-root":{borderRadius:1,"& fieldset":{borderColor:"#e0e0e0"},"&:hover fieldset":{borderColor:"#8B4513"},"&.Mui-focused fieldset":{borderColor:"#8B4513"}}},InputProps:{startAdornment:r.jsx(x,{position:"start",children:r.jsx(u,{sx:{color:"#666",fontSize:"18px"}})})}}),de&&ie.length>0&&r.jsx(o,{sx:{position:"absolute",top:"100%",left:0,right:0,zIndex:1e3,bgcolor:"white",border:"1px solid #e0e0e0",borderRadius:1,boxShadow:"0 4px 12px rgba(0,0,0,0.1)",maxHeight:200,overflow:"auto"},children:ie.map(e=>r.jsx(o,{onClick:()=>be(e.category_id),sx:{p:2,cursor:"pointer",borderBottom:"1px solid #f0f0f0","&:hover":{bgcolor:"#f5f5f5"},"&:last-child":{borderBottom:"none"}},children:r.jsx(d,{variant:"body2",sx:{fontWeight:500},children:e.category_name})},e.category_id))})]}),r.jsx(o,{sx:{mb:2},children:r.jsxs(f,{fullWidth:!0,size:"small",children:[r.jsx(b,{sx:{color:"#666"},children:"Category"}),r.jsx(m,{value:Q,onChange:pe,label:"Category",sx:{borderRadius:1,"& .MuiOutlinedInput-notchedOutline":{borderColor:"#e0e0e0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#8B4513"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#8B4513"}},children:O.map(e=>r.jsx(j,{value:e.category_id,children:e.category_name},e.category_id))})]})}),r.jsxs(o,{sx:{mb:2},children:[r.jsxs(d,{variant:"body2",sx:{mb:1,color:"#666"},children:["Price Range: â‚¹",te[0].toLocaleString()," - â‚¹",te[1].toLocaleString()]}),r.jsx(y,{value:te,onChange:ge,valueLabelDisplay:"auto",min:0,max:1e5,step:1e3,sx:{color:"#8B4513","& .MuiSlider-thumb":{"&:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 8px rgba(139, 69, 19, 0.16)"}}}})]}),r.jsx(o,{children:r.jsxs(f,{fullWidth:!0,size:"small",children:[r.jsx(b,{sx:{color:"#666"},children:"Sort By"}),r.jsxs(m,{value:oe,onChange:he,label:"Sort By",sx:{borderRadius:1,"& .MuiOutlinedInput-notchedOutline":{borderColor:"#e0e0e0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#8B4513"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#8B4513"}},children:[r.jsx(j,{value:"newest",children:"Newest First"}),r.jsx(j,{value:"price-low",children:"Price: Low to High"}),r.jsx(j,{value:"price-high",children:"Price: High to Low"}),r.jsx(j,{value:"name",children:"Name: A to Z"})]})]})})]})]});return r.jsxs(o,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",py:{xs:2,md:4}},children:[r.jsxs(o,{sx:{maxWidth:1400,mx:"auto"},children:[r.jsxs(o,{sx:{mb:6,p:0,position:"relative",overflow:"hidden",minHeight:"300px","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:`url('https://picsum.photos/1200/400?random=${z||1}')`,backgroundSize:"cover",backgroundPosition:"center",opacity:.1,zIndex:0},"& > *":{position:"relative",zIndex:1}},children:[r.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,px:4,pt:4},children:[r.jsx(n,{startIcon:r.jsx(s,{}),onClick:()=>M("/"),sx:{color:"#333",textTransform:"none",fontWeight:500,px:3,py:1.5,borderRadius:3,background:"rgba(233, 30, 99, 0.1)","&:hover":{background:"rgba(233, 30, 99, 0.2)",transform:"translateY(-1px)"}},children:"Back to Home"}),R&&r.jsxs(o,{sx:{display:"flex",gap:1},children:[r.jsx(a,{onClick:()=>K(!0),sx:{color:"#333",background:"rgba(233, 30, 99, 0.1)","&:hover":{background:"rgba(233, 30, 99, 0.2)",transform:"scale(1.1)"}},children:r.jsx(i,{})}),r.jsx(a,{sx:{color:"#333",background:"rgba(233, 30, 99, 0.1)","&:hover":{background:"rgba(233, 30, 99, 0.2)",transform:"scale(1.1)"}},children:r.jsx(l,{})})]})]}),r.jsx(d,{variant:"h4",sx:{fontWeight:700,color:"#2c3e50",fontFamily:'"Inter", sans-serif',fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},mb:2,textAlign:"center",px:4},children:F?.category_name||"Category Products"}),r.jsxs(o,{sx:{px:4,mb:3,position:"relative"},children:[r.jsx(c,{fullWidth:!0,placeholder:"Search categories...",value:se,onChange:fe,onFocus:()=>se&&ce(!0),onBlur:()=>setTimeout(()=>ce(!1),200),sx:{maxWidth:400,mx:"auto","& .MuiOutlinedInput-root":{borderRadius:2,bgcolor:"rgba(255, 255, 255, 0.9)","& fieldset":{borderColor:"#e0e0e0"},"&:hover fieldset":{borderColor:"#E91E63"},"&.Mui-focused fieldset":{borderColor:"#E91E63"}}},InputProps:{startAdornment:r.jsx(x,{position:"start",children:r.jsx(u,{sx:{color:"#666"}})})}}),de&&ie.length>0&&r.jsx(o,{sx:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",zIndex:1e3,bgcolor:"white",border:"1px solid #e0e0e0",borderRadius:1,boxShadow:"0 4px 12px rgba(0,0,0,0.1)",maxHeight:200,overflow:"auto",width:"100%",maxWidth:400},children:ie.map(e=>r.jsx(o,{onClick:()=>be(e.category_id),sx:{p:2,cursor:"pointer",borderBottom:"1px solid #f0f0f0","&:hover":{bgcolor:"#f5f5f5"},"&:last-child":{borderBottom:"none"}},children:r.jsx(d,{variant:"body2",sx:{fontWeight:500},children:e.category_name})},e.category_id))})]}),r.jsxs(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,flexWrap:"wrap",px:4,pb:4},children:[r.jsxs(d,{variant:"h6",sx:{color:"#6c757d",fontFamily:'"Inter", sans-serif',fontWeight:500},children:[D.length," product",1!==D.length?"s":""," found"]}),r.jsxs(o,{sx:{display:"flex",gap:3,alignItems:"center"},children:[r.jsx(o,{sx:{background:"linear-gradient(135deg, #E91E63 0%, #C2185B 100%)",color:"white",px:2,py:1,borderRadius:2,fontSize:"0.8rem",fontWeight:600},children:"Best Prices"}),r.jsx(o,{sx:{background:"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)",color:"white",px:2,py:1,borderRadius:2,fontSize:"0.8rem",fontWeight:600},children:"Free Shipping"})]})]})]}),r.jsxs(o,{sx:{display:"flex",gap:{xs:0,md:4},alignItems:"flex-start"},children:[!R&&r.jsx(o,{sx:{width:{md:320,lg:360},position:"sticky",top:20,flexShrink:0},children:r.jsx(o,{sx:{overflow:"hidden"},children:me()})}),r.jsx(o,{sx:{flex:1,minWidth:0,py:4,px:0},children:N?r.jsx(o,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(auto-fit, minmax(200px, 1fr))",sm:"repeat(auto-fit, minmax(220px, 1fr))",md:"repeat(auto-fit, minmax(240px, 1fr))",lg:"repeat(auto-fit, minmax(260px, 1fr))"},gap:2,justifyContent:"center",alignItems:"start"},children:Array.from({length:8}).map((e,t)=>r.jsx(o,{sx:{width:"100%",maxWidth:"100%",justifySelf:"center"},children:r.jsx(S,{})},t))}):D.length>0?r.jsxs(r.Fragment,{children:[r.jsx(o,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(auto-fit, minmax(180px, 1fr))",sm:"repeat(auto-fit, minmax(200px, 1fr))",md:"repeat(auto-fit, minmax(220px, 1fr))",lg:"repeat(auto-fit, minmax(240px, 1fr))"},gap:3,justifyContent:"center",alignItems:"start"},children:D.map(e=>r.jsx(o,{sx:{width:"100%",maxWidth:"100%",justifySelf:"center"},children:r.jsx(v,{product:e})},e.product_id))}),D.length>=12&&r.jsx(o,{sx:{textAlign:"center",mt:6,pt:4,borderTop:"1px solid rgba(0, 0, 0, 0.1)"},children:r.jsx(n,{variant:"outlined",size:"large",sx:{px:6,py:2,borderRadius:3,borderColor:"#E91E63",color:"#E91E63",fontWeight:600,fontSize:"1rem","&:hover":{borderColor:"#C2185B",backgroundColor:"rgba(233, 30, 99, 0.04)",transform:"translateY(-2px)"}},children:"Load More Products"})})]}):r.jsxs(o,{sx:{textAlign:"center",py:12,color:"text.secondary"},children:[r.jsx(o,{sx:{width:120,height:120,mx:"auto",mb:4,background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"3rem",color:"#6c757d"},children:"ðŸ”"}),r.jsx(d,{variant:"h5",sx:{mb:2,fontFamily:'"Inter", sans-serif',fontWeight:600,color:"#2c3e50"},children:"No products found"}),r.jsx(d,{variant:"body1",sx:{fontFamily:'"Inter", sans-serif',color:"#6c757d",mb:4},children:"Try adjusting your filters or check back later!"}),r.jsx(n,{variant:"contained",onClick:()=>{ee(z),re([0,1e5]),ne("newest"),ae("")},sx:{background:"linear-gradient(135deg, #E91E63 0%, #C2185B 100%)",px:4,py:2,borderRadius:3,fontWeight:600,"&:hover":{background:"linear-gradient(135deg, #C2185B 0%, #AD1457 100%)",transform:"translateY(-2px)"}},children:"Clear All Filters"})]})})]})]}),r.jsx(p,{anchor:"left",open:G,onClose:()=>K(!1),PaperProps:{sx:{width:B?320:380}},children:me()}),r.jsx(w,{open:q,onClose:()=>J(!1),onLoginSuccess:e=>{J(!1),A(e)},message:"Please login to add items to cart"}),r.jsx(g,{open:U.open,autoHideDuration:3e3,onClose:()=>V({...U,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(h,{onClose:()=>V({...U,open:!1}),severity:U.severity,sx:{width:"100%",borderRadius:3,fontWeight:500},children:U.message})})]})};export{z as default};
