import{r as e,j as t,ay as s,B as r,C as a,A as n,T as i,P as c,x as d,aA as l,p as o,q as x,am as m,aT as h,aV as j,aW as y,aX as u,aY as p,aZ as g,a_ as b,v,w as f,aJ as _,a$ as w,aM as I,aU as C,b0 as B}from"./mui-DNFLHsKH.js";import{a as P}from"./index-BhCXqEsx.js";import"./vendor-HnKmhvXM.js";import"./utils-n36L7CQ6.js";import"./router-D0-id3Zg.js";const A=()=>{const[A,N]=e.useState([]),[D,S]=e.useState(!0),[L,T]=e.useState(null);e.useEffect(()=>{F()},[]);const F=async()=>{try{S(!0),T(null);const e=await P.get("/customer/payments");e.data.success?N(e.data.payments):T("Failed to fetch payments")}catch(e){T(e.response?.data?.error||"Failed to fetch payments")}finally{S(!1)}},W=e=>{switch(e?.toLowerCase()){case"completed":case"success":return"success";case"pending":return"warning";case"failed":case"cancelled":return"error";default:return"default"}},z=e=>{switch(e?.toLowerCase()){case"completed":case"success":return t.jsx(m,{});case"pending":return t.jsx(h,{});case"failed":return t.jsx(B,{});case"cancelled":return t.jsx(C,{});default:return t.jsx(d,{})}},U=e=>{switch(e?.toLowerCase()){case"razorpay":default:return t.jsx(d,{});case"card":return t.jsx(I,{});case"bank_transfer":return t.jsx(w,{});case"cod":return t.jsx(_,{})}},H=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",M=(e,t="INR")=>e?new Intl.NumberFormat("en-IN",{style:"currency",currency:t||"INR"}).format(e):"₹0.00";return D?t.jsx(s,{maxWidth:"lg",sx:{py:4},children:t.jsx(r,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:t.jsx(a,{})})}):L?t.jsx(s,{maxWidth:"lg",sx:{py:4},children:t.jsx(n,{severity:"error",sx:{mb:3},children:L})}):t.jsxs(s,{maxWidth:"lg",sx:{py:4},children:[t.jsxs(r,{sx:{mb:4},children:[t.jsx(i,{variant:"h4",component:"h1",gutterBottom:!0,children:"Payment History"}),t.jsx(i,{variant:"body1",color:"text.secondary",children:"View all your payment transactions and their status"})]}),0===A.length?t.jsxs(c,{sx:{p:4,textAlign:"center"},children:[t.jsx(d,{sx:{fontSize:64,color:"text.secondary",mb:2}}),t.jsx(i,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Payment History"}),t.jsx(i,{variant:"body2",color:"text.secondary",children:"You haven't made any payments yet. Your payment history will appear here after you place orders."})]}):t.jsxs(l,{container:!0,spacing:3,children:[t.jsx(l,{item:!0,xs:12,md:4,children:t.jsx(o,{children:t.jsxs(x,{children:[t.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(m,{color:"success",sx:{mr:1}}),t.jsx(i,{variant:"h6",children:"Successful"})]}),t.jsx(i,{variant:"h4",color:"success.main",children:A.filter(e=>"completed"===e.payment_status?.toLowerCase()).length}),t.jsx(i,{variant:"body2",color:"text.secondary",children:"Completed payments"})]})})}),t.jsx(l,{item:!0,xs:12,md:4,children:t.jsx(o,{children:t.jsxs(x,{children:[t.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(h,{color:"warning",sx:{mr:1}}),t.jsx(i,{variant:"h6",children:"Pending"})]}),t.jsx(i,{variant:"h4",color:"warning.main",children:A.filter(e=>"pending"===e.payment_status?.toLowerCase()).length}),t.jsx(i,{variant:"body2",color:"text.secondary",children:"Pending payments"})]})})}),t.jsx(l,{item:!0,xs:12,md:4,children:t.jsx(o,{children:t.jsxs(x,{children:[t.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(d,{color:"primary",sx:{mr:1}}),t.jsx(i,{variant:"h6",children:"Total"})]}),t.jsx(i,{variant:"h4",color:"primary.main",children:M(A.reduce((e,t)=>e+(t.amount||0),0))}),t.jsx(i,{variant:"body2",color:"text.secondary",children:"Total amount paid"})]})})}),t.jsx(l,{item:!0,xs:12,children:t.jsx(o,{children:t.jsxs(x,{children:[t.jsx(i,{variant:"h6",gutterBottom:!0,children:"Recent Payments"}),t.jsx(j,{children:t.jsxs(y,{children:[t.jsx(u,{children:t.jsxs(p,{children:[t.jsx(g,{children:"Payment ID"}),t.jsx(g,{children:"Order ID"}),t.jsx(g,{children:"Amount"}),t.jsx(g,{children:"Method"}),t.jsx(g,{children:"Status"}),t.jsx(g,{children:"Date"})]})}),t.jsx(b,{children:A.map(e=>t.jsxs(p,{children:[t.jsx(g,{children:t.jsx(i,{variant:"body2",sx:{fontFamily:"monospace"},children:e.payment_id})}),t.jsx(g,{children:t.jsxs(i,{variant:"body2",color:"primary",children:["#",e.order_id]})}),t.jsx(g,{children:t.jsx(i,{variant:"body2",sx:{fontWeight:600},children:M(e.amount,e.currency)})}),t.jsx(g,{children:t.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[U(e.payment_method),t.jsx(i,{variant:"body2",children:e.payment_method?.toUpperCase()||"N/A"})]})}),t.jsx(g,{children:t.jsx(v,{icon:z(e.payment_status),label:e.payment_status,color:W(e.payment_status),size:"small"})}),t.jsx(g,{children:t.jsx(i,{variant:"body2",children:H(e.created_at)})})]},e.payment_id))})]})})]})})}),t.jsx(l,{item:!0,xs:12,children:t.jsx(i,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Payment Details"})}),A.map(e=>t.jsx(l,{item:!0,xs:12,children:t.jsx(o,{children:t.jsxs(x,{children:[t.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[t.jsxs(r,{children:[t.jsxs(i,{variant:"h6",component:"h2",gutterBottom:!0,children:["Payment #",e.payment_id]}),t.jsxs(i,{variant:"body2",color:"text.secondary",children:["Order #",e.order_id," • ",H(e.created_at)]})]}),t.jsxs(r,{sx:{textAlign:"right"},children:[t.jsx(i,{variant:"h6",color:"primary",gutterBottom:!0,children:M(e.amount,e.currency)}),t.jsx(v,{icon:z(e.payment_status),label:e.payment_status,color:W(e.payment_status),size:"small"})]})]}),t.jsx(f,{sx:{my:2}}),t.jsxs(l,{container:!0,spacing:2,children:[t.jsxs(l,{item:!0,xs:12,md:6,children:[t.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Payment Method"}),t.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[U(e.payment_method),t.jsx(i,{variant:"body2",children:e.payment_method?.toUpperCase()||"N/A"})]}),e.transaction_id&&t.jsxs(t.Fragment,{children:[t.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Transaction ID"}),t.jsx(i,{variant:"body2",sx:{fontFamily:"monospace",mb:2},children:e.transaction_id})]})]}),t.jsxs(l,{item:!0,xs:12,md:6,children:[t.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Customer Details"}),t.jsx(i,{variant:"body2",sx:{mb:1},children:e.customer_name||"N/A"}),t.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Order Total"}),t.jsx(i,{variant:"body2",children:M(e.order_total,e.currency)})]})]}),e.updated_at&&e.updated_at!==e.created_at&&t.jsx(r,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:t.jsxs(i,{variant:"caption",color:"text.secondary",children:["Last updated: ",H(e.updated_at)]})})]})})},e.payment_id))]})]})};export{A as default};
