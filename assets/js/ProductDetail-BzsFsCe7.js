import{a as e,j as i,B as r,k as a,u as n,r as s,T as t,i as o,am as d,an as l,o as c,I as x,a4 as f,a5 as g,ad as h,t as m,l as b,W as u,ao as p,ap as j,aq as v,ar as k,as as w,at as y,au as S,p as F,D as z,b as A,d as C,g as W,h as _,ab as R,A as I,av as E}from"./mui-C7nK-0ZR.js";import{u as B,a as P,L,b as D,I as T,S as $}from"./index-fiSwrUpV.js";import{c as H,u as M}from"./router-DoZmC-hp.js";import"./vendor-HnKmhvXM.js";import"./utils-fGN9A5xN.js";const O=()=>{const n=e("(max-width:768px)");return i.jsx(r,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",py:{xs:2,md:4}},children:i.jsxs(r,{sx:{maxWidth:1400,mx:"auto",px:{xs:2,md:4}},children:[i.jsx(r,{sx:{mb:4},children:i.jsx(a,{variant:"text",width:"40%",height:24})}),i.jsxs(r,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:4,alignItems:"flex-start"},children:[i.jsx(r,{sx:{flex:{xs:"1",md:"0 0 45%"},maxWidth:{xs:"100%",md:"45%"}},children:i.jsxs(r,{sx:{borderRadius:4,overflow:"hidden",background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)",boxShadow:"0 20px 60px rgba(0,0,0,0.1)"},children:[i.jsx(a,{variant:"rectangular",width:"100%",height:n?350:500,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(r,{sx:{display:"flex",gap:2,p:3,overflowX:"auto",background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)"},children:Array.from({length:4}).map((e,r)=>i.jsx(a,{variant:"rectangular",width:90,height:90,sx:{borderRadius:3,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}},r))})]})}),i.jsx(r,{sx:{flex:{xs:"1",md:"0 0 55%"},maxWidth:{xs:"100%",md:"55%"}},children:i.jsxs(r,{sx:{bgcolor:"#FFFFFF",borderRadius:4,p:5,boxShadow:"0 20px 60px rgba(0,0,0,0.1)",background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)"},children:[i.jsx(a,{variant:"text",width:"90%",height:60,sx:{mb:3,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[i.jsx(a,{variant:"rectangular",width:100,height:20,sx:{borderRadius:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(a,{variant:"text",width:80,height:20,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),i.jsxs(r,{sx:{mb:4},children:[i.jsx(a,{variant:"text",width:"40%",height:50,sx:{mb:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(a,{variant:"rectangular",width:120,height:30,sx:{borderRadius:2,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:3},children:[i.jsx(a,{variant:"circular",width:8,height:8,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(a,{variant:"text",width:100,height:20,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),i.jsxs(r,{sx:{mb:3},children:[i.jsx(a,{variant:"text",width:80,height:24,sx:{mb:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[i.jsx(a,{variant:"circular",width:40,height:40,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(a,{variant:"text",width:40,height:24,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(a,{variant:"circular",width:40,height:40,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]})]}),i.jsxs(r,{sx:{display:"flex",gap:2,mb:3},children:[i.jsx(a,{variant:"rectangular",width:"70%",height:56,sx:{borderRadius:2,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(a,{variant:"circular",width:56,height:56,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(a,{variant:"circular",width:56,height:56,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),i.jsx(r,{sx:{mb:3},children:Array.from({length:3}).map((e,n)=>i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[i.jsx(a,{variant:"circular",width:20,height:20,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(a,{variant:"text",width:"60%",height:20,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]},n))})]})})]}),i.jsx(r,{sx:{mt:4},children:i.jsxs(r,{sx:{borderRadius:4,boxShadow:"0px 8px 32px rgba(26, 26, 46, 0.08)",border:"1px solid rgba(26, 26, 46, 0.05)",p:4,bgcolor:"#ffffff"},children:[i.jsx(a,{variant:"text",width:"40%",height:40,sx:{mb:3,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),Array.from({length:4}).map((e,r)=>i.jsx(a,{variant:"text",width:3===r?"60%":"100%",height:20,sx:{mb:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}},r))]})}),i.jsx(r,{sx:{mt:4},children:i.jsxs(r,{sx:{borderRadius:4,boxShadow:"0 20px 60px rgba(0,0,0,0.1)",background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)",p:4},children:[i.jsx(a,{variant:"text",width:"30%",height:40,sx:{mb:3,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:4,mb:4,p:3,background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",borderRadius:3},children:[i.jsxs(r,{sx:{textAlign:"center"},children:[i.jsx(a,{variant:"text",width:60,height:60,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(a,{variant:"rectangular",width:100,height:20,sx:{mt:1,borderRadius:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),i.jsx(r,{sx:{flex:1},children:Array.from({length:5}).map((e,n)=>i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[i.jsx(a,{variant:"text",width:20,height:20,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(a,{variant:"rectangular",width:"100%",height:8,sx:{borderRadius:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]},n))})]}),Array.from({length:3}).map((e,n)=>i.jsxs(r,{sx:{p:3,border:"1px solid #e9ecef",borderRadius:3,background:"#ffffff",mb:2},children:[i.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[i.jsxs(r,{children:[i.jsx(a,{variant:"text",width:120,height:20,sx:{mb:.5,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(a,{variant:"rectangular",width:80,height:16,sx:{borderRadius:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),i.jsx(a,{variant:"text",width:80,height:16,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),i.jsx(a,{variant:"text",width:"100%",height:20,sx:{mb:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(a,{variant:"text",width:"80%",height:20,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]},n))]})})]})})},Y=()=>{const{productId:a}=H(),Y=M(),N=n();e(N.breakpoints.down("md"));const{addToCart:Q,isLoggedIn:V,login:X}=B(),[q,G]=s.useState(null),[U,J]=s.useState(!0),[K,Z]=s.useState(null),[ee,ie]=s.useState(0),[re,ae]=s.useState({}),[ne,se]=s.useState(1),[te,oe]=s.useState(!1),[de,le]=s.useState(!1),[ce,xe]=s.useState({open:!1,message:"",severity:"success"}),[fe,ge]=s.useState(!1),[he,me]=s.useState(!1),[be,ue]=s.useState([]),[pe,je]=s.useState(null),[ve,ke]=s.useState(!1),[we,ye]=s.useState(!1),[Se,Fe]=s.useState({customer_name:"",customer_email:"",rating:5,review_text:""});s.useEffect(()=>{a&&(ze(),setTimeout(()=>{Ae()},500))},[a]);const ze=async()=>{try{J(!0);const e=await P.get(`/product/${a}`);if(e.data?.success&&e.data?.product){const i=e.data.product,r=(e=>{const i=[];return i.push(`${T}/uploads/products/${$}/${e}_v1.png`),i})(i.product_id);if(G({...i,images:r,mainImage:r[0]||i.image}),i.variants&&i.variants.length>0){const e={};i.variants.forEach(i=>{i.values&&i.values.length>0&&(e[i.name]=i.values[0])}),ae(e)}}else Z("Product not found")}catch(e){Z("Failed to load product")}finally{J(!1)}},Ae=async()=>{try{ke(!0);const[e,i]=await Promise.all([P.get(`/product/${a}/reviews`),P.get(`/product/${a}/reviews/summary`)]);e.data?.success&&ue(e.data.reviews||[]),i.data?.success&&je(i.data.summary)}catch(e){}finally{ke(!1)}},Ce=async()=>{if(V){oe(!0);try{await Q(q,ne,re),xe({open:!0,message:"Added to cart successfully!",severity:"success"})}catch(e){"LOGIN_REQUIRED"===e.message?le(!0):xe({open:!0,message:e.message||"Failed to add to cart",severity:"error"})}finally{oe(!1)}}else le(!0)},We=(()=>{if(q?.original_price&&q?.price<q.original_price){const e=(q.original_price-q.price)/q.original_price*100;return Math.round(e)}return 0})();return U?i.jsx(O,{}):K||!q?i.jsxs(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",flexDirection:"column",gap:2},children:[i.jsx(t,{variant:"h5",sx:{color:"#1A1A2E",fontWeight:600},children:K||"Product not found"}),i.jsx(o,{variant:"contained",onClick:()=>Y("/"),sx:{background:"linear-gradient(135deg, #1A1A2E 0%, #16213E 100%)","&:hover":{background:"linear-gradient(135deg, #16213E 0%, #0F0F1E 100%)"}},children:"Back to Home"})]}):i.jsxs(r,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",py:{xs:2,md:4}},children:[i.jsxs(r,{sx:{maxWidth:1400,mx:"auto",px:{xs:2,md:4}},children:[i.jsx(r,{sx:{mb:4},children:i.jsxs(d,{separator:"›",sx:{"& .MuiBreadcrumbs-separator":{color:"#6c757d",fontSize:"1.2rem",fontWeight:600}},children:[i.jsx(l,{underline:"hover",color:"#6c757d",href:"/",sx:{cursor:"pointer",fontSize:"0.95rem",fontWeight:500,transition:"color 0.3s ease","&:hover":{color:"#e74c3c"}},children:"Home"}),i.jsx(t,{color:"#2c3e50",sx:{fontWeight:600,fontSize:"0.95rem"},children:q.name})]})}),i.jsxs(r,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:4,alignItems:"flex-start"},children:[i.jsx(r,{sx:{flex:{xs:"1",md:"0 0 45%"},maxWidth:{xs:"100%",md:"45%"}},children:i.jsxs(c,{sx:{borderRadius:4,boxShadow:"0 20px 60px rgba(0,0,0,0.1)",border:"none",overflow:"hidden",background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)"},children:[i.jsxs(r,{sx:{position:"relative"},children:[We>0&&i.jsxs(r,{sx:{position:"absolute",top:20,left:20,background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)",color:"white",px:2,py:1,borderRadius:3,fontSize:"0.9rem",fontWeight:700,fontFamily:"Inter, sans-serif",zIndex:2,boxShadow:"0 4px 15px rgba(238, 90, 36, 0.3)"},children:["SALE ",We,"%"]}),i.jsx(r,{sx:{position:"relative",overflow:"hidden",background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)"},children:i.jsx(L,{src:q.images[ee]||q.mainImage,alt:q.name,height:500,placeholder:"Loading product image...",sx:{width:"100%",height:{xs:350,md:500},objectFit:"contain",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}}})}),q.images.length>1&&i.jsxs(i.Fragment,{children:[i.jsx(x,{onClick:()=>ie(e=>0===e?q.images.length-1:e-1),sx:{position:"absolute",left:20,top:"50%",transform:"translateY(-50%)",bgcolor:"rgba(255, 255, 255, 0.95)",color:"#2c3e50",width:48,height:48,backdropFilter:"blur(10px)",boxShadow:"0 4px 20px rgba(0,0,0,0.1)","&:hover":{bgcolor:"#ffffff",transform:"translateY(-50%) scale(1.1)",boxShadow:"0 6px 25px rgba(0,0,0,0.15)"}},children:i.jsx(f,{sx:{fontSize:20}})}),i.jsx(x,{onClick:()=>ie(e=>e===q.images.length-1?0:e+1),sx:{position:"absolute",right:20,top:"50%",transform:"translateY(-50%)",bgcolor:"rgba(255, 255, 255, 0.95)",color:"#2c3e50",width:48,height:48,backdropFilter:"blur(10px)",boxShadow:"0 4px 20px rgba(0,0,0,0.1)","&:hover":{bgcolor:"#ffffff",transform:"translateY(-50%) scale(1.1)",boxShadow:"0 6px 25px rgba(0,0,0,0.15)"}},children:i.jsx(g,{sx:{fontSize:20}})})]})]}),q.images.length>1&&i.jsx(r,{sx:{display:"flex",gap:2,p:3,overflowX:"auto",background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)","&::-webkit-scrollbar":{height:6},"&::-webkit-scrollbar-thumb":{bgcolor:"#dee2e6",borderRadius:3,"&:hover":{bgcolor:"#adb5bd"}}},children:q.images.map((e,a)=>i.jsx(r,{onClick:()=>ie(a),sx:{minWidth:90,height:90,borderRadius:3,overflow:"hidden",cursor:"pointer",border:ee===a?"3px solid #e74c3c":"3px solid #e9ecef",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:ee===a?"0 8px 25px rgba(231, 76, 60, 0.3)":"0 2px 10px rgba(0,0,0,0.1)","&:hover":{borderColor:"#e74c3c",transform:"scale(1.05)",boxShadow:"0 8px 25px rgba(231, 76, 60, 0.3)"}},children:i.jsx(L,{src:e,alt:`${q.name} ${a+1}`,height:90,sx:{width:"100%",height:"100%",objectFit:"cover"},placeholder:"Loading..."})},a))})]})}),i.jsx(r,{sx:{flex:{xs:"1",md:"0 0 55%"},maxWidth:{xs:"100%",md:"55%"}},children:i.jsxs(r,{sx:{bgcolor:"#FFFFFF",borderRadius:4,p:5,boxShadow:"0 20px 60px rgba(0,0,0,0.1)",border:"none",height:"fit-content",background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)"},children:[i.jsx(t,{variant:"h3",sx:{fontWeight:700,color:"#2c3e50",mb:3,fontFamily:"Inter, sans-serif",lineHeight:1.3,fontSize:{xs:"1.8rem",md:"2.2rem"}},children:q.name}),i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[i.jsx(r,{sx:{display:"flex",gap:.5},children:[...Array(5)].map((e,r)=>i.jsx(h,{sx:{fontSize:20,color:r<4?"#ffc107":"#e0e0e0"}},r))}),i.jsx(t,{sx:{color:"#6c757d",fontSize:"0.95rem",fontWeight:500},children:"(0 reviews)"}),i.jsx(o,{variant:"outlined",size:"small",onClick:()=>ye(!0),sx:{borderColor:"#e74c3c",color:"#e74c3c",fontSize:"0.8rem",px:2,py:.5,"&:hover":{borderColor:"#c0392b",backgroundColor:"rgba(231, 76, 60, 0.04)"}},children:"Write a review"})]}),i.jsxs(r,{sx:{mb:4},children:[i.jsxs(r,{sx:{display:"flex",alignItems:"baseline",gap:2,mb:1},children:[i.jsxs(t,{variant:"h3",sx:{color:"#e74c3c",fontWeight:700,fontFamily:"Inter, sans-serif",fontSize:{xs:"1.8rem",md:"2.2rem"}},children:["₹",q.price.toLocaleString()]}),q.original_price&&q.original_price>q.price&&i.jsxs(t,{variant:"h5",sx:{color:"#6c757d",textDecoration:"line-through",fontWeight:500,fontSize:{xs:"1.2rem",md:"1.4rem"}},children:["₹",q.original_price.toLocaleString()]})]}),We>0&&i.jsx(r,{sx:{display:"inline-flex",alignItems:"center",gap:1,background:"linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)",color:"white",px:2,py:1,borderRadius:2,fontSize:"0.9rem",fontWeight:600,fontFamily:"Inter, sans-serif",boxShadow:"0 4px 15px rgba(231, 76, 60, 0.3)"},children:i.jsxs(t,{sx:{fontSize:"0.9rem",fontWeight:600},children:["Save ",We,"% (₹",(q.original_price-q.price).toLocaleString(),")"]})})]}),i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:3},children:[i.jsx(r,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:q.in_stock?"#00C851":"#FF4444"}}),i.jsx(t,{variant:"body1",sx:{color:q.in_stock?"#00C851":"#FF4444",fontWeight:600},children:q.in_stock?`${q.stock} in stock`:"Out of stock"})]}),q.variants&&q.variants.length>0&&i.jsx(r,{sx:{mb:3},children:q.variants.map((e,a)=>i.jsxs(r,{sx:{mb:2},children:[i.jsxs(t,{variant:"subtitle1",sx:{fontWeight:600,color:"#1A1A2E",mb:1,textTransform:"capitalize"},children:[e.name,":"]}),i.jsx(r,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:e.values.map(r=>i.jsx(m,{label:r,onClick:()=>ae(i=>({...i,[e.name]:r})),variant:re[e.name]===r?"filled":"outlined",sx:{bgcolor:re[e.name]===r?"#E94560":"transparent",color:re[e.name]===r?"#FFFFFF":"#1A1A2E",borderColor:"#E94560",fontWeight:500,"&:hover":{bgcolor:re[e.name]===r?"#C73650":"rgba(233, 69, 96, 0.1)"}}},r))})]},a))}),i.jsxs(r,{sx:{mb:3},children:[i.jsx(t,{variant:"subtitle1",sx:{fontWeight:600,color:"#1A1A2E",mb:1},children:"Quantity:"}),i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[i.jsx(x,{onClick:()=>se(e=>Math.max(1,e-1)),disabled:ne<=1,sx:{bgcolor:"#F5F5F5",color:"#1A1A2E","&:hover":{bgcolor:"#E94560",color:"#FFFFFF"},"&:disabled":{bgcolor:"#F5F5F5",color:"#B8B8B8"}},children:"-"}),i.jsx(t,{variant:"h6",sx:{minWidth:40,textAlign:"center",fontWeight:600,color:"#1A1A2E"},children:ne}),i.jsx(x,{onClick:()=>se(e=>Math.min(q.stock||10,e+1)),disabled:ne>=(q.stock||10),sx:{bgcolor:"#F5F5F5",color:"#1A1A2E","&:hover":{bgcolor:"#E94560",color:"#FFFFFF"},"&:disabled":{bgcolor:"#F5F5F5",color:"#B8B8B8"}},children:"+"})]})]}),i.jsxs(r,{sx:{display:"flex",gap:2,mb:3},children:[i.jsx(o,{variant:"contained",size:"large",onClick:Ce,disabled:te||!q.in_stock,startIcon:i.jsx(b,{}),sx:{flex:1,py:2,background:q.in_stock?"linear-gradient(135deg, #1A1A2E 0%, #16213E 100%)":"#8B8B8B","&:hover":{background:q.in_stock?"linear-gradient(135deg, #16213E 0%, #0F0F1E 100%)":"#8B8B8B",boxShadow:"0px 8px 24px rgba(26, 26, 46, 0.25)",transform:"translateY(-2px)"},"&:disabled":{background:"#8B8B8B",color:"#FFFFFF"}},children:te?"Adding...":q.in_stock?"Add to Cart":"Out of Stock"}),i.jsx(x,{onClick:()=>{V?(ge(!fe),xe({open:!0,message:fe?"Removed from wishlist":"Added to wishlist",severity:"success"})):le(!0)},sx:{bgcolor:fe?"#E94560":"#F5F5F5",color:fe?"#FFFFFF":"#1A1A2E",width:56,height:56,"&:hover":{bgcolor:fe?"#C73650":"#E94560",color:"#FFFFFF",transform:"scale(1.1)"}},children:fe?i.jsx(u,{}):i.jsx(p,{})}),i.jsx(x,{onClick:()=>{me(!0)},sx:{bgcolor:"#F5F5F5",color:"#1A1A2E",width:56,height:56,"&:hover":{bgcolor:"#E94560",color:"#FFFFFF",transform:"scale(1.1)"}},children:i.jsx(j,{})})]}),i.jsx(r,{sx:{mb:3},children:i.jsxs(v,{dense:!0,children:[i.jsxs(k,{sx:{px:0},children:[i.jsx(w,{children:i.jsx(y,{sx:{color:"#00C851"}})}),i.jsx(S,{primary:"Free Shipping Pan India",primaryTypographyProps:{sx:{color:"#1A1A2E",fontWeight:500}}})]}),i.jsxs(k,{sx:{px:0},children:[i.jsx(w,{children:i.jsx(y,{sx:{color:"#00C851"}})}),i.jsx(S,{primary:"All Taxes Included",primaryTypographyProps:{sx:{color:"#1A1A2E",fontWeight:500}}})]}),i.jsxs(k,{sx:{px:0},children:[i.jsx(w,{children:i.jsx(y,{sx:{color:"#00C851"}})}),i.jsx(S,{primary:"7 Days Return Policy",primaryTypographyProps:{sx:{color:"#1A1A2E",fontWeight:500}}})]})]})})]})})]}),q.description&&i.jsx(r,{sx:{mt:4},children:i.jsx(c,{sx:{borderRadius:4,boxShadow:"0px 8px 32px rgba(26, 26, 46, 0.08)",border:"1px solid rgba(26, 26, 46, 0.05)"},children:i.jsxs(F,{sx:{p:4},children:[i.jsx(t,{variant:"h5",sx:{fontWeight:600,color:"#1A1A2E",mb:3,fontFamily:'"Inter", sans-serif'},children:"Product Description"}),i.jsx(r,{sx:{color:"#1A1A2E",lineHeight:1.6,"& p":{mb:2},"& ul":{pl:3},"& li":{mb:1}},dangerouslySetInnerHTML:{__html:q.description}})]})})}),i.jsx(r,{sx:{mt:4},children:i.jsx(c,{sx:{borderRadius:4,boxShadow:"0 20px 60px rgba(0,0,0,0.1)",border:"none",background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)"},children:i.jsxs(F,{sx:{p:4},children:[i.jsx(t,{variant:"h4",sx:{fontWeight:700,color:"#2c3e50",mb:3,fontFamily:"Inter, sans-serif"},children:"Customer Reviews"}),pe&&i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:4,mb:4,p:3,background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",borderRadius:3},children:[i.jsxs(r,{sx:{textAlign:"center"},children:[i.jsx(t,{variant:"h2",sx:{fontWeight:700,color:"#e74c3c",fontFamily:"Inter, sans-serif"},children:pe.average_rating?.toFixed(1)||"0.0"}),i.jsx(r,{sx:{display:"flex",gap:.5,justifyContent:"center",mb:1},children:[...Array(5)].map((e,r)=>i.jsx(h,{sx:{fontSize:20,color:r<Math.floor(pe.average_rating||0)?"#ffc107":"#e0e0e0"}},r))}),i.jsxs(t,{sx:{color:"#6c757d",fontSize:"0.9rem"},children:["Based on ",pe.total_reviews," reviews"]})]}),i.jsx(r,{sx:{flex:1},children:[5,4,3,2,1].map(e=>i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[i.jsx(t,{sx:{minWidth:20,fontSize:"0.9rem"},children:e}),i.jsx(h,{sx:{fontSize:16,color:"#ffc107"}}),i.jsx(r,{sx:{flex:1,height:8,bgcolor:"#e9ecef",borderRadius:1,overflow:"hidden"},children:i.jsx(r,{sx:{height:"100%",width:`${pe.rating_percentages?.[e]||0}%`,bgcolor:"#e74c3c",transition:"width 0.3s ease"}})}),i.jsx(t,{sx:{minWidth:30,fontSize:"0.8rem",color:"#6c757d"},children:pe.rating_distribution?.[e]||0})]},e))})]}),ve?i.jsx(r,{sx:{display:"flex",justifyContent:"center",py:4},children:i.jsx(r,{sx:{width:40,height:40,border:"3px solid #e74c3c",borderTop:"3px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):be.length>0?i.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:3},children:[be.slice(0,5).map(e=>i.jsxs(r,{sx:{p:3,border:"1px solid #e9ecef",borderRadius:3,background:"#ffffff"},children:[i.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[i.jsxs(r,{children:[i.jsx(t,{sx:{fontWeight:600,color:"#2c3e50",mb:.5},children:e.customer_name}),i.jsx(r,{sx:{display:"flex",gap:.5},children:[...Array(5)].map((r,a)=>i.jsx(h,{sx:{fontSize:16,color:a<e.rating?"#ffc107":"#e0e0e0"}},a))})]}),i.jsx(t,{sx:{color:"#6c757d",fontSize:"0.8rem"},children:new Date(e.created_at).toLocaleDateString()})]}),i.jsx(t,{sx:{color:"#2c3e50",lineHeight:1.6,mb:2},children:e.review_text}),e.is_verified_purchase&&i.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:.5,mb:2},children:[i.jsx(y,{sx:{fontSize:16,color:"#28a745"}}),i.jsx(t,{sx:{fontSize:"0.8rem",color:"#28a745",fontWeight:500},children:"Verified Purchase"})]}),e.admin_reply&&i.jsxs(r,{sx:{mt:2,p:2,background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",borderRadius:2,borderLeft:"4px solid #e74c3c"},children:[i.jsx(t,{sx:{fontSize:"0.9rem",fontWeight:600,color:"#e74c3c",mb:1},children:"Admin Reply:"}),i.jsx(t,{sx:{color:"#2c3e50",fontSize:"0.9rem"},children:e.admin_reply}),e.admin_reply_date&&i.jsx(t,{sx:{fontSize:"0.8rem",color:"#6c757d",mt:1},children:new Date(e.admin_reply_date).toLocaleDateString()})]})]},e.review_id)),be.length>5&&i.jsxs(o,{variant:"outlined",sx:{alignSelf:"center",borderColor:"#e74c3c",color:"#e74c3c","&:hover":{borderColor:"#c0392b",backgroundColor:"rgba(231, 76, 60, 0.04)"}},children:["View All Reviews (",be.length,")"]})]}):i.jsxs(r,{sx:{textAlign:"center",py:4},children:[i.jsx(t,{sx:{color:"#6c757d",mb:2},children:"No reviews yet. Be the first to review this product!"}),i.jsx(o,{variant:"contained",onClick:()=>ye(!0),sx:{background:"linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)","&:hover":{background:"linear-gradient(135deg, #c0392b 0%, #a93226 100%)"}},children:"Write a Review"})]})]})})})]}),i.jsxs(z,{open:he,onClose:()=>me(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:4,boxShadow:"0px 20px 60px rgba(26, 26, 46, 0.2)"}},children:[i.jsx(A,{sx:{fontWeight:600,color:"#1A1A2E",fontFamily:'"Inter", sans-serif'},children:"Share Product"}),i.jsx(C,{children:i.jsx(W,{fullWidth:!0,value:window.location.href,InputProps:{readOnly:!0},sx:{mt:2}})}),i.jsxs(_,{sx:{p:3},children:[i.jsx(o,{onClick:()=>me(!1),sx:{color:"#8B8B8B"},children:"Close"}),i.jsx(o,{onClick:()=>{navigator.clipboard.writeText(window.location.href),xe({open:!0,message:"Link copied to clipboard!",severity:"success"}),me(!1)},variant:"contained",sx:{background:"linear-gradient(135deg, #1A1A2E 0%, #16213E 100%)","&:hover":{background:"linear-gradient(135deg, #16213E 0%, #0F0F1E 100%)"}},children:"Copy Link"})]})]}),i.jsx(D,{open:de,onClose:()=>le(!1),onLoginSuccess:e=>{le(!1),X(e),Ce()},message:"Please login to add items to cart"}),i.jsx(R,{open:ce.open,autoHideDuration:3e3,onClose:()=>xe({...ce,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:i.jsx(I,{onClose:()=>xe({...ce,open:!1}),severity:ce.severity,sx:{width:"100%",borderRadius:3,fontWeight:500},children:ce.message})}),i.jsxs(z,{open:we,onClose:()=>ye(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:4,boxShadow:"0 20px 60px rgba(0,0,0,0.2)",background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)"}},children:[i.jsx(A,{sx:{fontWeight:700,color:"#2c3e50",fontFamily:"Inter, sans-serif",textAlign:"center",pb:1},children:"Write a Review"}),i.jsx(C,{sx:{pt:2},children:i.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:3},children:[i.jsxs(r,{children:[i.jsx(t,{sx:{mb:1,fontWeight:600,color:"#2c3e50"},children:"Rating *"}),i.jsx(E,{value:Se.rating,onChange:(e,i)=>{Fe({...Se,rating:i||5})},size:"large",sx:{"& .MuiRating-iconFilled":{color:"#ffc107"}}})]}),i.jsx(W,{label:"Your Name *",value:Se.customer_name,onChange:e=>Fe({...Se,customer_name:e.target.value}),fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),i.jsx(W,{label:"Your Email *",type:"email",value:Se.customer_email,onChange:e=>Fe({...Se,customer_email:e.target.value}),fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),i.jsx(W,{label:"Your Review *",value:Se.review_text,onChange:e=>Fe({...Se,review_text:e.target.value}),fullWidth:!0,multiline:!0,rows:4,variant:"outlined",placeholder:"Share your experience with this product...",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]})}),i.jsxs(_,{sx:{p:3,gap:2},children:[i.jsx(o,{onClick:()=>ye(!1),variant:"outlined",sx:{borderColor:"#6c757d",color:"#6c757d","&:hover":{borderColor:"#495057",backgroundColor:"rgba(108, 117, 125, 0.04)"}},children:"Cancel"}),i.jsx(o,{onClick:async()=>{try{const e=await P.post(`/product/${a}/review`,Se);e.data?.success?(xe({open:!0,message:"Review submitted successfully!",severity:"success"}),ye(!1),Fe({customer_name:"",customer_email:"",rating:5,review_text:""}),Ae()):xe({open:!0,message:e.data?.error||"Failed to submit review",severity:"error"})}catch(e){xe({open:!0,message:"Failed to submit review. Please try again.",severity:"error"})}},variant:"contained",disabled:!Se.customer_name||!Se.customer_email||!Se.review_text,sx:{background:"linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)","&:hover":{background:"linear-gradient(135deg, #c0392b 0%, #a93226 100%)"},"&:disabled":{background:"#e9ecef",color:"#6c757d"}},children:"Submit Review"})]})]})]})};export{Y as default};
