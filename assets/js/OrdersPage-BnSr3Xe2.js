import{r as e,u as s,a as r,j as i,B as t,h as o,T as a,aG as n,A as l,g as d,Z as c,b as x,q as h,aI as b,w as p,ar as j,aW as g,aX as u,i as m,D as f,m as v,p as y,aY as F,aZ as B,a_ as w,P as S,x as W,I as C,ab as k,a$ as E,b0 as _,b1 as R,aS as I,an as L}from"./mui-C2LQx1Gq.js";import{a as z,L as O}from"./index-BxI2nrxN.js";import{u as P}from"./router-CTjFK5iR.js";import"./vendor-HnKmhvXM.js";import"./utils-BpzWs0EA.js";const A=()=>{const[A,T]=e.useState([]),[Y,q]=e.useState(!0),[M,N]=e.useState(null),[Z,G]=e.useState(null),[H,Q]=e.useState(!1),[V,X]=e.useState(!1),[$,J]=e.useState(null),[K,U]=e.useState(0),[ee,se]=e.useState(""),[re,ie]=e.useState(!1),te=s();r(te.breakpoints.down("md"));const oe=P();e.useEffect(()=>{ae()},[]);const ae=async()=>{try{q(!0);const e=await z.get("/customer/orders");e.data?.success?T(e.data.orders||[]):N("Failed to fetch orders")}catch(e){N("Failed to load orders")}finally{q(!1)}},ne=e=>{switch(e.toLowerCase()){case"delivered":return"#00C851";case"shipped":return"#F5A623";case"processing":return"#4b6f44";case"cancelled":return"#b38327";default:return"#8B8B8B"}},le=e=>{switch(e.toLowerCase()){case"delivered":return i.jsx(L,{});case"shipped":return i.jsx(I,{});case"processing":default:return i.jsx(_,{});case"cancelled":return i.jsx(R,{})}};return Y?i.jsxs(t,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",flexDirection:"column",gap:2},children:[i.jsx(o,{sx:{color:"#E94560"}}),i.jsx(a,{variant:"body1",sx:{color:"#8B8B8B"},children:"Loading your orders..."})]}):M?i.jsxs(n,{maxWidth:"lg",sx:{py:4},children:[i.jsx(l,{severity:"error",sx:{mb:3},children:M}),i.jsx(d,{variant:"contained",onClick:ae,sx:{background:"#4b6f44","&:hover":{background:"linear-gradient(135deg, #16213E 0%, #0F0F1E 100%)"}},children:"Try Again"})]}):0===A.length?i.jsx(n,{maxWidth:"lg",sx:{py:4},children:i.jsxs(t,{sx:{textAlign:"center",py:8,bgcolor:"#FFFFFF",borderRadius:4,boxShadow:"0px 4px 20px rgba(75, 111, 68, 0.08)"},children:[i.jsx(c,{sx:{fontSize:80,color:"#B8B8B8",mb:2}}),i.jsx(a,{variant:"h5",sx:{color:"#4b6f44",fontWeight:600,mb:2},children:"No Orders Yet"}),i.jsx(a,{variant:"body1",sx:{color:"#8B8B8B",mb:3},children:"You haven't placed any orders yet. Start shopping to see your orders here."}),i.jsx(d,{variant:"contained",onClick:()=>oe("/"),sx:{background:"linear-gradient(135deg, #E94560 0%, #FF6B7A 100%)","&:hover":{background:"linear-gradient(135deg, #C73650 0%, #E94560 100%)"}},children:"Start Shopping"})]})}):i.jsxs(n,{maxWidth:"lg",sx:{py:4},children:[i.jsx(a,{variant:"h4",sx:{fontWeight:700,color:"#4b6f44",mb:4,fontFamily:'"Inter", sans-serif'},children:"My Orders"}),i.jsx(x,{spacing:3,children:A.map(e=>{return i.jsxs(h,{sx:{borderRadius:4,boxShadow:"0px 4px 20px rgba(75, 111, 68, 0.08)",border:"1px solid rgba(75, 111, 68, 0.05)",overflow:"hidden",transition:"all 0.3s ease","&:hover":{boxShadow:"0px 8px 32px rgba(75, 111, 68, 0.12)",transform:"translateY(-2px)"}},children:[i.jsx(t,{sx:{bgcolor:"#F5F5F5",p:3,borderBottom:"1px solid #E5E5E5"},children:i.jsxs(b,{container:!0,spacing:2,alignItems:"center",children:[i.jsxs(b,{item:!0,xs:12,md:6,children:[i.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[i.jsxs(a,{variant:"h6",sx:{fontWeight:600,color:"#4b6f44"},children:["Order #",e.order_id]}),i.jsx(p,{icon:le(e.status),label:e.status,size:"small",sx:{bgcolor:ne(e.status),color:"#FFFFFF",fontWeight:600,fontSize:"0.75rem"}})]}),i.jsxs(a,{variant:"body2",sx:{color:"#8B8B8B",mt:1},children:["Placed on ",(s=e.created_at,new Date(s).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}))]})]}),i.jsx(b,{item:!0,xs:12,md:6,children:i.jsxs(t,{sx:{display:"flex",justifyContent:{xs:"flex-start",md:"flex-end"},gap:1},children:[i.jsx(d,{variant:"outlined",size:"small",startIcon:i.jsx(j,{}),onClick:()=>(e=>{G(e),Q(!0)})(e),sx:{borderColor:"#E94560",color:"#E94560","&:hover":{borderColor:"#C73650",bgcolor:"rgba(233, 69, 96, 0.1)"}},children:"View Details"}),"delivered"===e.status.toLowerCase()&&i.jsx(d,{variant:"outlined",size:"small",startIcon:i.jsx(g,{}),onClick:()=>(e=>{e.items.forEach(e=>{}),oe("/cart")})(e),sx:{borderColor:"#4b6f44",color:"#4b6f44","&:hover":{borderColor:"#16213E",bgcolor:"rgba(75, 111, 68, 0.1)"}},children:"Reorder"})]})})]})}),i.jsxs(t,{sx:{p:3},children:[i.jsx(b,{container:!0,spacing:3,children:e.items.map((s,r)=>i.jsx(b,{item:!0,xs:12,sm:6,md:4,children:i.jsxs(t,{sx:{display:"flex",gap:2},children:[i.jsx(t,{sx:{minWidth:80,height:80,borderRadius:2,overflow:"hidden",bgcolor:"#F5F5F5"},children:i.jsx(O,{src:s.image,alt:s.name,height:80,sx:{width:"100%",height:"100%",objectFit:"cover"}})}),i.jsxs(t,{sx:{flex:1,minWidth:0},children:[i.jsx(a,{variant:"body1",sx:{fontWeight:600,color:"#4b6f44",mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:s.name}),i.jsxs(a,{variant:"body2",sx:{color:"#8B8B8B",mb:1},children:["Qty: ",s.quantity]}),i.jsxs(a,{variant:"h6",sx:{color:"#4b6f44",fontWeight:700,mb:1},children:["₹",s.price.toLocaleString()]}),"delivered"===e.status.toLowerCase()&&i.jsx(d,{size:"small",variant:"text",startIcon:i.jsx(u,{}),onClick:()=>(J(s),void X(!0)),sx:{color:"#E94560",fontSize:"0.75rem",p:0,minWidth:"auto","&:hover":{bgcolor:"rgba(233, 69, 96, 0.1)"}},children:"Write Review"})]})]})},r))}),i.jsx(m,{sx:{my:3}}),i.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs(a,{variant:"h6",sx:{fontWeight:600,color:"#4b6f44"},children:["Total: ₹",e.total_amount.toLocaleString()]}),i.jsxs(a,{variant:"body2",sx:{color:"#8B8B8B"},children:[e.items.length," item",e.items.length>1?"s":""]})]})]})]},e.order_id);var s})}),i.jsxs(f,{open:H,onClose:()=>Q(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:4,boxShadow:"0px 20px 60px rgba(75, 111, 68, 0.2)"}},children:[i.jsx(v,{sx:{fontWeight:600,color:"#4b6f44",fontFamily:'"Inter", sans-serif',borderBottom:"1px solid #F5F5F5"},children:"Order Details"}),i.jsx(y,{sx:{p:3},children:Z&&i.jsxs(t,{children:[i.jsxs(t,{sx:{mb:4},children:[i.jsx(a,{variant:"h6",sx:{mb:2,fontWeight:600,color:"#4b6f44"},children:"Order Status"}),i.jsxs(F,{activeStep:D(Z.status),orientation:"horizontal",children:[i.jsx(B,{children:i.jsx(w,{children:"Ordered"})}),i.jsx(B,{children:i.jsx(w,{children:"Processing"})}),i.jsx(B,{children:i.jsx(w,{children:"Shipped"})}),i.jsx(B,{children:i.jsx(w,{children:"Delivered"})})]})]}),i.jsxs(t,{sx:{mb:4},children:[i.jsx(a,{variant:"h6",sx:{mb:2,fontWeight:600,color:"#4b6f44"},children:"Shipping Address"}),i.jsxs(S,{sx:{p:2,bgcolor:"#F5F5F5",borderRadius:2},children:[i.jsx(a,{variant:"body1",sx:{fontWeight:600,color:"#4b6f44"},children:Z.shipping_address?.name}),i.jsx(a,{variant:"body2",sx:{color:"#8B8B8B"},children:Z.shipping_address?.address}),i.jsxs(a,{variant:"body2",sx:{color:"#8B8B8B"},children:[Z.shipping_address?.city,", ",Z.shipping_address?.state," - ",Z.shipping_address?.pincode]}),i.jsxs(a,{variant:"body2",sx:{color:"#8B8B8B"},children:["Phone: ",Z.shipping_address?.phone]})]})]}),i.jsxs(t,{sx:{mb:4},children:[i.jsx(a,{variant:"h6",sx:{mb:2,fontWeight:600,color:"#4b6f44"},children:"Payment Details"}),i.jsxs(S,{sx:{p:2,bgcolor:"#F5F5F5",borderRadius:2},children:[i.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[i.jsx(a,{variant:"body2",sx:{color:"#8B8B8B"},children:"Subtotal:"}),i.jsxs(a,{variant:"body2",sx:{fontWeight:600,color:"#4b6f44"},children:["₹",Z.subtotal?.toLocaleString()]})]}),i.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[i.jsx(a,{variant:"body2",sx:{color:"#8B8B8B"},children:"Shipping:"}),i.jsxs(a,{variant:"body2",sx:{fontWeight:600,color:"#4b6f44"},children:["₹",Z.shipping_charge||0]})]}),i.jsx(m,{sx:{my:1}}),i.jsxs(t,{sx:{display:"flex",justifyContent:"space-between"},children:[i.jsx(a,{variant:"h6",sx:{fontWeight:600,color:"#4b6f44"},children:"Total:"}),i.jsxs(a,{variant:"h6",sx:{fontWeight:600,color:"#4b6f44"},children:["₹",Z.total_amount?.toLocaleString()]})]})]})]})]})}),i.jsx(W,{sx:{p:3,borderTop:"1px solid #F5F5F5"},children:i.jsx(d,{onClick:()=>Q(!1),sx:{color:"#8B8B8B"},children:"Close"})})]}),i.jsxs(f,{open:V,onClose:()=>X(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:4,boxShadow:"0px 20px 60px rgba(75, 111, 68, 0.2)"}},children:[i.jsx(v,{sx:{fontWeight:600,color:"#4b6f44",fontFamily:'"Inter", sans-serif'},children:"Write a Review"}),i.jsx(y,{sx:{p:3},children:$&&i.jsxs(t,{children:[i.jsxs(t,{sx:{display:"flex",gap:2,mb:3},children:[i.jsx(t,{sx:{minWidth:60,height:60,borderRadius:2,overflow:"hidden",bgcolor:"#F5F5F5"},children:i.jsx(O,{src:$.image,alt:$.name,height:60,sx:{width:"100%",height:"100%",objectFit:"cover"}})}),i.jsxs(t,{children:[i.jsx(a,{variant:"body1",sx:{fontWeight:600,color:"#4b6f44"},children:$.name}),i.jsxs(a,{variant:"body2",sx:{color:"#8B8B8B"},children:["₹",$.price.toLocaleString()]})]})]}),i.jsxs(t,{sx:{mb:3},children:[i.jsx(a,{variant:"body1",sx:{mb:1,fontWeight:600,color:"#4b6f44"},children:"Rating"}),i.jsx(t,{sx:{display:"flex",gap:1},children:[1,2,3,4,5].map(e=>i.jsx(C,{onClick:()=>U(e),sx:{p:.5},children:e<=K?i.jsx(k,{sx:{color:"#F5A623",fontSize:32}}):i.jsx(E,{sx:{color:"#E5E5E5",fontSize:32}})},e))})]}),i.jsxs(t,{children:[i.jsx(a,{variant:"body1",sx:{mb:1,fontWeight:600,color:"#4b6f44"},children:"Review"}),i.jsx(TextField,{fullWidth:!0,multiline:!0,rows:4,placeholder:"Share your experience with this product...",value:ee,onChange:e=>se(e.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]})]})}),i.jsxs(W,{sx:{p:3,borderTop:"1px solid #F5F5F5"},children:[i.jsx(d,{onClick:()=>X(!1),sx:{color:"#8B8B8B"},children:"Cancel"}),i.jsx(d,{onClick:async()=>{if($&&0!==K){ie(!0);try{await z.post("/customer/reviews",{product_id:$.product_id,rating:K,review_text:ee}),X(!1),U(0),se(""),J(null),ae()}catch(e){}finally{ie(!1)}}},disabled:0===K||re,variant:"contained",sx:{background:"linear-gradient(135deg, #E94560 0%, #FF6B7A 100%)","&:hover":{background:"linear-gradient(135deg, #C73650 0%, #E94560 100%)"}},children:re?"Submitting...":"Submit Review"})]})]})]})},D=e=>{switch(e.toLowerCase()){case"processing":return 1;case"shipped":return 2;case"delivered":return 3;default:return 0}};export{A as default};
