import{a as e,j as i,B as t,h as o,r as n,I as a,aq as r,q as s,l as d,T as l}from"./mui-BZa9U3BX.js";import{a as f,F as c,d as p}from"./index-7nkCZTjO.js";const x=()=>(e("(max-width:768px)"),i.jsxs(t,{sx:{width:"100%",height:480,position:"relative",background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)",borderRadius:"20px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",border:"1px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)",display:"flex",flexDirection:"column"},children:[i.jsxs(t,{sx:{position:"relative",width:"100%",height:320,overflow:"hidden",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",borderRadius:"20px 20px 0 0"},children:[i.jsx(o,{variant:"rectangular",width:"100%",height:"100%",sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(o,{variant:"rounded",width:60,height:24,sx:{position:"absolute",top:16,left:16,borderRadius:"12px",background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(o,{variant:"rounded",width:50,height:24,sx:{position:"absolute",top:16,right:16,borderRadius:"12px",background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsxs(t,{sx:{position:"absolute",bottom:16,right:16,display:"flex",flexDirection:"column",gap:1},children:[i.jsx(o,{variant:"circular",width:44,height:44,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(o,{variant:"circular",width:44,height:44,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]})]}),i.jsxs(t,{sx:{p:2,pt:1,flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[i.jsx(o,{variant:"text",width:"90%",height:36,sx:{mb:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),i.jsx(o,{variant:"rounded",width:"100%",height:40,sx:{borderRadius:"10px",background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",mt:"auto"}})]})]}));if("undefined"!=typeof document){const e=document.createElement("style");e.textContent="\n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n",document.head.appendChild(e)}const h=({product:o})=>{const[x,h]=n.useState(!1),[g,u]=n.useState(!1),[m,b]=n.useState({v1:!1,v2:!1}),v=e("(max-width:768px)"),{addToCart:j,isLoggedIn:w}=f(),{v1Url:k,v2Url:y}=(()=>{const e=o.product_id||o.id||o.productId;return o.images&&o.images.length>0?{v1Url:o.images[0],v2Url:o.images.length>1?o.images[1]:p(e,"v2")}:{v1Url:p(e,"v1"),v2Url:p(e,"v2")}})(),z=0===o.stock_quantity||o.sold_out||0===o.stock||0===o.quantity,S=e=>{b(i=>({...i,[e]:!0}))};return i.jsxs(t,{onClick:()=>{o?.product_id&&(window.location.href=`/product/${o.product_id}`)},onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),sx:{position:"relative",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:"#FFFFFF",borderRadius:"8px",overflow:"hidden","&:hover":{transform:"translateY(-4px)"}},children:[i.jsxs(t,{sx:{position:"relative",width:"100%",height:v?"350px":"400px",overflow:"hidden",mb:2,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[i.jsx(c,{src:k,alt:o.product_name||o.name,height:"100%",quality:80,optimizedWidth:400,optimizedHeight:400,onLoad:()=>S("v1"),sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",opacity:x?0:1,transition:"opacity 0.4s ease-in-out, transform 0.3s ease",transform:x?"scale(1.05)":"scale(1)"},placeholder:"Loading product..."}),i.jsx(c,{src:y,alt:o.product_name||o.name,height:"100%",quality:80,optimizedWidth:400,optimizedHeight:400,onLoad:()=>S("v2"),sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",opacity:x?1:0,transition:"opacity 0.4s ease-in-out, transform 0.3s ease",transform:x?"scale(1.05)":"scale(1)"},placeholder:"Loading product..."}),(!m.v1||!m.v2)&&i.jsx(t,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:1},children:i.jsx(t,{sx:{width:40,height:40,border:"3px solid #f3f3f3",borderTop:"3px solid #b88a44",borderRadius:"50%",animation:"spin 1s linear infinite"}})}),z&&i.jsx(t,{sx:{position:"absolute",top:12,left:12,backgroundColor:"#b88a44",color:"#ffffff",px:2,py:.5,borderRadius:"4px",fontSize:"12px",fontWeight:600,fontFamily:'"Poppins", sans-serif',textTransform:"uppercase",zIndex:10},children:"Sold Out"}),x&&!z&&i.jsxs(t,{sx:{position:"absolute",top:12,right:12,display:"flex",flexDirection:"column",gap:1,zIndex:10},children:[i.jsx(a,{onClick:e=>{e.stopPropagation(),o?.product_id&&(window.location.href=`/product/${o.product_id}`)},sx:{backgroundColor:"rgba(255, 255, 255, 0.9)",color:"#333",width:36,height:36,"&:hover":{backgroundColor:"#ffffff",transform:"scale(1.1)"},transition:"all 0.3s ease"},children:i.jsx(r,{sx:{fontSize:18}})}),i.jsx(a,{onClick:async e=>{if(e.stopPropagation(),!z){u(!0);try{await j(o,1)}catch(i){i.message}finally{u(!1)}}},disabled:g,sx:{backgroundColor:"rgba(255, 255, 255, 0.9)",color:"#333",width:36,height:36,"&:hover":{backgroundColor:"#ffffff",transform:"scale(1.1)"},"&:disabled":{opacity:.6},transition:"all 0.3s ease"},children:g?i.jsx(s,{sx:{fontSize:18,animation:"spin 1s linear infinite"}}):i.jsx(d,{sx:{fontSize:18}})})]})]}),i.jsxs(t,{sx:{px:1,textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"},children:[i.jsx(l,{variant:"h6",sx:{fontWeight:600,color:"#333",fontFamily:'"Poppins", sans-serif',fontSize:{xs:"14px",sm:"16px"},lineHeight:1.3,mb:1,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",minHeight:v?"36px":"42px",textAlign:"center",width:"100%"},children:o.product_name||o.name||"Product Name"}),i.jsx(l,{variant:"body1",sx:{fontWeight:500,color:"#333",fontFamily:'"Poppins", sans-serif',fontSize:{xs:"14px",sm:"16px"},textAlign:"center"},children:(C=o.price||o.sale_price||o.base_price,C?`From Rs. ${C.toLocaleString()}`:"Price not available")})]})]});var C};export{h as C,x as P};
