import{r as e,u as s,a as r,j as i,B as t,C as o,T as a,aH as n,A as l,i as d,O as c,aQ as x,o as h,V as p,t as j,ac as g,aU as b,aV as u,v as m,D as f,b as v,d as y,S as A,e as F,f as B,P as E,h as S,I as w,ad as W,aW as C,aX as k,aY as R,aS as _,at as L}from"./mui-C7nK-0ZR.js";import{a as I,L as z}from"./index-CXpAYYKU.js";import{u as O}from"./router-DoZmC-hp.js";import"./vendor-HnKmhvXM.js";import"./utils-fGN9A5xN.js";const P=()=>{const[P,T]=e.useState([]),[Y,V]=e.useState(!0),[H,M]=e.useState(null),[N,Q]=e.useState(null),[q,U]=e.useState(!1),[X,G]=e.useState(!1),[J,K]=e.useState(null),[Z,$]=e.useState(0),[ee,se]=e.useState(""),[re,ie]=e.useState(!1),te=s();r(te.breakpoints.down("md"));const oe=O();e.useEffect(()=>{ae()},[]);const ae=async()=>{try{V(!0);const e=await I.get("/customer/orders");e.data?.success?T(e.data.orders||[]):M("Failed to fetch orders")}catch(e){M("Failed to load orders")}finally{V(!1)}},ne=e=>{switch(e.toLowerCase()){case"delivered":return"#00C851";case"shipped":return"#F5A623";case"processing":return"#1A1A2E";case"cancelled":return"#FF4444";default:return"#8B8B8B"}},le=e=>{switch(e.toLowerCase()){case"delivered":return i.jsx(L,{});case"shipped":return i.jsx(_,{});case"processing":default:return i.jsx(k,{});case"cancelled":return i.jsx(R,{})}};return Y?i.jsxs(t,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",flexDirection:"column",gap:2},children:[i.jsx(o,{sx:{color:"#E94560"}}),i.jsx(a,{variant:"body1",sx:{color:"#8B8B8B"},children:"Loading your orders..."})]}):H?i.jsxs(n,{maxWidth:"lg",sx:{py:4},children:[i.jsx(l,{severity:"error",sx:{mb:3},children:H}),i.jsx(d,{variant:"contained",onClick:ae,sx:{background:"linear-gradient(135deg, #1A1A2E 0%, #16213E 100%)","&:hover":{background:"linear-gradient(135deg, #16213E 0%, #0F0F1E 100%)"}},children:"Try Again"})]}):0===P.length?i.jsx(n,{maxWidth:"lg",sx:{py:4},children:i.jsxs(t,{sx:{textAlign:"center",py:8,bgcolor:"#FFFFFF",borderRadius:4,boxShadow:"0px 4px 20px rgba(26, 26, 46, 0.08)"},children:[i.jsx(c,{sx:{fontSize:80,color:"#B8B8B8",mb:2}}),i.jsx(a,{variant:"h5",sx:{color:"#1A1A2E",fontWeight:600,mb:2},children:"No Orders Yet"}),i.jsx(a,{variant:"body1",sx:{color:"#8B8B8B",mb:3},children:"You haven't placed any orders yet. Start shopping to see your orders here."}),i.jsx(d,{variant:"contained",onClick:()=>oe("/"),sx:{background:"linear-gradient(135deg, #E94560 0%, #FF6B7A 100%)","&:hover":{background:"linear-gradient(135deg, #C73650 0%, #E94560 100%)"}},children:"Start Shopping"})]})}):i.jsxs(n,{maxWidth:"lg",sx:{py:4},children:[i.jsx(a,{variant:"h4",sx:{fontWeight:700,color:"#1A1A2E",mb:4,fontFamily:'"Inter", sans-serif'},children:"My Orders"}),i.jsx(x,{spacing:3,children:P.map(e=>{return i.jsxs(h,{sx:{borderRadius:4,boxShadow:"0px 4px 20px rgba(26, 26, 46, 0.08)",border:"1px solid rgba(26, 26, 46, 0.05)",overflow:"hidden",transition:"all 0.3s ease","&:hover":{boxShadow:"0px 8px 32px rgba(26, 26, 46, 0.12)",transform:"translateY(-2px)"}},children:[i.jsx(t,{sx:{bgcolor:"#F5F5F5",p:3,borderBottom:"1px solid #E5E5E5"},children:i.jsxs(p,{container:!0,spacing:2,alignItems:"center",children:[i.jsxs(p,{item:!0,xs:12,md:6,children:[i.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[i.jsxs(a,{variant:"h6",sx:{fontWeight:600,color:"#1A1A2E"},children:["Order #",e.order_id]}),i.jsx(j,{icon:le(e.status),label:e.status,size:"small",sx:{bgcolor:ne(e.status),color:"#FFFFFF",fontWeight:600,fontSize:"0.75rem"}})]}),i.jsxs(a,{variant:"body2",sx:{color:"#8B8B8B",mt:1},children:["Placed on ",(s=e.created_at,new Date(s).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}))]})]}),i.jsx(p,{item:!0,xs:12,md:6,children:i.jsxs(t,{sx:{display:"flex",justifyContent:{xs:"flex-start",md:"flex-end"},gap:1},children:[i.jsx(d,{variant:"outlined",size:"small",startIcon:i.jsx(g,{}),onClick:()=>(e=>{Q(e),U(!0)})(e),sx:{borderColor:"#E94560",color:"#E94560","&:hover":{borderColor:"#C73650",bgcolor:"rgba(233, 69, 96, 0.1)"}},children:"View Details"}),"delivered"===e.status.toLowerCase()&&i.jsx(d,{variant:"outlined",size:"small",startIcon:i.jsx(b,{}),onClick:()=>(e=>{e.items.forEach(e=>{}),oe("/cart")})(e),sx:{borderColor:"#1A1A2E",color:"#1A1A2E","&:hover":{borderColor:"#16213E",bgcolor:"rgba(26, 26, 46, 0.1)"}},children:"Reorder"})]})})]})}),i.jsxs(t,{sx:{p:3},children:[i.jsx(p,{container:!0,spacing:3,children:e.items.map((s,r)=>i.jsx(p,{item:!0,xs:12,sm:6,md:4,children:i.jsxs(t,{sx:{display:"flex",gap:2},children:[i.jsx(t,{sx:{minWidth:80,height:80,borderRadius:2,overflow:"hidden",bgcolor:"#F5F5F5"},children:i.jsx(z,{src:s.image,alt:s.name,height:80,sx:{width:"100%",height:"100%",objectFit:"cover"}})}),i.jsxs(t,{sx:{flex:1,minWidth:0},children:[i.jsx(a,{variant:"body1",sx:{fontWeight:600,color:"#1A1A2E",mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:s.name}),i.jsxs(a,{variant:"body2",sx:{color:"#8B8B8B",mb:1},children:["Qty: ",s.quantity]}),i.jsxs(a,{variant:"h6",sx:{color:"#1A1A2E",fontWeight:700,mb:1},children:["₹",s.price.toLocaleString()]}),"delivered"===e.status.toLowerCase()&&i.jsx(d,{size:"small",variant:"text",startIcon:i.jsx(u,{}),onClick:()=>(K(s),void G(!0)),sx:{color:"#E94560",fontSize:"0.75rem",p:0,minWidth:"auto","&:hover":{bgcolor:"rgba(233, 69, 96, 0.1)"}},children:"Write Review"})]})]})},r))}),i.jsx(m,{sx:{my:3}}),i.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs(a,{variant:"h6",sx:{fontWeight:600,color:"#1A1A2E"},children:["Total: ₹",e.total_amount.toLocaleString()]}),i.jsxs(a,{variant:"body2",sx:{color:"#8B8B8B"},children:[e.items.length," item",e.items.length>1?"s":""]})]})]})]},e.order_id);var s})}),i.jsxs(f,{open:q,onClose:()=>U(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:4,boxShadow:"0px 20px 60px rgba(26, 26, 46, 0.2)"}},children:[i.jsx(v,{sx:{fontWeight:600,color:"#1A1A2E",fontFamily:'"Inter", sans-serif',borderBottom:"1px solid #F5F5F5"},children:"Order Details"}),i.jsx(y,{sx:{p:3},children:N&&i.jsxs(t,{children:[i.jsxs(t,{sx:{mb:4},children:[i.jsx(a,{variant:"h6",sx:{mb:2,fontWeight:600,color:"#1A1A2E"},children:"Order Status"}),i.jsxs(A,{activeStep:D(N.status),orientation:"horizontal",children:[i.jsx(F,{children:i.jsx(B,{children:"Ordered"})}),i.jsx(F,{children:i.jsx(B,{children:"Processing"})}),i.jsx(F,{children:i.jsx(B,{children:"Shipped"})}),i.jsx(F,{children:i.jsx(B,{children:"Delivered"})})]})]}),i.jsxs(t,{sx:{mb:4},children:[i.jsx(a,{variant:"h6",sx:{mb:2,fontWeight:600,color:"#1A1A2E"},children:"Shipping Address"}),i.jsxs(E,{sx:{p:2,bgcolor:"#F5F5F5",borderRadius:2},children:[i.jsx(a,{variant:"body1",sx:{fontWeight:600,color:"#1A1A2E"},children:N.shipping_address?.name}),i.jsx(a,{variant:"body2",sx:{color:"#8B8B8B"},children:N.shipping_address?.address}),i.jsxs(a,{variant:"body2",sx:{color:"#8B8B8B"},children:[N.shipping_address?.city,", ",N.shipping_address?.state," - ",N.shipping_address?.pincode]}),i.jsxs(a,{variant:"body2",sx:{color:"#8B8B8B"},children:["Phone: ",N.shipping_address?.phone]})]})]}),i.jsxs(t,{sx:{mb:4},children:[i.jsx(a,{variant:"h6",sx:{mb:2,fontWeight:600,color:"#1A1A2E"},children:"Payment Details"}),i.jsxs(E,{sx:{p:2,bgcolor:"#F5F5F5",borderRadius:2},children:[i.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[i.jsx(a,{variant:"body2",sx:{color:"#8B8B8B"},children:"Subtotal:"}),i.jsxs(a,{variant:"body2",sx:{fontWeight:600,color:"#1A1A2E"},children:["₹",N.subtotal?.toLocaleString()]})]}),i.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[i.jsx(a,{variant:"body2",sx:{color:"#8B8B8B"},children:"Shipping:"}),i.jsxs(a,{variant:"body2",sx:{fontWeight:600,color:"#1A1A2E"},children:["₹",N.shipping_charge||0]})]}),i.jsx(m,{sx:{my:1}}),i.jsxs(t,{sx:{display:"flex",justifyContent:"space-between"},children:[i.jsx(a,{variant:"h6",sx:{fontWeight:600,color:"#1A1A2E"},children:"Total:"}),i.jsxs(a,{variant:"h6",sx:{fontWeight:600,color:"#1A1A2E"},children:["₹",N.total_amount?.toLocaleString()]})]})]})]})]})}),i.jsx(S,{sx:{p:3,borderTop:"1px solid #F5F5F5"},children:i.jsx(d,{onClick:()=>U(!1),sx:{color:"#8B8B8B"},children:"Close"})})]}),i.jsxs(f,{open:X,onClose:()=>G(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:4,boxShadow:"0px 20px 60px rgba(26, 26, 46, 0.2)"}},children:[i.jsx(v,{sx:{fontWeight:600,color:"#1A1A2E",fontFamily:'"Inter", sans-serif'},children:"Write a Review"}),i.jsx(y,{sx:{p:3},children:J&&i.jsxs(t,{children:[i.jsxs(t,{sx:{display:"flex",gap:2,mb:3},children:[i.jsx(t,{sx:{minWidth:60,height:60,borderRadius:2,overflow:"hidden",bgcolor:"#F5F5F5"},children:i.jsx(z,{src:J.image,alt:J.name,height:60,sx:{width:"100%",height:"100%",objectFit:"cover"}})}),i.jsxs(t,{children:[i.jsx(a,{variant:"body1",sx:{fontWeight:600,color:"#1A1A2E"},children:J.name}),i.jsxs(a,{variant:"body2",sx:{color:"#8B8B8B"},children:["₹",J.price.toLocaleString()]})]})]}),i.jsxs(t,{sx:{mb:3},children:[i.jsx(a,{variant:"body1",sx:{mb:1,fontWeight:600,color:"#1A1A2E"},children:"Rating"}),i.jsx(t,{sx:{display:"flex",gap:1},children:[1,2,3,4,5].map(e=>i.jsx(w,{onClick:()=>$(e),sx:{p:.5},children:e<=Z?i.jsx(W,{sx:{color:"#F5A623",fontSize:32}}):i.jsx(C,{sx:{color:"#E5E5E5",fontSize:32}})},e))})]}),i.jsxs(t,{children:[i.jsx(a,{variant:"body1",sx:{mb:1,fontWeight:600,color:"#1A1A2E"},children:"Review"}),i.jsx(TextField,{fullWidth:!0,multiline:!0,rows:4,placeholder:"Share your experience with this product...",value:ee,onChange:e=>se(e.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]})]})}),i.jsxs(S,{sx:{p:3,borderTop:"1px solid #F5F5F5"},children:[i.jsx(d,{onClick:()=>G(!1),sx:{color:"#8B8B8B"},children:"Cancel"}),i.jsx(d,{onClick:async()=>{if(J&&0!==Z){ie(!0);try{await I.post("/customer/reviews",{product_id:J.product_id,rating:Z,review_text:ee}),G(!1),$(0),se(""),K(null),ae()}catch(e){}finally{ie(!1)}}},disabled:0===Z||re,variant:"contained",sx:{background:"linear-gradient(135deg, #E94560 0%, #FF6B7A 100%)","&:hover":{background:"linear-gradient(135deg, #C73650 0%, #E94560 100%)"}},children:re?"Submitting...":"Submit Review"})]})]})]})},D=e=>{switch(e.toLowerCase()){case"processing":return 1;case"shipped":return 2;case"delivered":return 3;default:return 0}};export{P as default};
