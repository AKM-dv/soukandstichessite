import{a as e,r as t,j as r,B as n,k as o,ap as s,I as a,ar as i,T as l,as as c,a1 as d,A as x,ax as p,at as u,au as h,av as g,aw as m}from"./mui-DNFLHsKH.js";import{u as f,a as b,b as j}from"./index-BhCXqEsx.js";import{C as y,P as C}from"./ProductCardSkeleton-zfuyqC1P.js";import{d as v,u as S}from"./router-D0-id3Zg.js";import"./vendor-HnKmhvXM.js";import"./utils-n36L7CQ6.js";import"./imageUtils-CSSK2Bp4.js";const k=()=>{const[k]=v(),w=S(),W=e("(max-width:768px)"),I=e("(max-width:1024px)"),{addToCart:z,isLoggedIn:R,login:B}=f(),[M,A]=t.useState([]),[F,L]=t.useState([]),[P,E]=t.useState(!0),[H,D]=t.useState(!1),[O,T]=t.useState({open:!1,message:"",severity:"success"}),[$,q]=t.useState(null),[N,_]=t.useState(!1),[U,V]=t.useState(""),[Z,G]=t.useState([0,1e5]),[J,K]=t.useState("newest");t.useEffect(()=>{const e=k.get("q");e&&(V(e),Q(e))},[k]),t.useEffect(()=>{X()},[M,Z,J]);const Q=async e=>{try{E(!0);const t=await b.get(`/search?q=${encodeURIComponent(e)}`);if(t.data?.success){const e=t.data.products||[];A(e)}else A([])}catch(t){A([])}finally{E(!1)}},X=()=>{let e=[...M];e=e.filter(e=>{const t=parseFloat(e.price)||0;return t>=Z[0]&&t<=Z[1]}),e.sort((e,t)=>{switch(J){case"price-low":return(parseFloat(e.price)||0)-(parseFloat(t.price)||0);case"price-high":return(parseFloat(t.price)||0)-(parseFloat(e.price)||0);case"name":return e.name.localeCompare(t.name);default:return new Date(t.created_at||0)-new Date(e.created_at||0)}}),L(e)},Y=(e,t)=>{G(t)},ee=e=>{K(e.target.value)},te=()=>r.jsxs(n,{sx:{p:2,height:"fit-content",bgcolor:"#fafafa",borderRight:"1px solid #e0e0e0"},children:[r.jsxs(l,{variant:"body2",sx:{color:"#666",mb:2,fontSize:"12px"},children:['Home > Search > "',U,'"']}),r.jsx(n,{sx:{mb:3},children:r.jsx("button",{onClick:()=>w("/"),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:500,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:"Home"})}),r.jsxs(n,{sx:{mb:3},children:[r.jsx(l,{variant:"h6",sx:{mb:1.5,fontWeight:600,color:"#8B4513",fontSize:"16px"},children:"Price Range"}),r.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:.25},children:[r.jsx("button",{onClick:()=>G([0,7500]),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:400,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:"Rs. 0 - 7,500"}),r.jsx("button",{onClick:()=>G([7501,15e3]),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:400,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:"Rs. 7,501 - 15,000"}),r.jsx("button",{onClick:()=>G([15e3,1e5]),style:{width:"100%",textAlign:"left",color:"#333",fontSize:"14px",fontWeight:400,padding:"8px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0,0,0,0.04)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:"Rs. 15,000+"})]})]}),r.jsxs(n,{children:[r.jsx(l,{variant:"h6",sx:{mb:1.5,fontWeight:600,color:"#8B4513",fontSize:"16px"},children:"Filters"}),r.jsxs(n,{sx:{mb:2},children:[r.jsxs(l,{variant:"body2",sx:{mb:1,color:"#666"},children:["Price Range: ₹",Z[0].toLocaleString()," - ₹",Z[1].toLocaleString()]}),r.jsx(p,{value:Z,onChange:Y,valueLabelDisplay:"auto",min:0,max:1e5,step:1e3,sx:{color:"#8B4513","& .MuiSlider-thumb":{"&:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 8px rgba(139, 69, 19, 0.16)"}}}})]}),r.jsx(n,{children:r.jsxs(u,{fullWidth:!0,size:"small",children:[r.jsx(h,{sx:{color:"#666"},children:"Sort By"}),r.jsxs(g,{value:J,onChange:ee,label:"Sort By",sx:{borderRadius:1,"& .MuiOutlinedInput-notchedOutline":{borderColor:"#e0e0e0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#8B4513"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#8B4513"}},children:[r.jsx(m,{value:"newest",children:"Newest First"}),r.jsx(m,{value:"price-low",children:"Price: Low to High"}),r.jsx(m,{value:"price-high",children:"Price: High to Low"}),r.jsx(m,{value:"name",children:"Name: A to Z"})]})]})})]})]});return r.jsxs(n,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",py:{xs:2,md:4}},children:[r.jsxs(n,{sx:{maxWidth:1400,mx:"auto"},children:[r.jsxs(n,{sx:{mb:6,p:0,position:"relative",overflow:"hidden",minHeight:"300px","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"url('https://picsum.photos/1200/400?random=search')",backgroundSize:"cover",backgroundPosition:"center",opacity:.1,zIndex:0},"& > *":{position:"relative",zIndex:1}},children:[r.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,px:4,pt:4},children:[r.jsx(o,{startIcon:r.jsx(s,{}),onClick:()=>w("/"),sx:{color:"#333",textTransform:"none",fontWeight:500,"&:hover":{backgroundColor:"rgba(0,0,0,0.04)"}},children:"Back to Home"}),!W&&r.jsx(n,{sx:{display:"flex",gap:2},children:r.jsx(a,{sx:{color:"#333"},children:r.jsx(i,{})})})]}),r.jsx(l,{variant:"h4",sx:{fontWeight:700,color:"#2c3e50",fontFamily:'"Inter", sans-serif',fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},mb:2,textAlign:"center",px:4},children:"Search Results"}),r.jsxs(n,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,flexWrap:"wrap",px:4,pb:4},children:[r.jsx(l,{variant:"h6",sx:{color:"#6c757d",fontFamily:'"Inter", sans-serif',fontWeight:500},children:P?"Searching...":`${F.length} product${1!==F.length?"s":""} found for "${U}"`}),r.jsxs(n,{sx:{display:"flex",gap:3,alignItems:"center"},children:[r.jsx(n,{sx:{background:"linear-gradient(135deg, #E91E63 0%, #C2185B 100%)",color:"white",px:2,py:1,borderRadius:2,fontSize:"0.8rem",fontWeight:600},children:"Best Prices"}),r.jsx(n,{sx:{background:"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)",color:"white",px:2,py:1,borderRadius:2,fontSize:"0.8rem",fontWeight:600},children:"Free Shipping"})]})]})]}),r.jsxs(n,{sx:{display:"flex",gap:3,flexDirection:{xs:"column",lg:"row"}},children:[!I&&r.jsx(n,{sx:{width:{lg:280},flexShrink:0},children:r.jsx(n,{sx:{overflow:"hidden"},children:te()})}),r.jsx(n,{sx:{flex:1,minWidth:0},children:P?r.jsx(n,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(auto-fit, minmax(180px, 1fr))",sm:"repeat(auto-fit, minmax(200px, 1fr))",md:"repeat(auto-fit, minmax(220px, 1fr))",lg:"repeat(auto-fit, minmax(240px, 1fr))"},gap:3,justifyContent:"center",alignItems:"start"},children:Array.from({length:8}).map((e,t)=>r.jsx(n,{sx:{width:"100%",maxWidth:"100%",justifySelf:"center"},children:r.jsx(C,{})},t))}):F.length>0?r.jsx(r.Fragment,{children:r.jsx(n,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(auto-fit, minmax(180px, 1fr))",sm:"repeat(auto-fit, minmax(200px, 1fr))",md:"repeat(auto-fit, minmax(220px, 1fr))",lg:"repeat(auto-fit, minmax(240px, 1fr))"},gap:3,justifyContent:"center",alignItems:"start"},children:F.map(e=>r.jsx(n,{sx:{width:"100%",maxWidth:"100%",justifySelf:"center"},children:r.jsx(y,{product:e})},e.product_id))})}):r.jsxs(n,{sx:{textAlign:"center",py:8,px:4},children:[r.jsx(l,{variant:"h5",sx:{color:"#666",mb:2,fontWeight:500},children:"No products found"}),r.jsx(l,{variant:"body1",sx:{color:"#999",mb:4},children:"Try adjusting your search terms or filters"}),r.jsx(o,{variant:"contained",onClick:()=>w("/"),sx:{background:"linear-gradient(135deg, #E91E63 0%, #C2185B 100%)","&:hover":{background:"linear-gradient(135deg, #C2185B 0%, #AD1457 100%)"}},children:"Browse All Products"})]})})]})]}),r.jsx(c,{anchor:"right",open:N,onClose:()=>_(!1),PaperProps:{sx:{width:I?320:380}},children:te()}),r.jsx(j,{open:H,onClose:()=>D(!1),onLoginSuccess:function(e){D(!1),B(e)}}),r.jsx(d,{open:O.open,autoHideDuration:3e3,onClose:()=>T({...O,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:r.jsx(x,{onClose:()=>T({...O,open:!1}),severity:O.severity,sx:{width:"100%"},children:O.message})})]})};export{k as default};
