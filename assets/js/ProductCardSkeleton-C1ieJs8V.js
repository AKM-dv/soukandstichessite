import{r as e,a as i,a9 as t,j as o,B as a,I as n,aO as r,s,m as d,T as f,l}from"./mui-BFxyK2dR.js";import{u as c,F as p}from"./index-CfRD-3Fw.js";import{a as x}from"./imageUtils-BamaHTof.js";import{u as h}from"./router-Di7NXMu_.js";if("undefined"!=typeof document){const e=document.createElement("style");e.textContent="\n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n",document.head.appendChild(e)}const u=({product:l})=>{const[u,g]=e.useState(!1),[m,b]=e.useState(!1),[v,j]=e.useState({v1:!1,v2:!1}),k=i("(max-width:768px)"),w=h(),{addToCart:y,isLoggedIn:z}=c();t.useEffect(()=>{if(l){const e=l.product_id||l.id||l.productId;x(e,"v1"),x(e,"v2")}},[l]);const S=0===l.stock_quantity||l.sold_out||0===l.stock||0===l.quantity,C=e=>{j(i=>({...i,[e]:!0}))};return o.jsxs(a,{onClick:()=>{w(`/product/${l.product_id}`)},onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),sx:{position:"relative",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:"#FFFFFF",borderRadius:"8px",overflow:"hidden","&:hover":{transform:"translateY(-4px)"}},children:[o.jsxs(a,{sx:{position:"relative",width:"100%",height:k?"350px":"400px",overflow:"hidden",mb:2,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[o.jsx(p,{src:x(l.product_id||l.id||l.productId,"v1"),alt:l.product_name||l.name,height:"100%",quality:80,optimizedWidth:400,optimizedHeight:400,onLoad:()=>C("v1"),sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",opacity:u?0:1,transition:"opacity 0.4s ease-in-out, transform 0.3s ease",transform:u?"scale(1.05)":"scale(1)"},placeholder:"Loading product..."}),o.jsx(p,{src:x(l.product_id||l.id||l.productId,"v2"),alt:l.product_name||l.name,height:"100%",quality:80,optimizedWidth:400,optimizedHeight:400,onLoad:()=>C("v2"),sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",opacity:u?1:0,transition:"opacity 0.4s ease-in-out, transform 0.3s ease",transform:u?"scale(1.05)":"scale(1)"},placeholder:"Loading product..."}),(!v.v1||!v.v2)&&o.jsx(a,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:1},children:o.jsx(a,{sx:{width:40,height:40,border:"3px solid #f3f3f3",borderTop:"3px solid #b88a44",borderRadius:"50%",animation:"spin 1s linear infinite"}})}),S&&o.jsx(a,{sx:{position:"absolute",top:12,left:12,backgroundColor:"#b88a44",color:"#ffffff",px:2,py:.5,borderRadius:"4px",fontSize:"12px",fontWeight:600,fontFamily:'"Poppins", sans-serif',textTransform:"uppercase",zIndex:10},children:"Sold Out"}),u&&!S&&o.jsxs(a,{sx:{position:"absolute",top:12,right:12,display:"flex",flexDirection:"column",gap:1,zIndex:10},children:[o.jsx(n,{onClick:e=>{e.stopPropagation(),w(`/product/${l.product_id}`)},sx:{backgroundColor:"rgba(255, 255, 255, 0.9)",color:"#333",width:36,height:36,"&:hover":{backgroundColor:"#ffffff",transform:"scale(1.1)"},transition:"all 0.3s ease"},children:o.jsx(r,{sx:{fontSize:18}})}),o.jsx(n,{onClick:async e=>{if(e.stopPropagation(),!S){b(!0);try{await y(l,1)}catch(i){i.message}finally{b(!1)}}},disabled:m,sx:{backgroundColor:"rgba(255, 255, 255, 0.9)",color:"#333",width:36,height:36,"&:hover":{backgroundColor:"#ffffff",transform:"scale(1.1)"},"&:disabled":{opacity:.6},transition:"all 0.3s ease"},children:m?o.jsx(s,{sx:{fontSize:18,animation:"spin 1s linear infinite"}}):o.jsx(d,{sx:{fontSize:18}})})]})]}),o.jsxs(a,{sx:{px:1,textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"},children:[o.jsx(f,{variant:"h6",sx:{fontWeight:600,color:"#333",fontFamily:'"Poppins", sans-serif',fontSize:{xs:"14px",sm:"16px"},lineHeight:1.3,mb:1,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",minHeight:k?"36px":"42px",textAlign:"center",width:"100%"},children:l.product_name||l.name||"Product Name"}),o.jsx(f,{variant:"body1",sx:{fontWeight:500,color:"#333",fontFamily:'"Poppins", sans-serif',fontSize:{xs:"14px",sm:"16px"},textAlign:"center"},children:(F=l.price||l.sale_price||l.base_price,F?`From Rs. ${F.toLocaleString()}`:"Price not available")})]})]});var F},g=()=>(i("(max-width:768px)"),o.jsxs(a,{sx:{width:"100%",height:480,position:"relative",background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)",borderRadius:"20px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",border:"1px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)",display:"flex",flexDirection:"column"},children:[o.jsxs(a,{sx:{position:"relative",width:"100%",height:320,overflow:"hidden",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",borderRadius:"20px 20px 0 0"},children:[o.jsx(l,{variant:"rectangular",width:"100%",height:"100%",sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),o.jsx(l,{variant:"rounded",width:60,height:24,sx:{position:"absolute",top:16,left:16,borderRadius:"12px",background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),o.jsx(l,{variant:"rounded",width:50,height:24,sx:{position:"absolute",top:16,right:16,borderRadius:"12px",background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),o.jsxs(a,{sx:{position:"absolute",bottom:16,right:16,display:"flex",flexDirection:"column",gap:1},children:[o.jsx(l,{variant:"circular",width:44,height:44,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),o.jsx(l,{variant:"circular",width:44,height:44,sx:{background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]})]}),o.jsxs(a,{sx:{p:2,pt:1,flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[o.jsx(l,{variant:"text",width:"90%",height:36,sx:{mb:1,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),o.jsx(l,{variant:"rounded",width:"100%",height:40,sx:{borderRadius:"10px",background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",mt:"auto"}})]})]}));export{u as C,g as P};
