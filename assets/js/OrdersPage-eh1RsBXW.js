import{r as e,u as s,a as r,j as i,B as t,f as o,T as n,aF as a,A as l,e as d,X as c,Z as x,o as h,aH as b,t as p,aq as g,b0 as j,b1 as u,b2 as m,g as f,D as v,k as y,n as F,aW as B,aX as S,aY as w,P as W,v as C,I as _,aa as k,b3 as E,b4 as I,b5 as L,aS as R,am as D}from"./mui-B4o7H9uu.js";import{b as z,L as A,A as N,S as O}from"./index-BaT9TOBX.js";import{I as P}from"./InvoiceDisplay-Bp01i3ci.js";import{u as T}from"./router-BDKlY_bR.js";import"./vendor-HnKmhvXM.js";import"./utils-yHh8wlql.js";const $=(e={})=>{const s=e.status||e.order_status||e.orderStatus||e.current_status||"";return"string"==typeof s&&s.trim()?s:"Processing"},Y=(e={})=>e.items||e.order_items||e.orderItems||[],q=(e={})=>e.order_id||e.orderId||e.id||"",H=(e,s)=>e?e.startsWith("http")?e:`${N}${e}`:s?`${N}/store/${O}/orders/${s}/invoice`:null,M=()=>{const[N,O]=e.useState([]),[M,X]=e.useState(!0),[Q,V]=e.useState(null),[Z,G]=e.useState(null),[J,K]=e.useState(!1),[ee,se]=e.useState(!1),[re,ie]=e.useState(null),[te,oe]=e.useState(0),[ne,ae]=e.useState(""),[le,de]=e.useState(!1),ce=s();r(ce.breakpoints.down("md"));const xe=T();H(Z?.invoice_url||Z?.invoiceUrl,q(Z));const he=Z?.order_summary||{};e.useEffect(()=>{be()},[]);const be=async()=>{try{X(!0);const e=await z.get("/customer/orders");e.data?.success?O(e.data.orders||[]):V("Failed to fetch orders")}catch(e){V("Failed to load orders")}finally{X(!1)}},pe=e=>{switch((e||"").toString().toLowerCase()){case"delivered":return"#00C851";case"shipped":return"#F5A623";case"processing":return"#4b6f44";case"cancelled":return"#b38327";default:return"#8B8B8B"}},ge=e=>{switch((e||"").toString().toLowerCase()){case"delivered":return i.jsx(D,{});case"shipped":return i.jsx(R,{});case"processing":default:return i.jsx(I,{});case"cancelled":return i.jsx(L,{})}},je=e=>{if(!e)return"Date unavailable";const s=new Date(e);return Number.isNaN(s.getTime())?"Date unavailable":s.toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})};return M?i.jsxs(t,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",flexDirection:"column",gap:2},children:[i.jsx(o,{sx:{color:"#E94560"}}),i.jsx(n,{variant:"body1",sx:{color:"#8B8B8B"},children:"Loading your orders..."})]}):Q?i.jsxs(a,{maxWidth:"lg",sx:{py:4},children:[i.jsx(l,{severity:"error",sx:{mb:3},children:Q}),i.jsx(d,{variant:"contained",onClick:be,sx:{background:"#4b6f44","&:hover":{background:"linear-gradient(135deg, #16213E 0%, #0F0F1E 100%)"}},children:"Try Again"})]}):0===N.length?i.jsx(a,{maxWidth:"lg",sx:{py:4},children:i.jsxs(t,{sx:{textAlign:"center",py:8,bgcolor:"#FFFFFF",borderRadius:4,boxShadow:"0px 4px 20px rgba(75, 111, 68, 0.08)"},children:[i.jsx(c,{sx:{fontSize:80,color:"#B8B8B8",mb:2}}),i.jsx(n,{variant:"h5",sx:{color:"#4b6f44",fontWeight:600,mb:2},children:"No Orders Yet"}),i.jsx(n,{variant:"body1",sx:{color:"#8B8B8B",mb:3},children:"You haven't placed any orders yet. Start shopping to see your orders here."}),i.jsx(d,{variant:"contained",onClick:()=>xe("/"),sx:{background:"linear-gradient(135deg, #E94560 0%, #FF6B7A 100%)","&:hover":{background:"linear-gradient(135deg, #C73650 0%, #E94560 100%)"}},children:"Start Shopping"})]})}):i.jsxs(a,{maxWidth:"lg",sx:{py:4},children:[i.jsx(n,{variant:"h4",sx:{fontWeight:700,color:"#4b6f44",mb:4,fontFamily:'"Inter", sans-serif'},children:"My Orders"}),i.jsx(x,{spacing:3,children:N.map(e=>{const s=$(e),r=Y(e),o=q(e),a=((e={})=>e.created_at||e.placed_on||e.createdAt||e.placedOn||null)(e),l=((e={})=>null!=e.total_amount?e.total_amount:null!=e.total?e.total:null!=e.order_summary?.total?e.order_summary.total:0)(e),c=H(e.invoice_url||e.invoiceUrl,o);return i.jsxs(h,{sx:{borderRadius:4,boxShadow:"0px 4px 20px rgba(75, 111, 68, 0.08)",border:"1px solid rgba(75, 111, 68, 0.05)",overflow:"hidden",transition:"all 0.3s ease","&:hover":{boxShadow:"0px 8px 32px rgba(75, 111, 68, 0.12)",transform:"translateY(-2px)"}},children:[i.jsx(t,{sx:{bgcolor:"#F5F5F5",p:3,borderBottom:"1px solid #E5E5E5"},children:i.jsxs(b,{container:!0,spacing:2,alignItems:"center",children:[i.jsxs(b,{item:!0,xs:12,md:6,children:[i.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[i.jsxs(n,{variant:"h6",sx:{fontWeight:600,color:"#4b6f44"},children:["Order #",o]}),i.jsx(p,{icon:ge(s),label:s,size:"small",sx:{bgcolor:pe(s),color:"#FFFFFF",fontWeight:600,fontSize:"0.75rem"}})]}),i.jsxs(n,{variant:"body2",sx:{color:"#8B8B8B",mt:1},children:["Placed on ",je(a)]})]}),i.jsx(b,{item:!0,xs:12,md:6,children:i.jsxs(t,{sx:{display:"flex",justifyContent:{xs:"flex-start",md:"flex-end"},gap:1},children:[i.jsx(d,{variant:"outlined",size:"small",startIcon:i.jsx(g,{}),onClick:()=>(e=>{G(e),K(!0)})(e),sx:{borderColor:"#E94560",color:"#E94560","&:hover":{borderColor:"#C73650",bgcolor:"rgba(233, 69, 96, 0.1)"}},children:"View Details"}),c&&i.jsx(d,{variant:"contained",size:"small",startIcon:i.jsx(j,{}),component:"a",href:c,target:"_blank",rel:"noopener noreferrer",sx:{background:"linear-gradient(135deg, #4b6f44 0%, #6a8d62 100%)",color:"#FFFFFF","&:hover":{background:"linear-gradient(135deg, #16213E 0%, #0F0F1E 100%)"}},children:"Invoice"}),"delivered"===s.toLowerCase()&&i.jsx(d,{variant:"outlined",size:"small",startIcon:i.jsx(u,{}),onClick:()=>(e=>{Y(e).forEach(e=>{}),xe("/cart")})(e),sx:{borderColor:"#4b6f44",color:"#4b6f44","&:hover":{borderColor:"#16213E",bgcolor:"rgba(75, 111, 68, 0.1)"}},children:"Reorder"})]})})]})}),i.jsxs(t,{sx:{p:3},children:[i.jsx(b,{container:!0,spacing:3,children:r.map((e,r)=>i.jsx(b,{item:!0,xs:12,sm:6,md:4,children:i.jsxs(t,{sx:{display:"flex",gap:2},children:[i.jsx(t,{sx:{minWidth:80,height:80,borderRadius:2,overflow:"hidden",bgcolor:"#F5F5F5"},children:i.jsx(A,{src:e.image,alt:e.name,height:80,sx:{width:"100%",height:"100%",objectFit:"cover"}})}),i.jsxs(t,{sx:{flex:1,minWidth:0},children:[i.jsx(n,{variant:"body1",sx:{fontWeight:600,color:"#4b6f44",mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.name}),i.jsxs(n,{variant:"body2",sx:{color:"#8B8B8B",mb:1},children:["Qty: ",e.quantity]}),i.jsxs(n,{variant:"h6",sx:{color:"#4b6f44",fontWeight:700,mb:1},children:["₹",e.price.toLocaleString()]}),"delivered"===s.toLowerCase()&&i.jsx(d,{size:"small",variant:"text",startIcon:i.jsx(m,{}),onClick:()=>(ie(e),void se(!0)),sx:{color:"#E94560",fontSize:"0.75rem",p:0,minWidth:"auto","&:hover":{bgcolor:"rgba(233, 69, 96, 0.1)"}},children:"Write Review"})]})]})},r))}),i.jsx(f,{sx:{my:3}}),i.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs(n,{variant:"h6",sx:{fontWeight:600,color:"#4b6f44"},children:["Total: ₹",Number(l||0).toLocaleString()]}),i.jsxs(n,{variant:"body2",sx:{color:"#8B8B8B"},children:[r.length," item",r.length>1?"s":""]})]})]})]},o||e.created_at)})}),i.jsxs(v,{open:J,onClose:()=>K(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:4,boxShadow:"0px 20px 60px rgba(75, 111, 68, 0.2)"}},children:[i.jsx(y,{sx:{fontWeight:600,color:"#4b6f44",fontFamily:'"Inter", sans-serif',borderBottom:"1px solid #F5F5F5"},children:"Order Details"}),i.jsx(F,{sx:{p:3},children:Z&&i.jsxs(t,{children:[i.jsxs(t,{sx:{mb:4},children:[i.jsx(n,{variant:"h6",sx:{mb:2,fontWeight:600,color:"#4b6f44"},children:"Order Status"}),i.jsxs(B,{activeStep:U($(Z)),orientation:"horizontal",children:[i.jsx(S,{children:i.jsx(w,{children:"Ordered"})}),i.jsx(S,{children:i.jsx(w,{children:"Processing"})}),i.jsx(S,{children:i.jsx(w,{children:"Shipped"})}),i.jsx(S,{children:i.jsx(w,{children:"Delivered"})})]})]}),i.jsxs(t,{sx:{mb:4},children:[i.jsx(n,{variant:"h6",sx:{mb:2,fontWeight:600,color:"#4b6f44"},children:"Shipping Address"}),i.jsxs(W,{sx:{p:2,bgcolor:"#F5F5F5",borderRadius:2},children:[i.jsx(n,{variant:"body1",sx:{fontWeight:600,color:"#4b6f44"},children:Z.shipping_address?.name}),i.jsx(n,{variant:"body2",sx:{color:"#8B8B8B"},children:Z.shipping_address?.address}),i.jsxs(n,{variant:"body2",sx:{color:"#8B8B8B"},children:[Z.shipping_address?.city,", ",Z.shipping_address?.state," - ",Z.shipping_address?.pincode]}),i.jsxs(n,{variant:"body2",sx:{color:"#8B8B8B"},children:["Phone: ",Z.shipping_address?.phone]})]})]}),Z&&i.jsx(t,{sx:{mb:4},children:i.jsx(P,{order:Z,onDownload:e=>{window.open(e,"_blank")}})}),i.jsxs(t,{sx:{mb:4},children:[i.jsx(n,{variant:"h6",sx:{mb:2,fontWeight:600,color:"#4b6f44"},children:"Payment Details"}),i.jsxs(W,{sx:{p:2,bgcolor:"#F5F5F5",borderRadius:2},children:[i.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[i.jsx(n,{variant:"body2",sx:{color:"#8B8B8B"},children:"Subtotal:"}),i.jsxs(n,{variant:"body2",sx:{fontWeight:600,color:"#4b6f44"},children:["₹",Number(he.subtotal??Z?.total_amount??0).toLocaleString()]})]}),i.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[i.jsx(n,{variant:"body2",sx:{color:"#8B8B8B"},children:"Shipping:"}),i.jsxs(n,{variant:"body2",sx:{fontWeight:600,color:"#4b6f44"},children:["₹",Number(he.shipping??Z?.shipping_charge??0).toLocaleString()]})]}),(he.discount??0)>0&&i.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[i.jsx(n,{variant:"body2",sx:{color:"#8B8B8B"},children:"Discount:"}),i.jsxs(n,{variant:"body2",sx:{fontWeight:600,color:"#E94560"},children:["-₹",Number(he.discount||0).toLocaleString()]})]}),i.jsx(f,{sx:{my:1}}),i.jsxs(t,{sx:{display:"flex",justifyContent:"space-between"},children:[i.jsx(n,{variant:"h6",sx:{fontWeight:600,color:"#4b6f44"},children:"Total:"}),i.jsxs(n,{variant:"h6",sx:{fontWeight:600,color:"#4b6f44"},children:["₹",Number(he.total??Z?.total_amount??0).toLocaleString()]})]})]})]})]})}),i.jsx(C,{sx:{p:3,borderTop:"1px solid #F5F5F5"},children:i.jsx(d,{onClick:()=>K(!1),sx:{color:"#8B8B8B"},children:"Close"})})]}),i.jsxs(v,{open:ee,onClose:()=>se(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:4,boxShadow:"0px 20px 60px rgba(75, 111, 68, 0.2)"}},children:[i.jsx(y,{sx:{fontWeight:600,color:"#4b6f44",fontFamily:'"Inter", sans-serif'},children:"Write a Review"}),i.jsx(F,{sx:{p:3},children:re&&i.jsxs(t,{children:[i.jsxs(t,{sx:{display:"flex",gap:2,mb:3},children:[i.jsx(t,{sx:{minWidth:60,height:60,borderRadius:2,overflow:"hidden",bgcolor:"#F5F5F5"},children:i.jsx(A,{src:re.image,alt:re.name,height:60,sx:{width:"100%",height:"100%",objectFit:"cover"}})}),i.jsxs(t,{children:[i.jsx(n,{variant:"body1",sx:{fontWeight:600,color:"#4b6f44"},children:re.name}),i.jsxs(n,{variant:"body2",sx:{color:"#8B8B8B"},children:["₹",re.price.toLocaleString()]})]})]}),i.jsxs(t,{sx:{mb:3},children:[i.jsx(n,{variant:"body1",sx:{mb:1,fontWeight:600,color:"#4b6f44"},children:"Rating"}),i.jsx(t,{sx:{display:"flex",gap:1},children:[1,2,3,4,5].map(e=>i.jsx(_,{onClick:()=>oe(e),sx:{p:.5},children:e<=te?i.jsx(k,{sx:{color:"#F5A623",fontSize:32}}):i.jsx(E,{sx:{color:"#E5E5E5",fontSize:32}})},e))})]}),i.jsxs(t,{children:[i.jsx(n,{variant:"body1",sx:{mb:1,fontWeight:600,color:"#4b6f44"},children:"Review"}),i.jsx(TextField,{fullWidth:!0,multiline:!0,rows:4,placeholder:"Share your experience with this product...",value:ne,onChange:e=>ae(e.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]})]})}),i.jsxs(C,{sx:{p:3,borderTop:"1px solid #F5F5F5"},children:[i.jsx(d,{onClick:()=>se(!1),sx:{color:"#8B8B8B"},children:"Cancel"}),i.jsx(d,{onClick:async()=>{if(re&&0!==te){de(!0);try{await z.post("/customer/reviews",{product_id:re.product_id,rating:te,review_text:ne}),se(!1),oe(0),ae(""),ie(null),be()}catch(e){}finally{de(!1)}}},disabled:0===te||le,variant:"contained",sx:{background:"linear-gradient(135deg, #E94560 0%, #FF6B7A 100%)","&:hover":{background:"linear-gradient(135deg, #C73650 0%, #E94560 100%)"}},children:le?"Submitting...":"Submit Review"})]})]})]})},U=e=>{switch((e||"").toString().toLowerCase()){case"processing":return 1;case"shipped":return 2;case"delivered":return 3;default:return 0}};export{M as default};
